var cropper =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/twww/cn";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/vendor/cropper/cropper-v1.js":
/***/ (function(module, exports) {

eval("(function(global,factory){global.Cropper=factory()})(window,function(){\"use strict\";function _typeof(obj){if(typeof Symbol===\"function\"&&typeof Symbol.iterator===\"symbol\"){_typeof=function(obj){return typeof obj}}else{_typeof=function(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)===\"[object Arguments]\")return Array.from(iter)}function _nonIterableSpread(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}var IS_BROWSER=typeof window!==\"undefined\"&&typeof window.document!==\"undefined\";var WINDOW=IS_BROWSER?window:{};var IS_TOUCH_DEVICE=IS_BROWSER?\"ontouchstart\"in WINDOW.document.documentElement:false;var HAS_POINTER_EVENT=IS_BROWSER?\"PointerEvent\"in WINDOW:false;var NAMESPACE=\"cropper\";var ACTION_ALL=\"all\";var ACTION_CROP=\"crop\";var ACTION_MOVE=\"move\";var ACTION_ZOOM=\"zoom\";var ACTION_EAST=\"e\";var ACTION_WEST=\"w\";var ACTION_SOUTH=\"s\";var ACTION_NORTH=\"n\";var ACTION_NORTH_EAST=\"ne\";var ACTION_NORTH_WEST=\"nw\";var ACTION_SOUTH_EAST=\"se\";var ACTION_SOUTH_WEST=\"sw\";var CLASS_CROP=\"\".concat(NAMESPACE,\"-crop\");var CLASS_DISABLED=\"\".concat(NAMESPACE,\"-disabled\");var CLASS_HIDDEN=\"\".concat(NAMESPACE,\"-hidden\");var CLASS_HIDE=\"\".concat(NAMESPACE,\"-hide\");var CLASS_INVISIBLE=\"\".concat(NAMESPACE,\"-invisible\");var CLASS_MODAL=\"\".concat(NAMESPACE,\"-modal\");var CLASS_MOVE=\"\".concat(NAMESPACE,\"-move\");var DATA_ACTION=\"\".concat(NAMESPACE,\"Action\");var DATA_PREVIEW=\"\".concat(NAMESPACE,\"Preview\");var DRAG_MODE_CROP=\"crop\";var DRAG_MODE_MOVE=\"move\";var DRAG_MODE_NONE=\"none\";var EVENT_CROP=\"crop\";var EVENT_CROP_END=\"cropend\";var EVENT_CROP_MOVE=\"cropmove\";var EVENT_CROP_START=\"cropstart\";var EVENT_DBLCLICK=\"dblclick\";var EVENT_TOUCH_START=IS_TOUCH_DEVICE?\"touchstart\":\"mousedown\";var EVENT_TOUCH_MOVE=IS_TOUCH_DEVICE?\"touchmove\":\"mousemove\";var EVENT_TOUCH_END=IS_TOUCH_DEVICE?\"touchend touchcancel\":\"mouseup\";var EVENT_POINTER_DOWN=HAS_POINTER_EVENT?\"pointerdown\":EVENT_TOUCH_START;var EVENT_POINTER_MOVE=HAS_POINTER_EVENT?\"pointermove\":EVENT_TOUCH_MOVE;var EVENT_POINTER_UP=HAS_POINTER_EVENT?\"pointerup pointercancel\":EVENT_TOUCH_END;var EVENT_READY=\"ready\";var EVENT_RESIZE=\"resize\";var EVENT_WHEEL=\"wheel\";var EVENT_ZOOM=\"zoom\";var MIME_TYPE_JPEG=\"image/jpeg\";var REGEXP_ACTIONS=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/;var REGEXP_DATA_URL=/^data:/;var REGEXP_DATA_URL_JPEG=/^data:image\\/jpeg;base64,/;var REGEXP_TAG_NAME=/^img|canvas$/i;var MIN_CONTAINER_WIDTH=200;var MIN_CONTAINER_HEIGHT=100;var DEFAULTS={viewMode:0,dragMode:DRAG_MODE_CROP,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:\"\",responsive:true,restore:true,checkCrossOrigin:true,checkOrientation:true,modal:true,guides:true,center:true,highlight:true,background:true,autoCrop:true,autoCropArea:.8,movable:true,rotatable:true,scalable:true,zoomable:true,zoomOnTouch:true,zoomOnWheel:true,wheelZoomRatio:.1,cropBoxMovable:true,cropBoxResizable:true,toggleDragModeOnDblclick:true,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null};var TEMPLATE='<div class=\"cropper-container\" touch-action=\"none\">'+'<div class=\"cropper-wrap-box\">'+'<div class=\"cropper-canvas\"></div>'+\"</div>\"+'<div class=\"cropper-drag-box\"></div>'+'<div class=\"cropper-crop-box\">'+'<span class=\"cropper-view-box\"></span>'+'<span class=\"cropper-dashed dashed-h\"></span>'+'<span class=\"cropper-dashed dashed-v\"></span>'+'<span class=\"cropper-center\"></span>'+'<span class=\"cropper-face\"></span>'+'<span class=\"cropper-line line-e\" data-cropper-action=\"e\"></span>'+'<span class=\"cropper-line line-n\" data-cropper-action=\"n\"></span>'+'<span class=\"cropper-line line-w\" data-cropper-action=\"w\"></span>'+'<span class=\"cropper-line line-s\" data-cropper-action=\"s\"></span>'+'<span class=\"cropper-point point-e\" data-cropper-action=\"e\"></span>'+'<span class=\"cropper-point point-n\" data-cropper-action=\"n\"></span>'+'<span class=\"cropper-point point-w\" data-cropper-action=\"w\"></span>'+'<span class=\"cropper-point point-s\" data-cropper-action=\"s\"></span>'+'<span class=\"cropper-point point-ne\" data-cropper-action=\"ne\"></span>'+'<span class=\"cropper-point point-nw\" data-cropper-action=\"nw\"></span>'+'<span class=\"cropper-point point-sw\" data-cropper-action=\"sw\"></span>'+'<span class=\"cropper-point point-se\" data-cropper-action=\"se\"></span>'+\"</div>\"+\"</div>\";var isNaN=Number.isNaN||WINDOW.isNaN;function isNumber(value){return typeof value===\"number\"&&!isNaN(value)}var isPositiveNumber=function isPositiveNumber(value){return value>0&&value<Infinity};function isUndefined(value){return typeof value===\"undefined\"}function isObject(value){return _typeof(value)===\"object\"&&value!==null}var hasOwnProperty=Object.prototype.hasOwnProperty;function isPlainObject(value){if(!isObject(value)){return false}try{var _constructor=value.constructor;var prototype=_constructor.prototype;return _constructor&&prototype&&hasOwnProperty.call(prototype,\"isPrototypeOf\")}catch(error){return false}}function isFunction(value){return typeof value===\"function\"}var slice=Array.prototype.slice;function toArray(value){return Array.from?Array.from(value):slice.call(value)}function forEach(data,callback){if(data&&isFunction(callback)){if(Array.isArray(data)||isNumber(data.length)){toArray(data).forEach(function(value,key){callback.call(data,value,key,data)})}else if(isObject(data)){Object.keys(data).forEach(function(key){callback.call(data,data[key],key,data)})}}return data}var assign=Object.assign||function assign(target){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}if(isObject(target)&&args.length>0){args.forEach(function(arg){if(isObject(arg)){Object.keys(arg).forEach(function(key){target[key]=arg[key]})}})}return target};var REGEXP_DECIMALS=/\\.\\d*(?:0|9){12}\\d*$/;function normalizeDecimalNumber(value){var times=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1e11;return REGEXP_DECIMALS.test(value)?Math.round(value*times)/times:value}var REGEXP_SUFFIX=/^width|height|left|top|marginLeft|marginTop$/;function setStyle(element,styles){var style=element.style;forEach(styles,function(value,property){if(REGEXP_SUFFIX.test(property)&&isNumber(value)){value=\"\".concat(value,\"px\")}style[property]=value})}function hasClass(element,value){return element.classList?element.classList.contains(value):element.className.indexOf(value)>-1}function addClass(element,value){if(!value){return}if(isNumber(element.length)){forEach(element,function(elem){addClass(elem,value)});return}if(element.classList){element.classList.add(value);return}var className=element.className.trim();if(!className){element.className=value}else if(className.indexOf(value)<0){element.className=\"\".concat(className,\" \").concat(value)}}function removeClass(element,value){if(!value){return}if(isNumber(element.length)){forEach(element,function(elem){removeClass(elem,value)});return}if(element.classList){element.classList.remove(value);return}if(element.className.indexOf(value)>=0){element.className=element.className.replace(value,\"\")}}function toggleClass(element,value,added){if(!value){return}if(isNumber(element.length)){forEach(element,function(elem){toggleClass(elem,value,added)});return}if(added){addClass(element,value)}else{removeClass(element,value)}}var REGEXP_CAMEL_CASE=/([a-z\\d])([A-Z])/g;function toParamCase(value){return value.replace(REGEXP_CAMEL_CASE,\"$1-$2\").toLowerCase()}function getData(element,name){if(isObject(element[name])){return element[name]}if(element.dataset){return element.dataset[name]}return element.getAttribute(\"data-\".concat(toParamCase(name)))}function setData(element,name,data){if(isObject(data)){element[name]=data}else if(element.dataset){element.dataset[name]=data}else{element.setAttribute(\"data-\".concat(toParamCase(name)),data)}}function removeData(element,name){if(isObject(element[name])){try{delete element[name]}catch(error){element[name]=undefined}}else if(element.dataset){try{delete element.dataset[name]}catch(error){element.dataset[name]=undefined}}else{element.removeAttribute(\"data-\".concat(toParamCase(name)))}}var REGEXP_SPACES=/\\s\\s*/;var onceSupported=function(){var supported=false;if(IS_BROWSER){var once=false;var listener=function listener(){};var options=Object.defineProperty({},\"once\",{get:function get(){supported=true;return once},set:function set(value){once=value}});WINDOW.addEventListener(\"test\",listener,options);WINDOW.removeEventListener(\"test\",listener,options)}return supported}();function removeListener(element,type,listener){var options=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var handler=listener;type.trim().split(REGEXP_SPACES).forEach(function(event){if(!onceSupported){var listeners=element.listeners;if(listeners&&listeners[event]&&listeners[event][listener]){handler=listeners[event][listener];delete listeners[event][listener];if(Object.keys(listeners[event]).length===0){delete listeners[event]}if(Object.keys(listeners).length===0){delete element.listeners}}}element.removeEventListener(event,handler,options)})}function addListener(element,type,listener){var options=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var _handler=listener;type.trim().split(REGEXP_SPACES).forEach(function(event){if(options.once&&!onceSupported){var _element$listeners=element.listeners,listeners=_element$listeners===void 0?{}:_element$listeners;_handler=function handler(){delete listeners[event][listener];element.removeEventListener(event,_handler,options);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}listener.apply(element,args)};if(!listeners[event]){listeners[event]={}}if(listeners[event][listener]){element.removeEventListener(event,listeners[event][listener],options)}listeners[event][listener]=_handler;element.listeners=listeners}element.addEventListener(event,_handler,options)})}function dispatchEvent(element,type,data){var event;if(isFunction(Event)&&isFunction(CustomEvent)){event=new CustomEvent(type,{detail:data,bubbles:true,cancelable:true})}else{event=document.createEvent(\"CustomEvent\");event.initCustomEvent(type,true,true,data)}return element.dispatchEvent(event)}function getOffset(element){var box=element.getBoundingClientRect();return{left:box.left+(window.pageXOffset-document.documentElement.clientLeft),top:box.top+(window.pageYOffset-document.documentElement.clientTop)}}var location=WINDOW.location;var REGEXP_ORIGINS=/^(\\w+:)\\/\\/([^:/?#]*):?(\\d*)/i;function isCrossOriginURL(url){var parts=url.match(REGEXP_ORIGINS);return parts!==null&&(parts[1]!==location.protocol||parts[2]!==location.hostname||parts[3]!==location.port)}function addTimestamp(url){var timestamp=\"timestamp=\".concat((new Date).getTime());return url+(url.indexOf(\"?\")===-1?\"?\":\"&\")+timestamp}function getTransforms(_ref){var rotate=_ref.rotate,scaleX=_ref.scaleX,scaleY=_ref.scaleY,translateX=_ref.translateX,translateY=_ref.translateY;var values=[];if(isNumber(translateX)&&translateX!==0){values.push(\"translateX(\".concat(translateX,\"px)\"))}if(isNumber(translateY)&&translateY!==0){values.push(\"translateY(\".concat(translateY,\"px)\"))}if(isNumber(rotate)&&rotate!==0){values.push(\"rotate(\".concat(rotate,\"deg)\"))}if(isNumber(scaleX)&&scaleX!==1){values.push(\"scaleX(\".concat(scaleX,\")\"))}if(isNumber(scaleY)&&scaleY!==1){values.push(\"scaleY(\".concat(scaleY,\")\"))}var transform=values.length?values.join(\" \"):\"none\";return{WebkitTransform:transform,msTransform:transform,transform:transform}}function getMaxZoomRatio(pointers){var pointers2=_objectSpread2({},pointers);var ratios=[];forEach(pointers,function(pointer,pointerId){delete pointers2[pointerId];forEach(pointers2,function(pointer2){var x1=Math.abs(pointer.startX-pointer2.startX);var y1=Math.abs(pointer.startY-pointer2.startY);var x2=Math.abs(pointer.endX-pointer2.endX);var y2=Math.abs(pointer.endY-pointer2.endY);var z1=Math.sqrt(x1*x1+y1*y1);var z2=Math.sqrt(x2*x2+y2*y2);var ratio=(z2-z1)/z1;ratios.push(ratio)})});ratios.sort(function(a,b){return Math.abs(a)<Math.abs(b)});return ratios[0]}function getPointer(_ref2,endOnly){var pageX=_ref2.pageX,pageY=_ref2.pageY;var end={endX:pageX,endY:pageY};return endOnly?end:_objectSpread2({startX:pageX,startY:pageY},end)}function getPointersCenter(pointers){var pageX=0;var pageY=0;var count=0;forEach(pointers,function(_ref3){var startX=_ref3.startX,startY=_ref3.startY;pageX+=startX;pageY+=startY;count+=1});pageX/=count;pageY/=count;return{pageX:pageX,pageY:pageY}}function getAdjustedSizes(_ref4){var aspectRatio=_ref4.aspectRatio,height=_ref4.height,width=_ref4.width;var type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"contain\";var isValidWidth=isPositiveNumber(width);var isValidHeight=isPositiveNumber(height);if(isValidWidth&&isValidHeight){var adjustedWidth=height*aspectRatio;if(type===\"contain\"&&adjustedWidth>width||type===\"cover\"&&adjustedWidth<width){height=width/aspectRatio}else{width=height*aspectRatio}}else if(isValidWidth){height=width/aspectRatio}else if(isValidHeight){width=height*aspectRatio}return{width:width,height:height}}function getRotatedSizes(_ref5){var width=_ref5.width,height=_ref5.height,degree=_ref5.degree;degree=Math.abs(degree)%180;if(degree===90){return{width:height,height:width}}var arc=degree%90*Math.PI/180;var sinArc=Math.sin(arc);var cosArc=Math.cos(arc);var newWidth=width*cosArc+height*sinArc;var newHeight=width*sinArc+height*cosArc;return degree>90?{width:newHeight,height:newWidth}:{width:newWidth,height:newHeight}}function getSourceCanvas(image,_ref6,_ref7,_ref8){var imageAspectRatio=_ref6.aspectRatio,imageNaturalWidth=_ref6.naturalWidth,imageNaturalHeight=_ref6.naturalHeight,_ref6$rotate=_ref6.rotate,rotate=_ref6$rotate===void 0?0:_ref6$rotate,_ref6$scaleX=_ref6.scaleX,scaleX=_ref6$scaleX===void 0?1:_ref6$scaleX,_ref6$scaleY=_ref6.scaleY,scaleY=_ref6$scaleY===void 0?1:_ref6$scaleY;var aspectRatio=_ref7.aspectRatio,naturalWidth=_ref7.naturalWidth,naturalHeight=_ref7.naturalHeight;var _ref8$fillColor=_ref8.fillColor,fillColor=_ref8$fillColor===void 0?\"transparent\":_ref8$fillColor,_ref8$imageSmoothingE=_ref8.imageSmoothingEnabled,imageSmoothingEnabled=_ref8$imageSmoothingE===void 0?true:_ref8$imageSmoothingE,_ref8$imageSmoothingQ=_ref8.imageSmoothingQuality,imageSmoothingQuality=_ref8$imageSmoothingQ===void 0?\"low\":_ref8$imageSmoothingQ,_ref8$maxWidth=_ref8.maxWidth,maxWidth=_ref8$maxWidth===void 0?Infinity:_ref8$maxWidth,_ref8$maxHeight=_ref8.maxHeight,maxHeight=_ref8$maxHeight===void 0?Infinity:_ref8$maxHeight,_ref8$minWidth=_ref8.minWidth,minWidth=_ref8$minWidth===void 0?0:_ref8$minWidth,_ref8$minHeight=_ref8.minHeight,minHeight=_ref8$minHeight===void 0?0:_ref8$minHeight;var canvas=document.createElement(\"canvas\");var context=canvas.getContext(\"2d\");var maxSizes=getAdjustedSizes({aspectRatio:aspectRatio,width:maxWidth,height:maxHeight});var minSizes=getAdjustedSizes({aspectRatio:aspectRatio,width:minWidth,height:minHeight},\"cover\");var width=Math.min(maxSizes.width,Math.max(minSizes.width,naturalWidth));var height=Math.min(maxSizes.height,Math.max(minSizes.height,naturalHeight));var destMaxSizes=getAdjustedSizes({aspectRatio:imageAspectRatio,width:maxWidth,height:maxHeight});var destMinSizes=getAdjustedSizes({aspectRatio:imageAspectRatio,width:minWidth,height:minHeight},\"cover\");var destWidth=Math.min(destMaxSizes.width,Math.max(destMinSizes.width,imageNaturalWidth));var destHeight=Math.min(destMaxSizes.height,Math.max(destMinSizes.height,imageNaturalHeight));var params=[-destWidth/2,-destHeight/2,destWidth,destHeight];canvas.width=normalizeDecimalNumber(width);canvas.height=normalizeDecimalNumber(height);context.fillStyle=fillColor;context.fillRect(0,0,width,height);context.save();context.translate(width/2,height/2);context.rotate(rotate*Math.PI/180);context.scale(scaleX,scaleY);context.imageSmoothingEnabled=imageSmoothingEnabled;context.imageSmoothingQuality=imageSmoothingQuality;context.drawImage.apply(context,[image].concat(_toConsumableArray(params.map(function(param){return Math.floor(normalizeDecimalNumber(param))}))));context.restore();return canvas}var fromCharCode=String.fromCharCode;function getStringFromCharCode(dataView,start,length){var str=\"\";length+=start;for(var i=start;i<length;i+=1){str+=fromCharCode(dataView.getUint8(i))}return str}var REGEXP_DATA_URL_HEAD=/^data:.*,/;function dataURLToArrayBuffer(dataURL){var base64=dataURL.replace(REGEXP_DATA_URL_HEAD,\"\");var binary=atob(base64);var arrayBuffer=new ArrayBuffer(binary.length);var uint8=new Uint8Array(arrayBuffer);forEach(uint8,function(value,i){uint8[i]=binary.charCodeAt(i)});return arrayBuffer}function arrayBufferToDataURL(arrayBuffer,mimeType){var chunks=[];var chunkSize=8192;var uint8=new Uint8Array(arrayBuffer);while(uint8.length>0){chunks.push(fromCharCode.apply(null,toArray(uint8.subarray(0,chunkSize))));uint8=uint8.subarray(chunkSize)}return\"data:\".concat(mimeType,\";base64,\").concat(btoa(chunks.join(\"\")))}function resetAndGetOrientation(arrayBuffer){var dataView=new DataView(arrayBuffer);var orientation;try{var littleEndian;var app1Start;var ifdStart;if(dataView.getUint8(0)===255&&dataView.getUint8(1)===216){var length=dataView.byteLength;var offset=2;while(offset+1<length){if(dataView.getUint8(offset)===255&&dataView.getUint8(offset+1)===225){app1Start=offset;break}offset+=1}}if(app1Start){var exifIDCode=app1Start+4;var tiffOffset=app1Start+10;if(getStringFromCharCode(dataView,exifIDCode,4)===\"Exif\"){var endianness=dataView.getUint16(tiffOffset);littleEndian=endianness===18761;if(littleEndian||endianness===19789){if(dataView.getUint16(tiffOffset+2,littleEndian)===42){var firstIFDOffset=dataView.getUint32(tiffOffset+4,littleEndian);if(firstIFDOffset>=8){ifdStart=tiffOffset+firstIFDOffset}}}}}if(ifdStart){var _length=dataView.getUint16(ifdStart,littleEndian);var _offset;var i;for(i=0;i<_length;i+=1){_offset=ifdStart+i*12+2;if(dataView.getUint16(_offset,littleEndian)===274){_offset+=8;orientation=dataView.getUint16(_offset,littleEndian);dataView.setUint16(_offset,1,littleEndian);break}}}}catch(error){orientation=1}return orientation}function parseOrientation(orientation){var rotate=0;var scaleX=1;var scaleY=1;switch(orientation){case 2:scaleX=-1;break;case 3:rotate=-180;break;case 4:scaleY=-1;break;case 5:rotate=90;scaleY=-1;break;case 6:rotate=90;break;case 7:rotate=90;scaleX=-1;break;case 8:rotate=-90;break;default:}return{rotate:rotate,scaleX:scaleX,scaleY:scaleY}}var render={render:function render(){this.initContainer();this.initCanvas();this.initCropBox();this.renderCanvas();if(this.cropped){this.renderCropBox()}},initContainer:function initContainer(){var element=this.element,options=this.options,container=this.container,cropper=this.cropper;addClass(cropper,CLASS_HIDDEN);removeClass(element,CLASS_HIDDEN);var containerData={width:Math.max(container.offsetWidth,Number(options.minContainerWidth)||200),height:Math.max(container.offsetHeight,Number(options.minContainerHeight)||100)};this.containerData=containerData;setStyle(cropper,{width:containerData.width,height:containerData.height});addClass(element,CLASS_HIDDEN);removeClass(cropper,CLASS_HIDDEN)},initCanvas:function initCanvas(){var containerData=this.containerData,imageData=this.imageData;var viewMode=this.options.viewMode;var rotated=Math.abs(imageData.rotate)%180===90;var naturalWidth=rotated?imageData.naturalHeight:imageData.naturalWidth;var naturalHeight=rotated?imageData.naturalWidth:imageData.naturalHeight;var aspectRatio=naturalWidth/naturalHeight;var canvasWidth=containerData.width;var canvasHeight=containerData.height;if(containerData.height*aspectRatio>containerData.width){if(viewMode===3){canvasWidth=containerData.height*aspectRatio}else{canvasHeight=containerData.width/aspectRatio}}else if(viewMode===3){canvasHeight=containerData.width/aspectRatio}else{canvasWidth=containerData.height*aspectRatio}var canvasData={aspectRatio:aspectRatio,naturalWidth:naturalWidth,naturalHeight:naturalHeight,width:canvasWidth,height:canvasHeight};canvasData.left=(containerData.width-canvasWidth)/2;canvasData.top=(containerData.height-canvasHeight)/2;canvasData.oldLeft=canvasData.left;canvasData.oldTop=canvasData.top;this.canvasData=canvasData;this.limited=viewMode===1||viewMode===2;this.limitCanvas(true,true);this.initialImageData=assign({},imageData);this.initialCanvasData=assign({},canvasData)},limitCanvas:function limitCanvas(sizeLimited,positionLimited){var options=this.options,containerData=this.containerData,canvasData=this.canvasData,cropBoxData=this.cropBoxData;var viewMode=options.viewMode;var aspectRatio=canvasData.aspectRatio;var cropped=this.cropped&&cropBoxData;if(sizeLimited){var minCanvasWidth=Number(options.minCanvasWidth)||0;var minCanvasHeight=Number(options.minCanvasHeight)||0;if(viewMode>1){minCanvasWidth=Math.max(minCanvasWidth,containerData.width);minCanvasHeight=Math.max(minCanvasHeight,containerData.height);if(viewMode===3){if(minCanvasHeight*aspectRatio>minCanvasWidth){minCanvasWidth=minCanvasHeight*aspectRatio}else{minCanvasHeight=minCanvasWidth/aspectRatio}}}else if(viewMode>0){if(minCanvasWidth){minCanvasWidth=Math.max(minCanvasWidth,cropped?cropBoxData.width:0)}else if(minCanvasHeight){minCanvasHeight=Math.max(minCanvasHeight,cropped?cropBoxData.height:0)}else if(cropped){minCanvasWidth=cropBoxData.width;minCanvasHeight=cropBoxData.height;if(minCanvasHeight*aspectRatio>minCanvasWidth){minCanvasWidth=minCanvasHeight*aspectRatio}else{minCanvasHeight=minCanvasWidth/aspectRatio}}}var _getAdjustedSizes=getAdjustedSizes({aspectRatio:aspectRatio,width:minCanvasWidth,height:minCanvasHeight});minCanvasWidth=_getAdjustedSizes.width;minCanvasHeight=_getAdjustedSizes.height;canvasData.minWidth=minCanvasWidth;canvasData.minHeight=minCanvasHeight;canvasData.maxWidth=Infinity;canvasData.maxHeight=Infinity}if(positionLimited){if(viewMode>(cropped?0:1)){var newCanvasLeft=containerData.width-canvasData.width;var newCanvasTop=containerData.height-canvasData.height;canvasData.minLeft=Math.min(0,newCanvasLeft);canvasData.minTop=Math.min(0,newCanvasTop);canvasData.maxLeft=Math.max(0,newCanvasLeft);canvasData.maxTop=Math.max(0,newCanvasTop);if(cropped&&this.limited){canvasData.minLeft=Math.min(cropBoxData.left,cropBoxData.left+(cropBoxData.width-canvasData.width));canvasData.minTop=Math.min(cropBoxData.top,cropBoxData.top+(cropBoxData.height-canvasData.height));canvasData.maxLeft=cropBoxData.left;canvasData.maxTop=cropBoxData.top;if(viewMode===2){if(canvasData.width>=containerData.width){canvasData.minLeft=Math.min(0,newCanvasLeft);canvasData.maxLeft=Math.max(0,newCanvasLeft)}if(canvasData.height>=containerData.height){canvasData.minTop=Math.min(0,newCanvasTop);canvasData.maxTop=Math.max(0,newCanvasTop)}}}}else{canvasData.minLeft=-canvasData.width;canvasData.minTop=-canvasData.height;canvasData.maxLeft=containerData.width;canvasData.maxTop=containerData.height}}},renderCanvas:function renderCanvas(changed,transformed){var canvasData=this.canvasData,imageData=this.imageData;if(transformed){var _getRotatedSizes=getRotatedSizes({width:imageData.naturalWidth*Math.abs(imageData.scaleX||1),height:imageData.naturalHeight*Math.abs(imageData.scaleY||1),degree:imageData.rotate||0}),naturalWidth=_getRotatedSizes.width,naturalHeight=_getRotatedSizes.height;var width=canvasData.width*(naturalWidth/canvasData.naturalWidth);var height=canvasData.height*(naturalHeight/canvasData.naturalHeight);canvasData.left-=(width-canvasData.width)/2;canvasData.top-=(height-canvasData.height)/2;canvasData.width=width;canvasData.height=height;canvasData.aspectRatio=naturalWidth/naturalHeight;canvasData.naturalWidth=naturalWidth;canvasData.naturalHeight=naturalHeight;this.limitCanvas(true,false)}if(canvasData.width>canvasData.maxWidth||canvasData.width<canvasData.minWidth){canvasData.left=canvasData.oldLeft}if(canvasData.height>canvasData.maxHeight||canvasData.height<canvasData.minHeight){canvasData.top=canvasData.oldTop}canvasData.width=Math.min(Math.max(canvasData.width,canvasData.minWidth),canvasData.maxWidth);canvasData.height=Math.min(Math.max(canvasData.height,canvasData.minHeight),canvasData.maxHeight);this.limitCanvas(false,true);canvasData.left=Math.min(Math.max(canvasData.left,canvasData.minLeft),canvasData.maxLeft);canvasData.top=Math.min(Math.max(canvasData.top,canvasData.minTop),canvasData.maxTop);canvasData.oldLeft=canvasData.left;canvasData.oldTop=canvasData.top;setStyle(this.canvas,assign({width:canvasData.width,height:canvasData.height},getTransforms({translateX:canvasData.left,translateY:canvasData.top})));this.renderImage(changed);if(this.cropped&&this.limited){this.limitCropBox(true,true)}},renderImage:function renderImage(changed){var canvasData=this.canvasData,imageData=this.imageData;var width=imageData.naturalWidth*(canvasData.width/canvasData.naturalWidth);var height=imageData.naturalHeight*(canvasData.height/canvasData.naturalHeight);assign(imageData,{width:width,height:height,left:(canvasData.width-width)/2,top:(canvasData.height-height)/2});setStyle(this.image,assign({width:imageData.width,height:imageData.height},getTransforms(assign({translateX:imageData.left,translateY:imageData.top},imageData))));if(changed){this.output()}},initCropBox:function initCropBox(){var options=this.options,canvasData=this.canvasData;var aspectRatio=options.aspectRatio||options.initialAspectRatio;var autoCropArea=Number(options.autoCropArea)||.8;var cropBoxData={width:canvasData.width,height:canvasData.height};if(aspectRatio){if(canvasData.height*aspectRatio>canvasData.width){cropBoxData.height=cropBoxData.width/aspectRatio}else{cropBoxData.width=cropBoxData.height*aspectRatio}}this.cropBoxData=cropBoxData;this.limitCropBox(true,true);cropBoxData.width=Math.min(Math.max(cropBoxData.width,cropBoxData.minWidth),cropBoxData.maxWidth);cropBoxData.height=Math.min(Math.max(cropBoxData.height,cropBoxData.minHeight),cropBoxData.maxHeight);cropBoxData.width=Math.max(cropBoxData.minWidth,cropBoxData.width*autoCropArea);cropBoxData.height=Math.max(cropBoxData.minHeight,cropBoxData.height*autoCropArea);cropBoxData.left=canvasData.left+(canvasData.width-cropBoxData.width)/2;cropBoxData.top=canvasData.top+(canvasData.height-cropBoxData.height)/2;cropBoxData.oldLeft=cropBoxData.left;cropBoxData.oldTop=cropBoxData.top;this.initialCropBoxData=assign({},cropBoxData)},limitCropBox:function limitCropBox(sizeLimited,positionLimited){var options=this.options,containerData=this.containerData,canvasData=this.canvasData,cropBoxData=this.cropBoxData,limited=this.limited;var aspectRatio=options.aspectRatio;if(sizeLimited){var minCropBoxWidth=Number(options.minCropBoxWidth)||0;var minCropBoxHeight=Number(options.minCropBoxHeight)||0;var maxCropBoxWidth=limited?Math.min(containerData.width,canvasData.width,canvasData.width+canvasData.left,containerData.width-canvasData.left):containerData.width;var maxCropBoxHeight=limited?Math.min(containerData.height,canvasData.height,canvasData.height+canvasData.top,containerData.height-canvasData.top):containerData.height;minCropBoxWidth=Math.min(minCropBoxWidth,containerData.width);minCropBoxHeight=Math.min(minCropBoxHeight,containerData.height);if(aspectRatio){if(minCropBoxWidth&&minCropBoxHeight){if(minCropBoxHeight*aspectRatio>minCropBoxWidth){minCropBoxHeight=minCropBoxWidth/aspectRatio}else{minCropBoxWidth=minCropBoxHeight*aspectRatio}}else if(minCropBoxWidth){minCropBoxHeight=minCropBoxWidth/aspectRatio}else if(minCropBoxHeight){minCropBoxWidth=minCropBoxHeight*aspectRatio}if(maxCropBoxHeight*aspectRatio>maxCropBoxWidth){maxCropBoxHeight=maxCropBoxWidth/aspectRatio}else{maxCropBoxWidth=maxCropBoxHeight*aspectRatio}}cropBoxData.minWidth=Math.min(minCropBoxWidth,maxCropBoxWidth);cropBoxData.minHeight=Math.min(minCropBoxHeight,maxCropBoxHeight);cropBoxData.maxWidth=maxCropBoxWidth;cropBoxData.maxHeight=maxCropBoxHeight}if(positionLimited){if(limited){cropBoxData.minLeft=Math.max(0,canvasData.left);cropBoxData.minTop=Math.max(0,canvasData.top);cropBoxData.maxLeft=Math.min(containerData.width,canvasData.left+canvasData.width)-cropBoxData.width;cropBoxData.maxTop=Math.min(containerData.height,canvasData.top+canvasData.height)-cropBoxData.height}else{cropBoxData.minLeft=0;cropBoxData.minTop=0;cropBoxData.maxLeft=containerData.width-cropBoxData.width;cropBoxData.maxTop=containerData.height-cropBoxData.height}}},renderCropBox:function renderCropBox(){var options=this.options,containerData=this.containerData,cropBoxData=this.cropBoxData;if(cropBoxData.width>cropBoxData.maxWidth||cropBoxData.width<cropBoxData.minWidth){cropBoxData.left=cropBoxData.oldLeft}if(cropBoxData.height>cropBoxData.maxHeight||cropBoxData.height<cropBoxData.minHeight){cropBoxData.top=cropBoxData.oldTop}cropBoxData.width=Math.min(Math.max(cropBoxData.width,cropBoxData.minWidth),cropBoxData.maxWidth);cropBoxData.height=Math.min(Math.max(cropBoxData.height,cropBoxData.minHeight),cropBoxData.maxHeight);this.limitCropBox(false,true);cropBoxData.left=Math.min(Math.max(cropBoxData.left,cropBoxData.minLeft),cropBoxData.maxLeft);cropBoxData.top=Math.min(Math.max(cropBoxData.top,cropBoxData.minTop),cropBoxData.maxTop);cropBoxData.oldLeft=cropBoxData.left;cropBoxData.oldTop=cropBoxData.top;if(options.movable&&options.cropBoxMovable){setData(this.face,DATA_ACTION,cropBoxData.width>=containerData.width&&cropBoxData.height>=containerData.height?ACTION_MOVE:ACTION_ALL)}setStyle(this.cropBox,assign({width:cropBoxData.width,height:cropBoxData.height},getTransforms({translateX:cropBoxData.left,translateY:cropBoxData.top})));if(this.cropped&&this.limited){this.limitCanvas(true,true)}if(!this.disabled){this.output()}},output:function output(){this.preview();dispatchEvent(this.element,EVENT_CROP,this.getData())}};var preview={initPreview:function initPreview(){var element=this.element,crossOrigin=this.crossOrigin;var preview=this.options.preview;var url=crossOrigin?this.crossOriginUrl:this.url;var alt=element.alt||\"The image to preview\";var image=document.createElement(\"img\");if(crossOrigin){image.crossOrigin=crossOrigin}image.src=url;image.alt=alt;this.viewBox.appendChild(image);this.viewBoxImage=image;if(!preview){return}var previews=preview;if(typeof preview===\"string\"){previews=element.ownerDocument.querySelectorAll(preview)}else if(preview.querySelector){previews=[preview]}this.previews=previews;forEach(previews,function(el){var img=document.createElement(\"img\");setData(el,DATA_PREVIEW,{width:el.offsetWidth,height:el.offsetHeight,html:el.innerHTML});if(crossOrigin){img.crossOrigin=crossOrigin}img.src=url;img.alt=alt;img.style.cssText=\"display:block;\"+\"width:100%;\"+\"height:auto;\"+\"min-width:0!important;\"+\"min-height:0!important;\"+\"max-width:none!important;\"+\"max-height:none!important;\"+'image-orientation:0deg!important;\"';el.innerHTML=\"\";el.appendChild(img)})},resetPreview:function resetPreview(){forEach(this.previews,function(element){var data=getData(element,DATA_PREVIEW);setStyle(element,{width:data.width,height:data.height});element.innerHTML=data.html;removeData(element,DATA_PREVIEW)})},preview:function preview(){var imageData=this.imageData,canvasData=this.canvasData,cropBoxData=this.cropBoxData;var cropBoxWidth=cropBoxData.width,cropBoxHeight=cropBoxData.height;var width=imageData.width,height=imageData.height;var left=cropBoxData.left-canvasData.left-imageData.left;var top=cropBoxData.top-canvasData.top-imageData.top;if(!this.cropped||this.disabled){return}setStyle(this.viewBoxImage,assign({width:width,height:height},getTransforms(assign({translateX:-left,translateY:-top},imageData))));forEach(this.previews,function(element){var data=getData(element,DATA_PREVIEW);var originalWidth=data.width;var originalHeight=data.height;var newWidth=originalWidth;var newHeight=originalHeight;var ratio=1;if(cropBoxWidth){ratio=originalWidth/cropBoxWidth;newHeight=cropBoxHeight*ratio}if(cropBoxHeight&&newHeight>originalHeight){ratio=originalHeight/cropBoxHeight;newWidth=cropBoxWidth*ratio;newHeight=originalHeight}setStyle(element,{width:newWidth,height:newHeight});setStyle(element.getElementsByTagName(\"img\")[0],assign({width:width*ratio,height:height*ratio},getTransforms(assign({translateX:-left*ratio,translateY:-top*ratio},imageData))))})}};var events={bind:function bind(){var element=this.element,options=this.options,cropper=this.cropper;if(isFunction(options.cropstart)){addListener(element,EVENT_CROP_START,options.cropstart)}if(isFunction(options.cropmove)){addListener(element,EVENT_CROP_MOVE,options.cropmove)}if(isFunction(options.cropend)){addListener(element,EVENT_CROP_END,options.cropend)}if(isFunction(options.crop)){addListener(element,EVENT_CROP,options.crop)}if(isFunction(options.zoom)){addListener(element,EVENT_ZOOM,options.zoom)}addListener(cropper,EVENT_POINTER_DOWN,this.onCropStart=this.cropStart.bind(this));if(options.zoomable&&options.zoomOnWheel){addListener(cropper,EVENT_WHEEL,this.onWheel=this.wheel.bind(this),{passive:false,capture:true})}if(options.toggleDragModeOnDblclick){addListener(cropper,EVENT_DBLCLICK,this.onDblclick=this.dblclick.bind(this))}addListener(element.ownerDocument,EVENT_POINTER_MOVE,this.onCropMove=this.cropMove.bind(this));addListener(element.ownerDocument,EVENT_POINTER_UP,this.onCropEnd=this.cropEnd.bind(this));if(options.responsive){addListener(window,EVENT_RESIZE,this.onResize=this.resize.bind(this))}},unbind:function unbind(){var element=this.element,options=this.options,cropper=this.cropper;if(isFunction(options.cropstart)){removeListener(element,EVENT_CROP_START,options.cropstart)}if(isFunction(options.cropmove)){removeListener(element,EVENT_CROP_MOVE,options.cropmove)}if(isFunction(options.cropend)){removeListener(element,EVENT_CROP_END,options.cropend)}if(isFunction(options.crop)){removeListener(element,EVENT_CROP,options.crop)}if(isFunction(options.zoom)){removeListener(element,EVENT_ZOOM,options.zoom)}removeListener(cropper,EVENT_POINTER_DOWN,this.onCropStart);if(options.zoomable&&options.zoomOnWheel){removeListener(cropper,EVENT_WHEEL,this.onWheel,{passive:false,capture:true})}if(options.toggleDragModeOnDblclick){removeListener(cropper,EVENT_DBLCLICK,this.onDblclick)}removeListener(element.ownerDocument,EVENT_POINTER_MOVE,this.onCropMove);removeListener(element.ownerDocument,EVENT_POINTER_UP,this.onCropEnd);if(options.responsive){removeListener(window,EVENT_RESIZE,this.onResize)}}};var handlers={resize:function resize(){var options=this.options,container=this.container,containerData=this.containerData;var minContainerWidth=Number(options.minContainerWidth)||MIN_CONTAINER_WIDTH;var minContainerHeight=Number(options.minContainerHeight)||MIN_CONTAINER_HEIGHT;if(this.disabled||containerData.width<=minContainerWidth||containerData.height<=minContainerHeight){return}var ratio=container.offsetWidth/containerData.width;if(ratio!==1||container.offsetHeight!==containerData.height){var canvasData;var cropBoxData;if(options.restore){canvasData=this.getCanvasData();cropBoxData=this.getCropBoxData()}this.render();if(options.restore){this.setCanvasData(forEach(canvasData,function(n,i){canvasData[i]=n*ratio}));this.setCropBoxData(forEach(cropBoxData,function(n,i){cropBoxData[i]=n*ratio}))}}},dblclick:function dblclick(){if(this.disabled||this.options.dragMode===DRAG_MODE_NONE){return}this.setDragMode(hasClass(this.dragBox,CLASS_CROP)?DRAG_MODE_MOVE:DRAG_MODE_CROP)},wheel:function wheel(event){var _this=this;var ratio=Number(this.options.wheelZoomRatio)||.1;var delta=1;if(this.disabled){return}event.preventDefault();if(this.wheeling){return}this.wheeling=true;setTimeout(function(){_this.wheeling=false},50);if(event.deltaY){delta=event.deltaY>0?1:-1}else if(event.wheelDelta){delta=-event.wheelDelta/120}else if(event.detail){delta=event.detail>0?1:-1}this.zoom(-delta*ratio,event)},cropStart:function cropStart(event){var buttons=event.buttons,button=event.button;if(this.disabled||(event.type===\"mousedown\"||event.type===\"pointerdown\"&&event.pointerType===\"mouse\")&&(isNumber(buttons)&&buttons!==1||isNumber(button)&&button!==0||event.ctrlKey)){return}var options=this.options,pointers=this.pointers;var action;if(event.changedTouches){forEach(event.changedTouches,function(touch){pointers[touch.identifier]=getPointer(touch)})}else{pointers[event.pointerId||0]=getPointer(event)}if(Object.keys(pointers).length>1&&options.zoomable&&options.zoomOnTouch){action=ACTION_ZOOM}else{action=getData(event.target,DATA_ACTION)}if(!REGEXP_ACTIONS.test(action)){return}if(dispatchEvent(this.element,EVENT_CROP_START,{originalEvent:event,action:action})===false){return}event.preventDefault();this.action=action;this.cropping=false;if(action===ACTION_CROP){this.cropping=true;addClass(this.dragBox,CLASS_MODAL)}},cropMove:function cropMove(event){var action=this.action;if(this.disabled||!action){return}var pointers=this.pointers;event.preventDefault();if(dispatchEvent(this.element,EVENT_CROP_MOVE,{originalEvent:event,action:action})===false){return}if(event.changedTouches){forEach(event.changedTouches,function(touch){assign(pointers[touch.identifier]||{},getPointer(touch,true))})}else{assign(pointers[event.pointerId||0]||{},getPointer(event,true))}this.change(event)},cropEnd:function cropEnd(event){if(this.disabled){return}var action=this.action,pointers=this.pointers;if(event.changedTouches){forEach(event.changedTouches,function(touch){delete pointers[touch.identifier]})}else{delete pointers[event.pointerId||0]}if(!action){return}event.preventDefault();if(!Object.keys(pointers).length){this.action=\"\"}if(this.cropping){this.cropping=false;toggleClass(this.dragBox,CLASS_MODAL,this.cropped&&this.options.modal)}dispatchEvent(this.element,EVENT_CROP_END,{originalEvent:event,action:action})}};var change={change:function change(event){var options=this.options,canvasData=this.canvasData,containerData=this.containerData,cropBoxData=this.cropBoxData,pointers=this.pointers;var action=this.action;var aspectRatio=options.aspectRatio;var left=cropBoxData.left,top=cropBoxData.top,width=cropBoxData.width,height=cropBoxData.height;var right=left+width;var bottom=top+height;var minLeft=0;var minTop=0;var maxWidth=containerData.width;var maxHeight=containerData.height;var renderable=true;var offset;if(!aspectRatio&&event.shiftKey){aspectRatio=width&&height?width/height:1}if(this.limited){minLeft=cropBoxData.minLeft;minTop=cropBoxData.minTop;maxWidth=minLeft+Math.min(containerData.width,canvasData.width,canvasData.left+canvasData.width);maxHeight=minTop+Math.min(containerData.height,canvasData.height,canvasData.top+canvasData.height)}var pointer=pointers[Object.keys(pointers)[0]];var range={x:pointer.endX-pointer.startX,y:pointer.endY-pointer.startY};var check=function check(side){switch(side){case ACTION_EAST:if(right+range.x>maxWidth){range.x=maxWidth-right}break;case ACTION_WEST:if(left+range.x<minLeft){range.x=minLeft-left}break;case ACTION_NORTH:if(top+range.y<minTop){range.y=minTop-top}break;case ACTION_SOUTH:if(bottom+range.y>maxHeight){range.y=maxHeight-bottom}break;default:}};switch(action){case ACTION_ALL:left+=range.x;top+=range.y;break;case ACTION_EAST:if(range.x>=0&&(right>=maxWidth||aspectRatio&&(top<=minTop||bottom>=maxHeight))){renderable=false;break}check(ACTION_EAST);width+=range.x;if(width<0){action=ACTION_WEST;width=-width;left-=width}if(aspectRatio){height=width/aspectRatio;top+=(cropBoxData.height-height)/2}break;case ACTION_NORTH:if(range.y<=0&&(top<=minTop||aspectRatio&&(left<=minLeft||right>=maxWidth))){renderable=false;break}check(ACTION_NORTH);height-=range.y;top+=range.y;if(height<0){action=ACTION_SOUTH;height=-height;top-=height}if(aspectRatio){width=height*aspectRatio;left+=(cropBoxData.width-width)/2}break;case ACTION_WEST:if(range.x<=0&&(left<=minLeft||aspectRatio&&(top<=minTop||bottom>=maxHeight))){renderable=false;break}check(ACTION_WEST);width-=range.x;left+=range.x;if(width<0){action=ACTION_EAST;width=-width;left-=width}if(aspectRatio){height=width/aspectRatio;top+=(cropBoxData.height-height)/2}break;case ACTION_SOUTH:if(range.y>=0&&(bottom>=maxHeight||aspectRatio&&(left<=minLeft||right>=maxWidth))){renderable=false;break}check(ACTION_SOUTH);height+=range.y;if(height<0){action=ACTION_NORTH;height=-height;top-=height}if(aspectRatio){width=height*aspectRatio;left+=(cropBoxData.width-width)/2}break;case ACTION_NORTH_EAST:if(aspectRatio){if(range.y<=0&&(top<=minTop||right>=maxWidth)){renderable=false;break}check(ACTION_NORTH);height-=range.y;top+=range.y;width=height*aspectRatio}else{check(ACTION_NORTH);check(ACTION_EAST);if(range.x>=0){if(right<maxWidth){width+=range.x}else if(range.y<=0&&top<=minTop){renderable=false}}else{width+=range.x}if(range.y<=0){if(top>minTop){height-=range.y;top+=range.y}}else{height-=range.y;top+=range.y}}if(width<0&&height<0){action=ACTION_SOUTH_WEST;height=-height;width=-width;top-=height;left-=width}else if(width<0){action=ACTION_NORTH_WEST;width=-width;left-=width}else if(height<0){action=ACTION_SOUTH_EAST;height=-height;top-=height}break;case ACTION_NORTH_WEST:if(aspectRatio){if(range.y<=0&&(top<=minTop||left<=minLeft)){renderable=false;break}check(ACTION_NORTH);height-=range.y;top+=range.y;width=height*aspectRatio;left+=cropBoxData.width-width}else{check(ACTION_NORTH);check(ACTION_WEST);if(range.x<=0){if(left>minLeft){width-=range.x;left+=range.x}else if(range.y<=0&&top<=minTop){renderable=false}}else{width-=range.x;left+=range.x}if(range.y<=0){if(top>minTop){height-=range.y;top+=range.y}}else{height-=range.y;top+=range.y}}if(width<0&&height<0){action=ACTION_SOUTH_EAST;height=-height;width=-width;top-=height;left-=width}else if(width<0){action=ACTION_NORTH_EAST;width=-width;left-=width}else if(height<0){action=ACTION_SOUTH_WEST;height=-height;top-=height}break;case ACTION_SOUTH_WEST:if(aspectRatio){if(range.x<=0&&(left<=minLeft||bottom>=maxHeight)){renderable=false;break}check(ACTION_WEST);width-=range.x;left+=range.x;height=width/aspectRatio}else{check(ACTION_SOUTH);check(ACTION_WEST);if(range.x<=0){if(left>minLeft){width-=range.x;left+=range.x}else if(range.y>=0&&bottom>=maxHeight){renderable=false}}else{width-=range.x;left+=range.x}if(range.y>=0){if(bottom<maxHeight){height+=range.y}}else{height+=range.y}}if(width<0&&height<0){action=ACTION_NORTH_EAST;height=-height;width=-width;top-=height;left-=width}else if(width<0){action=ACTION_SOUTH_EAST;width=-width;left-=width}else if(height<0){action=ACTION_NORTH_WEST;height=-height;top-=height}break;case ACTION_SOUTH_EAST:if(aspectRatio){if(range.x>=0&&(right>=maxWidth||bottom>=maxHeight)){renderable=false;break}check(ACTION_EAST);width+=range.x;height=width/aspectRatio}else{check(ACTION_SOUTH);check(ACTION_EAST);if(range.x>=0){if(right<maxWidth){width+=range.x}else if(range.y>=0&&bottom>=maxHeight){renderable=false}}else{width+=range.x}if(range.y>=0){if(bottom<maxHeight){height+=range.y}}else{height+=range.y}}if(width<0&&height<0){action=ACTION_NORTH_WEST;height=-height;width=-width;top-=height;left-=width}else if(width<0){action=ACTION_SOUTH_WEST;width=-width;left-=width}else if(height<0){action=ACTION_NORTH_EAST;height=-height;top-=height}break;case ACTION_MOVE:this.move(range.x,range.y);renderable=false;break;case ACTION_ZOOM:this.zoom(getMaxZoomRatio(pointers),event);renderable=false;break;case ACTION_CROP:if(!range.x||!range.y){renderable=false;break}offset=getOffset(this.cropper);left=pointer.startX-offset.left;top=pointer.startY-offset.top;width=cropBoxData.minWidth;height=cropBoxData.minHeight;if(range.x>0){action=range.y>0?ACTION_SOUTH_EAST:ACTION_NORTH_EAST}else if(range.x<0){left-=width;action=range.y>0?ACTION_SOUTH_WEST:ACTION_NORTH_WEST}if(range.y<0){top-=height}if(!this.cropped){removeClass(this.cropBox,CLASS_HIDDEN);this.cropped=true;if(this.limited){this.limitCropBox(true,true)}}break;default:}if(renderable){cropBoxData.width=width;cropBoxData.height=height;cropBoxData.left=left;cropBoxData.top=top;this.action=action;this.renderCropBox()}forEach(pointers,function(p){p.startX=p.endX;p.startY=p.endY})}};var methods={crop:function crop(){if(this.ready&&!this.cropped&&!this.disabled){this.cropped=true;this.limitCropBox(true,true);if(this.options.modal){addClass(this.dragBox,CLASS_MODAL)}removeClass(this.cropBox,CLASS_HIDDEN);this.setCropBoxData(this.initialCropBoxData)}return this},reset:function reset(){if(this.ready&&!this.disabled){this.imageData=assign({},this.initialImageData);this.canvasData=assign({},this.initialCanvasData);this.cropBoxData=assign({},this.initialCropBoxData);this.renderCanvas();if(this.cropped){this.renderCropBox()}}return this},clear:function clear(){if(this.cropped&&!this.disabled){assign(this.cropBoxData,{left:0,top:0,width:0,height:0});this.cropped=false;this.renderCropBox();this.limitCanvas(true,true);this.renderCanvas();removeClass(this.dragBox,CLASS_MODAL);addClass(this.cropBox,CLASS_HIDDEN)}return this},replace:function replace(url){var hasSameSize=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!this.disabled&&url){if(this.isImg){this.element.src=url}if(hasSameSize){this.url=url;this.image.src=url;if(this.ready){this.viewBoxImage.src=url;forEach(this.previews,function(element){element.getElementsByTagName(\"img\")[0].src=url})}}else{if(this.isImg){this.replaced=true}this.options.data=null;this.uncreate();this.load(url)}}return this},enable:function enable(){if(this.ready&&this.disabled){this.disabled=false;removeClass(this.cropper,CLASS_DISABLED)}return this},disable:function disable(){if(this.ready&&!this.disabled){this.disabled=true;addClass(this.cropper,CLASS_DISABLED)}return this},destroy:function destroy(){var element=this.element;if(!element[NAMESPACE]){return this}element[NAMESPACE]=undefined;if(this.isImg&&this.replaced){element.src=this.originalUrl}this.uncreate();return this},move:function move(offsetX){var offsetY=arguments.length>1&&arguments[1]!==undefined?arguments[1]:offsetX;var _this$canvasData=this.canvasData,left=_this$canvasData.left,top=_this$canvasData.top;return this.moveTo(isUndefined(offsetX)?offsetX:left+Number(offsetX),isUndefined(offsetY)?offsetY:top+Number(offsetY))},moveTo:function moveTo(x){var y=arguments.length>1&&arguments[1]!==undefined?arguments[1]:x;var canvasData=this.canvasData;var changed=false;x=Number(x);y=Number(y);if(this.ready&&!this.disabled&&this.options.movable){if(isNumber(x)){canvasData.left=x;changed=true}if(isNumber(y)){canvasData.top=y;changed=true}if(changed){this.renderCanvas(true)}}return this},zoom:function zoom(ratio,_originalEvent){var canvasData=this.canvasData;ratio=Number(ratio);if(ratio<0){ratio=1/(1-ratio)}else{ratio=1+ratio}return this.zoomTo(canvasData.width*ratio/canvasData.naturalWidth,null,_originalEvent)},zoomTo:function zoomTo(ratio,pivot,_originalEvent){var options=this.options,canvasData=this.canvasData;var width=canvasData.width,height=canvasData.height,naturalWidth=canvasData.naturalWidth,naturalHeight=canvasData.naturalHeight;ratio=Number(ratio);if(ratio>=0&&this.ready&&!this.disabled&&options.zoomable){var newWidth=naturalWidth*ratio;var newHeight=naturalHeight*ratio;if(dispatchEvent(this.element,EVENT_ZOOM,{ratio:ratio,oldRatio:width/naturalWidth,originalEvent:_originalEvent})===false){return this}if(_originalEvent){var pointers=this.pointers;var offset=getOffset(this.cropper);var center=pointers&&Object.keys(pointers).length?getPointersCenter(pointers):{pageX:_originalEvent.pageX,pageY:_originalEvent.pageY};canvasData.left-=(newWidth-width)*((center.pageX-offset.left-canvasData.left)/width);canvasData.top-=(newHeight-height)*((center.pageY-offset.top-canvasData.top)/height)}else if(isPlainObject(pivot)&&isNumber(pivot.x)&&isNumber(pivot.y)){canvasData.left-=(newWidth-width)*((pivot.x-canvasData.left)/width);canvasData.top-=(newHeight-height)*((pivot.y-canvasData.top)/height)}else{canvasData.left-=(newWidth-width)/2;canvasData.top-=(newHeight-height)/2}canvasData.width=newWidth;canvasData.height=newHeight;this.renderCanvas(true)}return this},rotate:function rotate(degree){return this.rotateTo((this.imageData.rotate||0)+Number(degree))},rotateTo:function rotateTo(degree){degree=Number(degree);if(isNumber(degree)&&this.ready&&!this.disabled&&this.options.rotatable){this.imageData.rotate=degree%360;this.renderCanvas(true,true)}return this},scaleX:function scaleX(_scaleX){var scaleY=this.imageData.scaleY;return this.scale(_scaleX,isNumber(scaleY)?scaleY:1)},scaleY:function scaleY(_scaleY){var scaleX=this.imageData.scaleX;return this.scale(isNumber(scaleX)?scaleX:1,_scaleY)},scale:function scale(scaleX){var scaleY=arguments.length>1&&arguments[1]!==undefined?arguments[1]:scaleX;var imageData=this.imageData;var transformed=false;scaleX=Number(scaleX);scaleY=Number(scaleY);if(this.ready&&!this.disabled&&this.options.scalable){if(isNumber(scaleX)){imageData.scaleX=scaleX;transformed=true}if(isNumber(scaleY)){imageData.scaleY=scaleY;transformed=true}if(transformed){this.renderCanvas(true,true)}}return this},getData:function getData(){var rounded=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var options=this.options,imageData=this.imageData,canvasData=this.canvasData,cropBoxData=this.cropBoxData;var data;if(this.ready&&this.cropped){data={x:cropBoxData.left-canvasData.left,y:cropBoxData.top-canvasData.top,width:cropBoxData.width,height:cropBoxData.height};var ratio=imageData.width/imageData.naturalWidth;forEach(data,function(n,i){data[i]=n/ratio});if(rounded){var bottom=Math.round(data.y+data.height);var right=Math.round(data.x+data.width);data.x=Math.round(data.x);data.y=Math.round(data.y);data.width=right-data.x;data.height=bottom-data.y}}else{data={x:0,y:0,width:0,height:0}}if(options.rotatable){data.rotate=imageData.rotate||0}if(options.scalable){data.scaleX=imageData.scaleX||1;data.scaleY=imageData.scaleY||1}return data},setData:function setData(data){var options=this.options,imageData=this.imageData,canvasData=this.canvasData;var cropBoxData={};if(this.ready&&!this.disabled&&isPlainObject(data)){var transformed=false;if(options.rotatable){if(isNumber(data.rotate)&&data.rotate!==imageData.rotate){imageData.rotate=data.rotate;transformed=true}}if(options.scalable){if(isNumber(data.scaleX)&&data.scaleX!==imageData.scaleX){imageData.scaleX=data.scaleX;transformed=true}if(isNumber(data.scaleY)&&data.scaleY!==imageData.scaleY){imageData.scaleY=data.scaleY;transformed=true}}if(transformed){this.renderCanvas(true,true)}var ratio=imageData.width/imageData.naturalWidth;if(isNumber(data.x)){cropBoxData.left=data.x*ratio+canvasData.left}if(isNumber(data.y)){cropBoxData.top=data.y*ratio+canvasData.top}if(isNumber(data.width)){cropBoxData.width=data.width*ratio}if(isNumber(data.height)){cropBoxData.height=data.height*ratio}this.setCropBoxData(cropBoxData)}return this},getContainerData:function getContainerData(){return this.ready?assign({},this.containerData):{}},getImageData:function getImageData(){return this.sized?assign({},this.imageData):{}},getCanvasData:function getCanvasData(){var canvasData=this.canvasData;var data={};if(this.ready){forEach([\"left\",\"top\",\"width\",\"height\",\"naturalWidth\",\"naturalHeight\"],function(n){data[n]=canvasData[n]})}return data},setCanvasData:function setCanvasData(data){var canvasData=this.canvasData;var aspectRatio=canvasData.aspectRatio;if(this.ready&&!this.disabled&&isPlainObject(data)){if(isNumber(data.left)){canvasData.left=data.left}if(isNumber(data.top)){canvasData.top=data.top}if(isNumber(data.width)){canvasData.width=data.width;canvasData.height=data.width/aspectRatio}else if(isNumber(data.height)){canvasData.height=data.height;canvasData.width=data.height*aspectRatio}this.renderCanvas(true)}return this},getCropBoxData:function getCropBoxData(){var cropBoxData=this.cropBoxData;var data;if(this.ready&&this.cropped){data={left:cropBoxData.left,top:cropBoxData.top,width:cropBoxData.width,height:cropBoxData.height}}return data||{}},setCropBoxData:function setCropBoxData(data){var cropBoxData=this.cropBoxData;var aspectRatio=this.options.aspectRatio;var widthChanged;var heightChanged;if(this.ready&&this.cropped&&!this.disabled&&isPlainObject(data)){if(isNumber(data.left)){cropBoxData.left=data.left}if(isNumber(data.top)){cropBoxData.top=data.top}if(isNumber(data.width)&&data.width!==cropBoxData.width){widthChanged=true;cropBoxData.width=data.width}if(isNumber(data.height)&&data.height!==cropBoxData.height){heightChanged=true;cropBoxData.height=data.height}if(aspectRatio){if(widthChanged){cropBoxData.height=cropBoxData.width/aspectRatio}else if(heightChanged){cropBoxData.width=cropBoxData.height*aspectRatio}}this.renderCropBox()}return this},getCroppedCanvas:function getCroppedCanvas(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement){return null}var canvasData=this.canvasData;var source=getSourceCanvas(this.image,this.imageData,canvasData,options);if(!this.cropped){return source}var _this$getData=this.getData(),initialX=_this$getData.x,initialY=_this$getData.y,initialWidth=_this$getData.width,initialHeight=_this$getData.height;var ratio=source.width/Math.floor(canvasData.naturalWidth);if(ratio!==1){initialX*=ratio;initialY*=ratio;initialWidth*=ratio;initialHeight*=ratio}var aspectRatio=initialWidth/initialHeight;var maxSizes=getAdjustedSizes({aspectRatio:aspectRatio,width:options.maxWidth||Infinity,height:options.maxHeight||Infinity});var minSizes=getAdjustedSizes({aspectRatio:aspectRatio,width:options.minWidth||0,height:options.minHeight||0},\"cover\");var _getAdjustedSizes=getAdjustedSizes({aspectRatio:aspectRatio,width:options.width||(ratio!==1?source.width:initialWidth),height:options.height||(ratio!==1?source.height:initialHeight)}),width=_getAdjustedSizes.width,height=_getAdjustedSizes.height;width=Math.min(maxSizes.width,Math.max(minSizes.width,width));height=Math.min(maxSizes.height,Math.max(minSizes.height,height));var canvas=document.createElement(\"canvas\");var context=canvas.getContext(\"2d\");canvas.width=normalizeDecimalNumber(width);canvas.height=normalizeDecimalNumber(height);context.fillStyle=options.fillColor||\"transparent\";context.fillRect(0,0,width,height);var _options$imageSmoothi=options.imageSmoothingEnabled,imageSmoothingEnabled=_options$imageSmoothi===void 0?true:_options$imageSmoothi,imageSmoothingQuality=options.imageSmoothingQuality;context.imageSmoothingEnabled=imageSmoothingEnabled;if(imageSmoothingQuality){context.imageSmoothingQuality=imageSmoothingQuality}var sourceWidth=source.width;var sourceHeight=source.height;var srcX=initialX;var srcY=initialY;var srcWidth;var srcHeight;var dstX;var dstY;var dstWidth;var dstHeight;if(srcX<=-initialWidth||srcX>sourceWidth){srcX=0;srcWidth=0;dstX=0;dstWidth=0}else if(srcX<=0){dstX=-srcX;srcX=0;srcWidth=Math.min(sourceWidth,initialWidth+srcX);dstWidth=srcWidth}else if(srcX<=sourceWidth){dstX=0;srcWidth=Math.min(initialWidth,sourceWidth-srcX);dstWidth=srcWidth}if(srcWidth<=0||srcY<=-initialHeight||srcY>sourceHeight){srcY=0;srcHeight=0;dstY=0;dstHeight=0}else if(srcY<=0){dstY=-srcY;srcY=0;srcHeight=Math.min(sourceHeight,initialHeight+srcY);dstHeight=srcHeight}else if(srcY<=sourceHeight){dstY=0;srcHeight=Math.min(initialHeight,sourceHeight-srcY);dstHeight=srcHeight}var params=[srcX,srcY,srcWidth,srcHeight];if(dstWidth>0&&dstHeight>0){var scale=width/initialWidth;params.push(dstX*scale,dstY*scale,dstWidth*scale,dstHeight*scale)}context.drawImage.apply(context,[source].concat(_toConsumableArray(params.map(function(param){return Math.floor(normalizeDecimalNumber(param))}))));return canvas},setAspectRatio:function setAspectRatio(aspectRatio){var options=this.options;if(!this.disabled&&!isUndefined(aspectRatio)){options.aspectRatio=Math.max(0,aspectRatio)||NaN;if(this.ready){this.initCropBox();if(this.cropped){this.renderCropBox()}}}return this},setDragMode:function setDragMode(mode){var options=this.options,dragBox=this.dragBox,face=this.face;if(this.ready&&!this.disabled){var croppable=mode===DRAG_MODE_CROP;var movable=options.movable&&mode===DRAG_MODE_MOVE;mode=croppable||movable?mode:DRAG_MODE_NONE;options.dragMode=mode;setData(dragBox,DATA_ACTION,mode);toggleClass(dragBox,CLASS_CROP,croppable);toggleClass(dragBox,CLASS_MOVE,movable);if(!options.cropBoxMovable){setData(face,DATA_ACTION,mode);toggleClass(face,CLASS_CROP,croppable);toggleClass(face,CLASS_MOVE,movable)}}return this}};var AnotherCropper=WINDOW.Cropper;var Cropper=function(){function Cropper(element){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Cropper);if(!element||!REGEXP_TAG_NAME.test(element.tagName)){throw new Error(\"The first argument is required and must be an <img> or <canvas> element.\")}this.element=element;this.options=assign({},DEFAULTS,isPlainObject(options)&&options);this.cropped=false;this.disabled=false;this.pointers={};this.ready=false;this.reloading=false;this.replaced=false;this.sized=false;this.sizing=false;this.init()}_createClass(Cropper,[{key:\"init\",value:function init(){var element=this.element;var tagName=element.tagName.toLowerCase();var url;if(element[NAMESPACE]){return}element[NAMESPACE]=this;if(tagName===\"img\"){this.isImg=true;url=element.getAttribute(\"src\")||\"\";this.originalUrl=url;if(!url){return}url=element.src}else if(tagName===\"canvas\"&&window.HTMLCanvasElement){url=element.toDataURL()}this.load(url)}},{key:\"load\",value:function load(url){var _this=this;if(!url){return}this.url=url;this.imageData={};var element=this.element,options=this.options;if(!options.rotatable&&!options.scalable){options.checkOrientation=false}if(!options.checkOrientation||!window.ArrayBuffer){this.clone();return}if(REGEXP_DATA_URL.test(url)){if(REGEXP_DATA_URL_JPEG.test(url)){this.read(dataURLToArrayBuffer(url))}else{this.clone()}return}var xhr=new XMLHttpRequest;var clone=this.clone.bind(this);this.reloading=true;this.xhr=xhr;xhr.onabort=clone;xhr.onerror=clone;xhr.ontimeout=clone;xhr.onprogress=function(){if(xhr.getResponseHeader(\"content-type\")!==MIME_TYPE_JPEG){xhr.abort()}};xhr.onload=function(){_this.read(xhr.response)};xhr.onloadend=function(){_this.reloading=false;_this.xhr=null};if(options.checkCrossOrigin&&isCrossOriginURL(url)){url=addTimestamp(url)}xhr.open(\"GET\",url);xhr.responseType=\"arraybuffer\";xhr.withCredentials=element.crossOrigin===\"use-credentials\";xhr.send()}},{key:\"read\",value:function read(arrayBuffer){var options=this.options,imageData=this.imageData;var orientation=resetAndGetOrientation(arrayBuffer);var rotate=0;var scaleX=1;var scaleY=1;if(orientation>1){this.url=arrayBufferToDataURL(arrayBuffer,MIME_TYPE_JPEG);var _parseOrientation=parseOrientation(orientation);rotate=_parseOrientation.rotate;scaleX=_parseOrientation.scaleX;scaleY=_parseOrientation.scaleY}if(options.rotatable){imageData.rotate=rotate}if(options.scalable){imageData.scaleX=scaleX;imageData.scaleY=scaleY}this.clone()}},{key:\"clone\",value:function clone(){var element=this.element,url=this.url;var crossOrigin=element.crossOrigin;var crossOriginUrl=url;if(this.options.checkCrossOrigin&&isCrossOriginURL(url)){if(!crossOrigin){crossOrigin=\"anonymous\"}crossOriginUrl=addTimestamp(url)}this.crossOrigin=crossOrigin;this.crossOriginUrl=crossOriginUrl;var image=document.createElement(\"img\");if(crossOrigin){image.crossOrigin=crossOrigin}image.src=crossOriginUrl||url;image.alt=element.alt||\"The image to crop\";this.image=image;image.onload=this.start.bind(this);image.onerror=this.stop.bind(this);addClass(image,CLASS_HIDE);element.parentNode.insertBefore(image,element.nextSibling)}},{key:\"start\",value:function start(){var _this2=this;var image=this.image;image.onload=null;image.onerror=null;this.sizing=true;var isIOSWebKit=WINDOW.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent);var done=function done(naturalWidth,naturalHeight){assign(_this2.imageData,{naturalWidth:naturalWidth,naturalHeight:naturalHeight,aspectRatio:naturalWidth/naturalHeight});_this2.sizing=false;_this2.sized=true;_this2.build()};if(image.naturalWidth&&!isIOSWebKit){done(image.naturalWidth,image.naturalHeight);return}var sizingImage=document.createElement(\"img\");var body=document.body||document.documentElement;this.sizingImage=sizingImage;sizingImage.onload=function(){done(sizingImage.width,sizingImage.height);if(!isIOSWebKit){body.removeChild(sizingImage)}};sizingImage.src=image.src;if(!isIOSWebKit){sizingImage.style.cssText=\"left:0;\"+\"max-height:none!important;\"+\"max-width:none!important;\"+\"min-height:0!important;\"+\"min-width:0!important;\"+\"opacity:0;\"+\"position:absolute;\"+\"top:0;\"+\"z-index:-1;\";body.appendChild(sizingImage)}}},{key:\"stop\",value:function stop(){var image=this.image;image.onload=null;image.onerror=null;image.parentNode.removeChild(image);this.image=null}},{key:\"build\",value:function build(){if(!this.sized||this.ready){return}var element=this.element,options=this.options,image=this.image;var container=element.parentNode;var template=document.createElement(\"div\");template.innerHTML=TEMPLATE;var cropper=template.querySelector(\".\".concat(NAMESPACE,\"-container\"));var canvas=cropper.querySelector(\".\".concat(NAMESPACE,\"-canvas\"));var dragBox=cropper.querySelector(\".\".concat(NAMESPACE,\"-drag-box\"));var cropBox=cropper.querySelector(\".\".concat(NAMESPACE,\"-crop-box\"));var face=cropBox.querySelector(\".\".concat(NAMESPACE,\"-face\"));this.container=container;this.cropper=cropper;this.canvas=canvas;this.dragBox=dragBox;this.cropBox=cropBox;this.viewBox=cropper.querySelector(\".\".concat(NAMESPACE,\"-view-box\"));this.face=face;canvas.appendChild(image);addClass(element,CLASS_HIDDEN);container.insertBefore(cropper,element.nextSibling);if(!this.isImg){removeClass(image,CLASS_HIDE)}this.initPreview();this.bind();options.initialAspectRatio=Math.max(0,options.initialAspectRatio)||NaN;options.aspectRatio=Math.max(0,options.aspectRatio)||NaN;options.viewMode=Math.max(0,Math.min(3,Math.round(options.viewMode)))||0;addClass(cropBox,CLASS_HIDDEN);if(!options.guides){addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE,\"-dashed\")),CLASS_HIDDEN)}if(!options.center){addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE,\"-center\")),CLASS_HIDDEN)}if(options.background){addClass(cropper,\"\".concat(NAMESPACE,\"-bg\"))}if(!options.highlight){addClass(face,CLASS_INVISIBLE)}if(options.cropBoxMovable){addClass(face,CLASS_MOVE);setData(face,DATA_ACTION,ACTION_ALL)}if(!options.cropBoxResizable){addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE,\"-line\")),CLASS_HIDDEN);addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE,\"-point\")),CLASS_HIDDEN)}this.render();this.ready=true;this.setDragMode(options.dragMode);if(options.autoCrop){this.crop()}this.setData(options.data);if(isFunction(options.ready)){addListener(element,EVENT_READY,options.ready,{once:true})}dispatchEvent(element,EVENT_READY)}},{key:\"unbuild\",value:function unbuild(){if(!this.ready){return}this.ready=false;this.unbind();this.resetPreview();this.cropper.parentNode.removeChild(this.cropper);removeClass(this.element,CLASS_HIDDEN)}},{key:\"uncreate\",value:function uncreate(){if(this.ready){this.unbuild();this.ready=false;this.cropped=false}else if(this.sizing){this.sizingImage.onload=null;this.sizing=false;this.sized=false}else if(this.reloading){this.xhr.onabort=null;this.xhr.abort()}else if(this.image){this.stop()}}}],[{key:\"noConflict\",value:function noConflict(){window.Cropper=AnotherCropper;return Cropper}},{key:\"setDefaults\",value:function setDefaults(options){assign(DEFAULTS,isPlainObject(options)&&options)}}]);return Cropper}();assign(Cropper.prototype,render,preview,events,handlers,change,methods);return Cropper});(function(global,factory){factory(global.jQuery,global.Cropper)})(window,function($,Cropper){\"use strict\";$=$&&$.hasOwnProperty(\"default\")?$[\"default\"]:$;Cropper=Cropper&&Cropper.hasOwnProperty(\"default\")?Cropper[\"default\"]:Cropper;if($&&$.fn&&Cropper){var AnotherCropper=$.fn.cropper;var NAMESPACE=\"cropper\";$.fn.cropper=function jQueryCropper(option){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key]}var result;this.each(function(i,element){var $element=$(element);var isDestroy=option===\"destroy\";var cropper=$element.data(NAMESPACE);if(!cropper){if(isDestroy){return}var options=$.extend({},$element.data(),$.isPlainObject(option)&&option);cropper=new Cropper(element,options);$element.data(NAMESPACE,cropper)}if(typeof option===\"string\"){var fn=cropper[option];if($.isFunction(fn)){result=fn.apply(cropper,args);if(result===cropper){result=undefined}if(isDestroy){$element.removeData(NAMESPACE)}}}});return result!==undefined?result:this};$.fn.cropper.Constructor=Cropper;$.fn.cropper.setDefaults=Cropper.setDefaults;$.fn.cropper.noConflict=function noConflict(){$.fn.cropper=AnotherCropper;return this}}});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdmVuZG9yL2Nyb3BwZXIvY3JvcHBlci12MS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1tuYW1lXS8uL3NyYy92ZW5kb3IvY3JvcHBlci9jcm9wcGVyLXYxLmpzPzY3YjgiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKGdsb2JhbCxmYWN0b3J5KXtnbG9iYWwuQ3JvcHBlcj1mYWN0b3J5KCl9KSh3aW5kb3csZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfdHlwZW9mKG9iail7aWYodHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmdHlwZW9mIFN5bWJvbC5pdGVyYXRvcj09PVwic3ltYm9sXCIpe190eXBlb2Y9ZnVuY3Rpb24ob2JqKXtyZXR1cm4gdHlwZW9mIG9ian19ZWxzZXtfdHlwZW9mPWZ1bmN0aW9uKG9iail7cmV0dXJuIG9iaiYmdHlwZW9mIFN5bWJvbD09PVwiZnVuY3Rpb25cIiYmb2JqLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZvYmohPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIG9ian19cmV0dXJuIF90eXBlb2Yob2JqKX1mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsQ29uc3RydWN0b3Ipe2lmKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3Rvcikpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9fWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCxwcm9wcyl7Zm9yKHZhciBpPTA7aTxwcm9wcy5sZW5ndGg7aSsrKXt2YXIgZGVzY3JpcHRvcj1wcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGU9ZGVzY3JpcHRvci5lbnVtZXJhYmxlfHxmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZT10cnVlO2lmKFwidmFsdWVcImluIGRlc2NyaXB0b3IpZGVzY3JpcHRvci53cml0YWJsZT10cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsZGVzY3JpcHRvci5rZXksZGVzY3JpcHRvcil9fWZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3Rvcixwcm90b1Byb3BzLHN0YXRpY1Byb3BzKXtpZihwcm90b1Byb3BzKV9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSxwcm90b1Byb3BzKTtpZihzdGF0aWNQcm9wcylfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3RvcixzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yfWZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosa2V5LHZhbHVlKXtpZihrZXkgaW4gb2JqKXtPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLGtleSx7dmFsdWU6dmFsdWUsZW51bWVyYWJsZTp0cnVlLGNvbmZpZ3VyYWJsZTp0cnVlLHdyaXRhYmxlOnRydWV9KX1lbHNle29ialtrZXldPXZhbHVlfXJldHVybiBvYmp9ZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsZW51bWVyYWJsZU9ubHkpe3ZhciBrZXlzPU9iamVjdC5rZXlzKG9iamVjdCk7aWYoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIHN5bWJvbHM9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpO2lmKGVudW1lcmFibGVPbmx5KXN5bWJvbHM9c3ltYm9scy5maWx0ZXIoZnVuY3Rpb24oc3ltKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3Qsc3ltKS5lbnVtZXJhYmxlfSk7a2V5cy5wdXNoLmFwcGx5KGtleXMsc3ltYm9scyl9cmV0dXJuIGtleXN9ZnVuY3Rpb24gX29iamVjdFNwcmVhZDIodGFyZ2V0KXtmb3IodmFyIGk9MTtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXt2YXIgc291cmNlPWFyZ3VtZW50c1tpXSE9bnVsbD9hcmd1bWVudHNbaV06e307aWYoaSUyKXtvd25LZXlzKHNvdXJjZSx0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSl7X2RlZmluZVByb3BlcnR5KHRhcmdldCxrZXksc291cmNlW2tleV0pfSl9ZWxzZSBpZihPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyl7T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpfWVsc2V7b3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24oa2V5KXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LGtleSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSxrZXkpKX0pfX1yZXR1cm4gdGFyZ2V0fWZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpe3JldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKXx8X2l0ZXJhYmxlVG9BcnJheShhcnIpfHxfbm9uSXRlcmFibGVTcHJlYWQoKX1mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKXtpZihBcnJheS5pc0FycmF5KGFycikpe2Zvcih2YXIgaT0wLGFycjI9bmV3IEFycmF5KGFyci5sZW5ndGgpO2k8YXJyLmxlbmd0aDtpKyspYXJyMltpXT1hcnJbaV07cmV0dXJuIGFycjJ9fWZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcil7aWYoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKXx8T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXIpPT09XCJbb2JqZWN0IEFyZ3VtZW50c11cIilyZXR1cm4gQXJyYXkuZnJvbShpdGVyKX1mdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2VcIil9dmFyIElTX0JST1dTRVI9dHlwZW9mIHdpbmRvdyE9PVwidW5kZWZpbmVkXCImJnR5cGVvZiB3aW5kb3cuZG9jdW1lbnQhPT1cInVuZGVmaW5lZFwiO3ZhciBXSU5ET1c9SVNfQlJPV1NFUj93aW5kb3c6e307dmFyIElTX1RPVUNIX0RFVklDRT1JU19CUk9XU0VSP1wib250b3VjaHN0YXJ0XCJpbiBXSU5ET1cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OmZhbHNlO3ZhciBIQVNfUE9JTlRFUl9FVkVOVD1JU19CUk9XU0VSP1wiUG9pbnRlckV2ZW50XCJpbiBXSU5ET1c6ZmFsc2U7dmFyIE5BTUVTUEFDRT1cImNyb3BwZXJcIjt2YXIgQUNUSU9OX0FMTD1cImFsbFwiO3ZhciBBQ1RJT05fQ1JPUD1cImNyb3BcIjt2YXIgQUNUSU9OX01PVkU9XCJtb3ZlXCI7dmFyIEFDVElPTl9aT09NPVwiem9vbVwiO3ZhciBBQ1RJT05fRUFTVD1cImVcIjt2YXIgQUNUSU9OX1dFU1Q9XCJ3XCI7dmFyIEFDVElPTl9TT1VUSD1cInNcIjt2YXIgQUNUSU9OX05PUlRIPVwiblwiO3ZhciBBQ1RJT05fTk9SVEhfRUFTVD1cIm5lXCI7dmFyIEFDVElPTl9OT1JUSF9XRVNUPVwibndcIjt2YXIgQUNUSU9OX1NPVVRIX0VBU1Q9XCJzZVwiO3ZhciBBQ1RJT05fU09VVEhfV0VTVD1cInN3XCI7dmFyIENMQVNTX0NST1A9XCJcIi5jb25jYXQoTkFNRVNQQUNFLFwiLWNyb3BcIik7dmFyIENMQVNTX0RJU0FCTEVEPVwiXCIuY29uY2F0KE5BTUVTUEFDRSxcIi1kaXNhYmxlZFwiKTt2YXIgQ0xBU1NfSElEREVOPVwiXCIuY29uY2F0KE5BTUVTUEFDRSxcIi1oaWRkZW5cIik7dmFyIENMQVNTX0hJREU9XCJcIi5jb25jYXQoTkFNRVNQQUNFLFwiLWhpZGVcIik7dmFyIENMQVNTX0lOVklTSUJMRT1cIlwiLmNvbmNhdChOQU1FU1BBQ0UsXCItaW52aXNpYmxlXCIpO3ZhciBDTEFTU19NT0RBTD1cIlwiLmNvbmNhdChOQU1FU1BBQ0UsXCItbW9kYWxcIik7dmFyIENMQVNTX01PVkU9XCJcIi5jb25jYXQoTkFNRVNQQUNFLFwiLW1vdmVcIik7dmFyIERBVEFfQUNUSU9OPVwiXCIuY29uY2F0KE5BTUVTUEFDRSxcIkFjdGlvblwiKTt2YXIgREFUQV9QUkVWSUVXPVwiXCIuY29uY2F0KE5BTUVTUEFDRSxcIlByZXZpZXdcIik7dmFyIERSQUdfTU9ERV9DUk9QPVwiY3JvcFwiO3ZhciBEUkFHX01PREVfTU9WRT1cIm1vdmVcIjt2YXIgRFJBR19NT0RFX05PTkU9XCJub25lXCI7dmFyIEVWRU5UX0NST1A9XCJjcm9wXCI7dmFyIEVWRU5UX0NST1BfRU5EPVwiY3JvcGVuZFwiO3ZhciBFVkVOVF9DUk9QX01PVkU9XCJjcm9wbW92ZVwiO3ZhciBFVkVOVF9DUk9QX1NUQVJUPVwiY3JvcHN0YXJ0XCI7dmFyIEVWRU5UX0RCTENMSUNLPVwiZGJsY2xpY2tcIjt2YXIgRVZFTlRfVE9VQ0hfU1RBUlQ9SVNfVE9VQ0hfREVWSUNFP1widG91Y2hzdGFydFwiOlwibW91c2Vkb3duXCI7dmFyIEVWRU5UX1RPVUNIX01PVkU9SVNfVE9VQ0hfREVWSUNFP1widG91Y2htb3ZlXCI6XCJtb3VzZW1vdmVcIjt2YXIgRVZFTlRfVE9VQ0hfRU5EPUlTX1RPVUNIX0RFVklDRT9cInRvdWNoZW5kIHRvdWNoY2FuY2VsXCI6XCJtb3VzZXVwXCI7dmFyIEVWRU5UX1BPSU5URVJfRE9XTj1IQVNfUE9JTlRFUl9FVkVOVD9cInBvaW50ZXJkb3duXCI6RVZFTlRfVE9VQ0hfU1RBUlQ7dmFyIEVWRU5UX1BPSU5URVJfTU9WRT1IQVNfUE9JTlRFUl9FVkVOVD9cInBvaW50ZXJtb3ZlXCI6RVZFTlRfVE9VQ0hfTU9WRTt2YXIgRVZFTlRfUE9JTlRFUl9VUD1IQVNfUE9JTlRFUl9FVkVOVD9cInBvaW50ZXJ1cCBwb2ludGVyY2FuY2VsXCI6RVZFTlRfVE9VQ0hfRU5EO3ZhciBFVkVOVF9SRUFEWT1cInJlYWR5XCI7dmFyIEVWRU5UX1JFU0laRT1cInJlc2l6ZVwiO3ZhciBFVkVOVF9XSEVFTD1cIndoZWVsXCI7dmFyIEVWRU5UX1pPT009XCJ6b29tXCI7dmFyIE1JTUVfVFlQRV9KUEVHPVwiaW1hZ2UvanBlZ1wiO3ZhciBSRUdFWFBfQUNUSU9OUz0vXmV8d3xzfG58c2V8c3d8bmV8bnd8YWxsfGNyb3B8bW92ZXx6b29tJC87dmFyIFJFR0VYUF9EQVRBX1VSTD0vXmRhdGE6Lzt2YXIgUkVHRVhQX0RBVEFfVVJMX0pQRUc9L15kYXRhOmltYWdlXFwvanBlZztiYXNlNjQsLzt2YXIgUkVHRVhQX1RBR19OQU1FPS9eaW1nfGNhbnZhcyQvaTt2YXIgTUlOX0NPTlRBSU5FUl9XSURUSD0yMDA7dmFyIE1JTl9DT05UQUlORVJfSEVJR0hUPTEwMDt2YXIgREVGQVVMVFM9e3ZpZXdNb2RlOjAsZHJhZ01vZGU6RFJBR19NT0RFX0NST1AsaW5pdGlhbEFzcGVjdFJhdGlvOk5hTixhc3BlY3RSYXRpbzpOYU4sZGF0YTpudWxsLHByZXZpZXc6XCJcIixyZXNwb25zaXZlOnRydWUscmVzdG9yZTp0cnVlLGNoZWNrQ3Jvc3NPcmlnaW46dHJ1ZSxjaGVja09yaWVudGF0aW9uOnRydWUsbW9kYWw6dHJ1ZSxndWlkZXM6dHJ1ZSxjZW50ZXI6dHJ1ZSxoaWdobGlnaHQ6dHJ1ZSxiYWNrZ3JvdW5kOnRydWUsYXV0b0Nyb3A6dHJ1ZSxhdXRvQ3JvcEFyZWE6LjgsbW92YWJsZTp0cnVlLHJvdGF0YWJsZTp0cnVlLHNjYWxhYmxlOnRydWUsem9vbWFibGU6dHJ1ZSx6b29tT25Ub3VjaDp0cnVlLHpvb21PbldoZWVsOnRydWUsd2hlZWxab29tUmF0aW86LjEsY3JvcEJveE1vdmFibGU6dHJ1ZSxjcm9wQm94UmVzaXphYmxlOnRydWUsdG9nZ2xlRHJhZ01vZGVPbkRibGNsaWNrOnRydWUsbWluQ2FudmFzV2lkdGg6MCxtaW5DYW52YXNIZWlnaHQ6MCxtaW5Dcm9wQm94V2lkdGg6MCxtaW5Dcm9wQm94SGVpZ2h0OjAsbWluQ29udGFpbmVyV2lkdGg6MjAwLG1pbkNvbnRhaW5lckhlaWdodDoxMDAscmVhZHk6bnVsbCxjcm9wc3RhcnQ6bnVsbCxjcm9wbW92ZTpudWxsLGNyb3BlbmQ6bnVsbCxjcm9wOm51bGwsem9vbTpudWxsfTt2YXIgVEVNUExBVEU9JzxkaXYgY2xhc3M9XCJjcm9wcGVyLWNvbnRhaW5lclwiIHRvdWNoLWFjdGlvbj1cIm5vbmVcIj4nKyc8ZGl2IGNsYXNzPVwiY3JvcHBlci13cmFwLWJveFwiPicrJzxkaXYgY2xhc3M9XCJjcm9wcGVyLWNhbnZhc1wiPjwvZGl2PicrXCI8L2Rpdj5cIisnPGRpdiBjbGFzcz1cImNyb3BwZXItZHJhZy1ib3hcIj48L2Rpdj4nKyc8ZGl2IGNsYXNzPVwiY3JvcHBlci1jcm9wLWJveFwiPicrJzxzcGFuIGNsYXNzPVwiY3JvcHBlci12aWV3LWJveFwiPjwvc3Bhbj4nKyc8c3BhbiBjbGFzcz1cImNyb3BwZXItZGFzaGVkIGRhc2hlZC1oXCI+PC9zcGFuPicrJzxzcGFuIGNsYXNzPVwiY3JvcHBlci1kYXNoZWQgZGFzaGVkLXZcIj48L3NwYW4+JysnPHNwYW4gY2xhc3M9XCJjcm9wcGVyLWNlbnRlclwiPjwvc3Bhbj4nKyc8c3BhbiBjbGFzcz1cImNyb3BwZXItZmFjZVwiPjwvc3Bhbj4nKyc8c3BhbiBjbGFzcz1cImNyb3BwZXItbGluZSBsaW5lLWVcIiBkYXRhLWNyb3BwZXItYWN0aW9uPVwiZVwiPjwvc3Bhbj4nKyc8c3BhbiBjbGFzcz1cImNyb3BwZXItbGluZSBsaW5lLW5cIiBkYXRhLWNyb3BwZXItYWN0aW9uPVwiblwiPjwvc3Bhbj4nKyc8c3BhbiBjbGFzcz1cImNyb3BwZXItbGluZSBsaW5lLXdcIiBkYXRhLWNyb3BwZXItYWN0aW9uPVwid1wiPjwvc3Bhbj4nKyc8c3BhbiBjbGFzcz1cImNyb3BwZXItbGluZSBsaW5lLXNcIiBkYXRhLWNyb3BwZXItYWN0aW9uPVwic1wiPjwvc3Bhbj4nKyc8c3BhbiBjbGFzcz1cImNyb3BwZXItcG9pbnQgcG9pbnQtZVwiIGRhdGEtY3JvcHBlci1hY3Rpb249XCJlXCI+PC9zcGFuPicrJzxzcGFuIGNsYXNzPVwiY3JvcHBlci1wb2ludCBwb2ludC1uXCIgZGF0YS1jcm9wcGVyLWFjdGlvbj1cIm5cIj48L3NwYW4+JysnPHNwYW4gY2xhc3M9XCJjcm9wcGVyLXBvaW50IHBvaW50LXdcIiBkYXRhLWNyb3BwZXItYWN0aW9uPVwid1wiPjwvc3Bhbj4nKyc8c3BhbiBjbGFzcz1cImNyb3BwZXItcG9pbnQgcG9pbnQtc1wiIGRhdGEtY3JvcHBlci1hY3Rpb249XCJzXCI+PC9zcGFuPicrJzxzcGFuIGNsYXNzPVwiY3JvcHBlci1wb2ludCBwb2ludC1uZVwiIGRhdGEtY3JvcHBlci1hY3Rpb249XCJuZVwiPjwvc3Bhbj4nKyc8c3BhbiBjbGFzcz1cImNyb3BwZXItcG9pbnQgcG9pbnQtbndcIiBkYXRhLWNyb3BwZXItYWN0aW9uPVwibndcIj48L3NwYW4+JysnPHNwYW4gY2xhc3M9XCJjcm9wcGVyLXBvaW50IHBvaW50LXN3XCIgZGF0YS1jcm9wcGVyLWFjdGlvbj1cInN3XCI+PC9zcGFuPicrJzxzcGFuIGNsYXNzPVwiY3JvcHBlci1wb2ludCBwb2ludC1zZVwiIGRhdGEtY3JvcHBlci1hY3Rpb249XCJzZVwiPjwvc3Bhbj4nK1wiPC9kaXY+XCIrXCI8L2Rpdj5cIjt2YXIgaXNOYU49TnVtYmVyLmlzTmFOfHxXSU5ET1cuaXNOYU47ZnVuY3Rpb24gaXNOdW1iZXIodmFsdWUpe3JldHVybiB0eXBlb2YgdmFsdWU9PT1cIm51bWJlclwiJiYhaXNOYU4odmFsdWUpfXZhciBpc1Bvc2l0aXZlTnVtYmVyPWZ1bmN0aW9uIGlzUG9zaXRpdmVOdW1iZXIodmFsdWUpe3JldHVybiB2YWx1ZT4wJiZ2YWx1ZTxJbmZpbml0eX07ZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsdWUpe3JldHVybiB0eXBlb2YgdmFsdWU9PT1cInVuZGVmaW5lZFwifWZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKXtyZXR1cm4gX3R5cGVvZih2YWx1ZSk9PT1cIm9iamVjdFwiJiZ2YWx1ZSE9PW51bGx9dmFyIGhhc093blByb3BlcnR5PU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7ZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh2YWx1ZSl7aWYoIWlzT2JqZWN0KHZhbHVlKSl7cmV0dXJuIGZhbHNlfXRyeXt2YXIgX2NvbnN0cnVjdG9yPXZhbHVlLmNvbnN0cnVjdG9yO3ZhciBwcm90b3R5cGU9X2NvbnN0cnVjdG9yLnByb3RvdHlwZTtyZXR1cm4gX2NvbnN0cnVjdG9yJiZwcm90b3R5cGUmJmhhc093blByb3BlcnR5LmNhbGwocHJvdG90eXBlLFwiaXNQcm90b3R5cGVPZlwiKX1jYXRjaChlcnJvcil7cmV0dXJuIGZhbHNlfX1mdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdHlwZW9mIHZhbHVlPT09XCJmdW5jdGlvblwifXZhciBzbGljZT1BcnJheS5wcm90b3R5cGUuc2xpY2U7ZnVuY3Rpb24gdG9BcnJheSh2YWx1ZSl7cmV0dXJuIEFycmF5LmZyb20/QXJyYXkuZnJvbSh2YWx1ZSk6c2xpY2UuY2FsbCh2YWx1ZSl9ZnVuY3Rpb24gZm9yRWFjaChkYXRhLGNhbGxiYWNrKXtpZihkYXRhJiZpc0Z1bmN0aW9uKGNhbGxiYWNrKSl7aWYoQXJyYXkuaXNBcnJheShkYXRhKXx8aXNOdW1iZXIoZGF0YS5sZW5ndGgpKXt0b0FycmF5KGRhdGEpLmZvckVhY2goZnVuY3Rpb24odmFsdWUsa2V5KXtjYWxsYmFjay5jYWxsKGRhdGEsdmFsdWUsa2V5LGRhdGEpfSl9ZWxzZSBpZihpc09iamVjdChkYXRhKSl7T2JqZWN0LmtleXMoZGF0YSkuZm9yRWFjaChmdW5jdGlvbihrZXkpe2NhbGxiYWNrLmNhbGwoZGF0YSxkYXRhW2tleV0sa2V5LGRhdGEpfSl9fXJldHVybiBkYXRhfXZhciBhc3NpZ249T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24gYXNzaWduKHRhcmdldCl7Zm9yKHZhciBfbGVuPWFyZ3VtZW50cy5sZW5ndGgsYXJncz1uZXcgQXJyYXkoX2xlbj4xP19sZW4tMTowKSxfa2V5PTE7X2tleTxfbGVuO19rZXkrKyl7YXJnc1tfa2V5LTFdPWFyZ3VtZW50c1tfa2V5XX1pZihpc09iamVjdCh0YXJnZXQpJiZhcmdzLmxlbmd0aD4wKXthcmdzLmZvckVhY2goZnVuY3Rpb24oYXJnKXtpZihpc09iamVjdChhcmcpKXtPYmplY3Qua2V5cyhhcmcpLmZvckVhY2goZnVuY3Rpb24oa2V5KXt0YXJnZXRba2V5XT1hcmdba2V5XX0pfX0pfXJldHVybiB0YXJnZXR9O3ZhciBSRUdFWFBfREVDSU1BTFM9L1xcLlxcZCooPzowfDkpezEyfVxcZCokLztmdW5jdGlvbiBub3JtYWxpemVEZWNpbWFsTnVtYmVyKHZhbHVlKXt2YXIgdGltZXM9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT11bmRlZmluZWQ/YXJndW1lbnRzWzFdOjFlMTE7cmV0dXJuIFJFR0VYUF9ERUNJTUFMUy50ZXN0KHZhbHVlKT9NYXRoLnJvdW5kKHZhbHVlKnRpbWVzKS90aW1lczp2YWx1ZX12YXIgUkVHRVhQX1NVRkZJWD0vXndpZHRofGhlaWdodHxsZWZ0fHRvcHxtYXJnaW5MZWZ0fG1hcmdpblRvcCQvO2Z1bmN0aW9uIHNldFN0eWxlKGVsZW1lbnQsc3R5bGVzKXt2YXIgc3R5bGU9ZWxlbWVudC5zdHlsZTtmb3JFYWNoKHN0eWxlcyxmdW5jdGlvbih2YWx1ZSxwcm9wZXJ0eSl7aWYoUkVHRVhQX1NVRkZJWC50ZXN0KHByb3BlcnR5KSYmaXNOdW1iZXIodmFsdWUpKXt2YWx1ZT1cIlwiLmNvbmNhdCh2YWx1ZSxcInB4XCIpfXN0eWxlW3Byb3BlcnR5XT12YWx1ZX0pfWZ1bmN0aW9uIGhhc0NsYXNzKGVsZW1lbnQsdmFsdWUpe3JldHVybiBlbGVtZW50LmNsYXNzTGlzdD9lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyh2YWx1ZSk6ZWxlbWVudC5jbGFzc05hbWUuaW5kZXhPZih2YWx1ZSk+LTF9ZnVuY3Rpb24gYWRkQ2xhc3MoZWxlbWVudCx2YWx1ZSl7aWYoIXZhbHVlKXtyZXR1cm59aWYoaXNOdW1iZXIoZWxlbWVudC5sZW5ndGgpKXtmb3JFYWNoKGVsZW1lbnQsZnVuY3Rpb24oZWxlbSl7YWRkQ2xhc3MoZWxlbSx2YWx1ZSl9KTtyZXR1cm59aWYoZWxlbWVudC5jbGFzc0xpc3Qpe2VsZW1lbnQuY2xhc3NMaXN0LmFkZCh2YWx1ZSk7cmV0dXJufXZhciBjbGFzc05hbWU9ZWxlbWVudC5jbGFzc05hbWUudHJpbSgpO2lmKCFjbGFzc05hbWUpe2VsZW1lbnQuY2xhc3NOYW1lPXZhbHVlfWVsc2UgaWYoY2xhc3NOYW1lLmluZGV4T2YodmFsdWUpPDApe2VsZW1lbnQuY2xhc3NOYW1lPVwiXCIuY29uY2F0KGNsYXNzTmFtZSxcIiBcIikuY29uY2F0KHZhbHVlKX19ZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWxlbWVudCx2YWx1ZSl7aWYoIXZhbHVlKXtyZXR1cm59aWYoaXNOdW1iZXIoZWxlbWVudC5sZW5ndGgpKXtmb3JFYWNoKGVsZW1lbnQsZnVuY3Rpb24oZWxlbSl7cmVtb3ZlQ2xhc3MoZWxlbSx2YWx1ZSl9KTtyZXR1cm59aWYoZWxlbWVudC5jbGFzc0xpc3Qpe2VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh2YWx1ZSk7cmV0dXJufWlmKGVsZW1lbnQuY2xhc3NOYW1lLmluZGV4T2YodmFsdWUpPj0wKXtlbGVtZW50LmNsYXNzTmFtZT1lbGVtZW50LmNsYXNzTmFtZS5yZXBsYWNlKHZhbHVlLFwiXCIpfX1mdW5jdGlvbiB0b2dnbGVDbGFzcyhlbGVtZW50LHZhbHVlLGFkZGVkKXtpZighdmFsdWUpe3JldHVybn1pZihpc051bWJlcihlbGVtZW50Lmxlbmd0aCkpe2ZvckVhY2goZWxlbWVudCxmdW5jdGlvbihlbGVtKXt0b2dnbGVDbGFzcyhlbGVtLHZhbHVlLGFkZGVkKX0pO3JldHVybn1pZihhZGRlZCl7YWRkQ2xhc3MoZWxlbWVudCx2YWx1ZSl9ZWxzZXtyZW1vdmVDbGFzcyhlbGVtZW50LHZhbHVlKX19dmFyIFJFR0VYUF9DQU1FTF9DQVNFPS8oW2EtelxcZF0pKFtBLVpdKS9nO2Z1bmN0aW9uIHRvUGFyYW1DYXNlKHZhbHVlKXtyZXR1cm4gdmFsdWUucmVwbGFjZShSRUdFWFBfQ0FNRUxfQ0FTRSxcIiQxLSQyXCIpLnRvTG93ZXJDYXNlKCl9ZnVuY3Rpb24gZ2V0RGF0YShlbGVtZW50LG5hbWUpe2lmKGlzT2JqZWN0KGVsZW1lbnRbbmFtZV0pKXtyZXR1cm4gZWxlbWVudFtuYW1lXX1pZihlbGVtZW50LmRhdGFzZXQpe3JldHVybiBlbGVtZW50LmRhdGFzZXRbbmFtZV19cmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1cIi5jb25jYXQodG9QYXJhbUNhc2UobmFtZSkpKX1mdW5jdGlvbiBzZXREYXRhKGVsZW1lbnQsbmFtZSxkYXRhKXtpZihpc09iamVjdChkYXRhKSl7ZWxlbWVudFtuYW1lXT1kYXRhfWVsc2UgaWYoZWxlbWVudC5kYXRhc2V0KXtlbGVtZW50LmRhdGFzZXRbbmFtZV09ZGF0YX1lbHNle2VsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1cIi5jb25jYXQodG9QYXJhbUNhc2UobmFtZSkpLGRhdGEpfX1mdW5jdGlvbiByZW1vdmVEYXRhKGVsZW1lbnQsbmFtZSl7aWYoaXNPYmplY3QoZWxlbWVudFtuYW1lXSkpe3RyeXtkZWxldGUgZWxlbWVudFtuYW1lXX1jYXRjaChlcnJvcil7ZWxlbWVudFtuYW1lXT11bmRlZmluZWR9fWVsc2UgaWYoZWxlbWVudC5kYXRhc2V0KXt0cnl7ZGVsZXRlIGVsZW1lbnQuZGF0YXNldFtuYW1lXX1jYXRjaChlcnJvcil7ZWxlbWVudC5kYXRhc2V0W25hbWVdPXVuZGVmaW5lZH19ZWxzZXtlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtXCIuY29uY2F0KHRvUGFyYW1DYXNlKG5hbWUpKSl9fXZhciBSRUdFWFBfU1BBQ0VTPS9cXHNcXHMqLzt2YXIgb25jZVN1cHBvcnRlZD1mdW5jdGlvbigpe3ZhciBzdXBwb3J0ZWQ9ZmFsc2U7aWYoSVNfQlJPV1NFUil7dmFyIG9uY2U9ZmFsc2U7dmFyIGxpc3RlbmVyPWZ1bmN0aW9uIGxpc3RlbmVyKCl7fTt2YXIgb3B0aW9ucz1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sXCJvbmNlXCIse2dldDpmdW5jdGlvbiBnZXQoKXtzdXBwb3J0ZWQ9dHJ1ZTtyZXR1cm4gb25jZX0sc2V0OmZ1bmN0aW9uIHNldCh2YWx1ZSl7b25jZT12YWx1ZX19KTtXSU5ET1cuYWRkRXZlbnRMaXN0ZW5lcihcInRlc3RcIixsaXN0ZW5lcixvcHRpb25zKTtXSU5ET1cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRlc3RcIixsaXN0ZW5lcixvcHRpb25zKX1yZXR1cm4gc3VwcG9ydGVkfSgpO2Z1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKGVsZW1lbnQsdHlwZSxsaXN0ZW5lcil7dmFyIG9wdGlvbnM9YXJndW1lbnRzLmxlbmd0aD4zJiZhcmd1bWVudHNbM10hPT11bmRlZmluZWQ/YXJndW1lbnRzWzNdOnt9O3ZhciBoYW5kbGVyPWxpc3RlbmVyO3R5cGUudHJpbSgpLnNwbGl0KFJFR0VYUF9TUEFDRVMpLmZvckVhY2goZnVuY3Rpb24oZXZlbnQpe2lmKCFvbmNlU3VwcG9ydGVkKXt2YXIgbGlzdGVuZXJzPWVsZW1lbnQubGlzdGVuZXJzO2lmKGxpc3RlbmVycyYmbGlzdGVuZXJzW2V2ZW50XSYmbGlzdGVuZXJzW2V2ZW50XVtsaXN0ZW5lcl0pe2hhbmRsZXI9bGlzdGVuZXJzW2V2ZW50XVtsaXN0ZW5lcl07ZGVsZXRlIGxpc3RlbmVyc1tldmVudF1bbGlzdGVuZXJdO2lmKE9iamVjdC5rZXlzKGxpc3RlbmVyc1tldmVudF0pLmxlbmd0aD09PTApe2RlbGV0ZSBsaXN0ZW5lcnNbZXZlbnRdfWlmKE9iamVjdC5rZXlzKGxpc3RlbmVycykubGVuZ3RoPT09MCl7ZGVsZXRlIGVsZW1lbnQubGlzdGVuZXJzfX19ZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LGhhbmRsZXIsb3B0aW9ucyl9KX1mdW5jdGlvbiBhZGRMaXN0ZW5lcihlbGVtZW50LHR5cGUsbGlzdGVuZXIpe3ZhciBvcHRpb25zPWFyZ3VtZW50cy5sZW5ndGg+MyYmYXJndW1lbnRzWzNdIT09dW5kZWZpbmVkP2FyZ3VtZW50c1szXTp7fTt2YXIgX2hhbmRsZXI9bGlzdGVuZXI7dHlwZS50cmltKCkuc3BsaXQoUkVHRVhQX1NQQUNFUykuZm9yRWFjaChmdW5jdGlvbihldmVudCl7aWYob3B0aW9ucy5vbmNlJiYhb25jZVN1cHBvcnRlZCl7dmFyIF9lbGVtZW50JGxpc3RlbmVycz1lbGVtZW50Lmxpc3RlbmVycyxsaXN0ZW5lcnM9X2VsZW1lbnQkbGlzdGVuZXJzPT09dm9pZCAwP3t9Ol9lbGVtZW50JGxpc3RlbmVycztfaGFuZGxlcj1mdW5jdGlvbiBoYW5kbGVyKCl7ZGVsZXRlIGxpc3RlbmVyc1tldmVudF1bbGlzdGVuZXJdO2VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCxfaGFuZGxlcixvcHRpb25zKTtmb3IodmFyIF9sZW4yPWFyZ3VtZW50cy5sZW5ndGgsYXJncz1uZXcgQXJyYXkoX2xlbjIpLF9rZXkyPTA7X2tleTI8X2xlbjI7X2tleTIrKyl7YXJnc1tfa2V5Ml09YXJndW1lbnRzW19rZXkyXX1saXN0ZW5lci5hcHBseShlbGVtZW50LGFyZ3MpfTtpZighbGlzdGVuZXJzW2V2ZW50XSl7bGlzdGVuZXJzW2V2ZW50XT17fX1pZihsaXN0ZW5lcnNbZXZlbnRdW2xpc3RlbmVyXSl7ZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LGxpc3RlbmVyc1tldmVudF1bbGlzdGVuZXJdLG9wdGlvbnMpfWxpc3RlbmVyc1tldmVudF1bbGlzdGVuZXJdPV9oYW5kbGVyO2VsZW1lbnQubGlzdGVuZXJzPWxpc3RlbmVyc31lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsX2hhbmRsZXIsb3B0aW9ucyl9KX1mdW5jdGlvbiBkaXNwYXRjaEV2ZW50KGVsZW1lbnQsdHlwZSxkYXRhKXt2YXIgZXZlbnQ7aWYoaXNGdW5jdGlvbihFdmVudCkmJmlzRnVuY3Rpb24oQ3VzdG9tRXZlbnQpKXtldmVudD1uZXcgQ3VzdG9tRXZlbnQodHlwZSx7ZGV0YWlsOmRhdGEsYnViYmxlczp0cnVlLGNhbmNlbGFibGU6dHJ1ZX0pfWVsc2V7ZXZlbnQ9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJDdXN0b21FdmVudFwiKTtldmVudC5pbml0Q3VzdG9tRXZlbnQodHlwZSx0cnVlLHRydWUsZGF0YSl9cmV0dXJuIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCl9ZnVuY3Rpb24gZ2V0T2Zmc2V0KGVsZW1lbnQpe3ZhciBib3g9ZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtyZXR1cm57bGVmdDpib3gubGVmdCsod2luZG93LnBhZ2VYT2Zmc2V0LWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRMZWZ0KSx0b3A6Ym94LnRvcCsod2luZG93LnBhZ2VZT2Zmc2V0LWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRUb3ApfX12YXIgbG9jYXRpb249V0lORE9XLmxvY2F0aW9uO3ZhciBSRUdFWFBfT1JJR0lOUz0vXihcXHcrOilcXC9cXC8oW146Lz8jXSopOj8oXFxkKikvaTtmdW5jdGlvbiBpc0Nyb3NzT3JpZ2luVVJMKHVybCl7dmFyIHBhcnRzPXVybC5tYXRjaChSRUdFWFBfT1JJR0lOUyk7cmV0dXJuIHBhcnRzIT09bnVsbCYmKHBhcnRzWzFdIT09bG9jYXRpb24ucHJvdG9jb2x8fHBhcnRzWzJdIT09bG9jYXRpb24uaG9zdG5hbWV8fHBhcnRzWzNdIT09bG9jYXRpb24ucG9ydCl9ZnVuY3Rpb24gYWRkVGltZXN0YW1wKHVybCl7dmFyIHRpbWVzdGFtcD1cInRpbWVzdGFtcD1cIi5jb25jYXQoKG5ldyBEYXRlKS5nZXRUaW1lKCkpO3JldHVybiB1cmwrKHVybC5pbmRleE9mKFwiP1wiKT09PS0xP1wiP1wiOlwiJlwiKSt0aW1lc3RhbXB9ZnVuY3Rpb24gZ2V0VHJhbnNmb3JtcyhfcmVmKXt2YXIgcm90YXRlPV9yZWYucm90YXRlLHNjYWxlWD1fcmVmLnNjYWxlWCxzY2FsZVk9X3JlZi5zY2FsZVksdHJhbnNsYXRlWD1fcmVmLnRyYW5zbGF0ZVgsdHJhbnNsYXRlWT1fcmVmLnRyYW5zbGF0ZVk7dmFyIHZhbHVlcz1bXTtpZihpc051bWJlcih0cmFuc2xhdGVYKSYmdHJhbnNsYXRlWCE9PTApe3ZhbHVlcy5wdXNoKFwidHJhbnNsYXRlWChcIi5jb25jYXQodHJhbnNsYXRlWCxcInB4KVwiKSl9aWYoaXNOdW1iZXIodHJhbnNsYXRlWSkmJnRyYW5zbGF0ZVkhPT0wKXt2YWx1ZXMucHVzaChcInRyYW5zbGF0ZVkoXCIuY29uY2F0KHRyYW5zbGF0ZVksXCJweClcIikpfWlmKGlzTnVtYmVyKHJvdGF0ZSkmJnJvdGF0ZSE9PTApe3ZhbHVlcy5wdXNoKFwicm90YXRlKFwiLmNvbmNhdChyb3RhdGUsXCJkZWcpXCIpKX1pZihpc051bWJlcihzY2FsZVgpJiZzY2FsZVghPT0xKXt2YWx1ZXMucHVzaChcInNjYWxlWChcIi5jb25jYXQoc2NhbGVYLFwiKVwiKSl9aWYoaXNOdW1iZXIoc2NhbGVZKSYmc2NhbGVZIT09MSl7dmFsdWVzLnB1c2goXCJzY2FsZVkoXCIuY29uY2F0KHNjYWxlWSxcIilcIikpfXZhciB0cmFuc2Zvcm09dmFsdWVzLmxlbmd0aD92YWx1ZXMuam9pbihcIiBcIik6XCJub25lXCI7cmV0dXJue1dlYmtpdFRyYW5zZm9ybTp0cmFuc2Zvcm0sbXNUcmFuc2Zvcm06dHJhbnNmb3JtLHRyYW5zZm9ybTp0cmFuc2Zvcm19fWZ1bmN0aW9uIGdldE1heFpvb21SYXRpbyhwb2ludGVycyl7dmFyIHBvaW50ZXJzMj1fb2JqZWN0U3ByZWFkMih7fSxwb2ludGVycyk7dmFyIHJhdGlvcz1bXTtmb3JFYWNoKHBvaW50ZXJzLGZ1bmN0aW9uKHBvaW50ZXIscG9pbnRlcklkKXtkZWxldGUgcG9pbnRlcnMyW3BvaW50ZXJJZF07Zm9yRWFjaChwb2ludGVyczIsZnVuY3Rpb24ocG9pbnRlcjIpe3ZhciB4MT1NYXRoLmFicyhwb2ludGVyLnN0YXJ0WC1wb2ludGVyMi5zdGFydFgpO3ZhciB5MT1NYXRoLmFicyhwb2ludGVyLnN0YXJ0WS1wb2ludGVyMi5zdGFydFkpO3ZhciB4Mj1NYXRoLmFicyhwb2ludGVyLmVuZFgtcG9pbnRlcjIuZW5kWCk7dmFyIHkyPU1hdGguYWJzKHBvaW50ZXIuZW5kWS1wb2ludGVyMi5lbmRZKTt2YXIgejE9TWF0aC5zcXJ0KHgxKngxK3kxKnkxKTt2YXIgejI9TWF0aC5zcXJ0KHgyKngyK3kyKnkyKTt2YXIgcmF0aW89KHoyLXoxKS96MTtyYXRpb3MucHVzaChyYXRpbyl9KX0pO3JhdGlvcy5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIE1hdGguYWJzKGEpPE1hdGguYWJzKGIpfSk7cmV0dXJuIHJhdGlvc1swXX1mdW5jdGlvbiBnZXRQb2ludGVyKF9yZWYyLGVuZE9ubHkpe3ZhciBwYWdlWD1fcmVmMi5wYWdlWCxwYWdlWT1fcmVmMi5wYWdlWTt2YXIgZW5kPXtlbmRYOnBhZ2VYLGVuZFk6cGFnZVl9O3JldHVybiBlbmRPbmx5P2VuZDpfb2JqZWN0U3ByZWFkMih7c3RhcnRYOnBhZ2VYLHN0YXJ0WTpwYWdlWX0sZW5kKX1mdW5jdGlvbiBnZXRQb2ludGVyc0NlbnRlcihwb2ludGVycyl7dmFyIHBhZ2VYPTA7dmFyIHBhZ2VZPTA7dmFyIGNvdW50PTA7Zm9yRWFjaChwb2ludGVycyxmdW5jdGlvbihfcmVmMyl7dmFyIHN0YXJ0WD1fcmVmMy5zdGFydFgsc3RhcnRZPV9yZWYzLnN0YXJ0WTtwYWdlWCs9c3RhcnRYO3BhZ2VZKz1zdGFydFk7Y291bnQrPTF9KTtwYWdlWC89Y291bnQ7cGFnZVkvPWNvdW50O3JldHVybntwYWdlWDpwYWdlWCxwYWdlWTpwYWdlWX19ZnVuY3Rpb24gZ2V0QWRqdXN0ZWRTaXplcyhfcmVmNCl7dmFyIGFzcGVjdFJhdGlvPV9yZWY0LmFzcGVjdFJhdGlvLGhlaWdodD1fcmVmNC5oZWlnaHQsd2lkdGg9X3JlZjQud2lkdGg7dmFyIHR5cGU9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT11bmRlZmluZWQ/YXJndW1lbnRzWzFdOlwiY29udGFpblwiO3ZhciBpc1ZhbGlkV2lkdGg9aXNQb3NpdGl2ZU51bWJlcih3aWR0aCk7dmFyIGlzVmFsaWRIZWlnaHQ9aXNQb3NpdGl2ZU51bWJlcihoZWlnaHQpO2lmKGlzVmFsaWRXaWR0aCYmaXNWYWxpZEhlaWdodCl7dmFyIGFkanVzdGVkV2lkdGg9aGVpZ2h0KmFzcGVjdFJhdGlvO2lmKHR5cGU9PT1cImNvbnRhaW5cIiYmYWRqdXN0ZWRXaWR0aD53aWR0aHx8dHlwZT09PVwiY292ZXJcIiYmYWRqdXN0ZWRXaWR0aDx3aWR0aCl7aGVpZ2h0PXdpZHRoL2FzcGVjdFJhdGlvfWVsc2V7d2lkdGg9aGVpZ2h0KmFzcGVjdFJhdGlvfX1lbHNlIGlmKGlzVmFsaWRXaWR0aCl7aGVpZ2h0PXdpZHRoL2FzcGVjdFJhdGlvfWVsc2UgaWYoaXNWYWxpZEhlaWdodCl7d2lkdGg9aGVpZ2h0KmFzcGVjdFJhdGlvfXJldHVybnt3aWR0aDp3aWR0aCxoZWlnaHQ6aGVpZ2h0fX1mdW5jdGlvbiBnZXRSb3RhdGVkU2l6ZXMoX3JlZjUpe3ZhciB3aWR0aD1fcmVmNS53aWR0aCxoZWlnaHQ9X3JlZjUuaGVpZ2h0LGRlZ3JlZT1fcmVmNS5kZWdyZWU7ZGVncmVlPU1hdGguYWJzKGRlZ3JlZSklMTgwO2lmKGRlZ3JlZT09PTkwKXtyZXR1cm57d2lkdGg6aGVpZ2h0LGhlaWdodDp3aWR0aH19dmFyIGFyYz1kZWdyZWUlOTAqTWF0aC5QSS8xODA7dmFyIHNpbkFyYz1NYXRoLnNpbihhcmMpO3ZhciBjb3NBcmM9TWF0aC5jb3MoYXJjKTt2YXIgbmV3V2lkdGg9d2lkdGgqY29zQXJjK2hlaWdodCpzaW5BcmM7dmFyIG5ld0hlaWdodD13aWR0aCpzaW5BcmMraGVpZ2h0KmNvc0FyYztyZXR1cm4gZGVncmVlPjkwP3t3aWR0aDpuZXdIZWlnaHQsaGVpZ2h0Om5ld1dpZHRofTp7d2lkdGg6bmV3V2lkdGgsaGVpZ2h0Om5ld0hlaWdodH19ZnVuY3Rpb24gZ2V0U291cmNlQ2FudmFzKGltYWdlLF9yZWY2LF9yZWY3LF9yZWY4KXt2YXIgaW1hZ2VBc3BlY3RSYXRpbz1fcmVmNi5hc3BlY3RSYXRpbyxpbWFnZU5hdHVyYWxXaWR0aD1fcmVmNi5uYXR1cmFsV2lkdGgsaW1hZ2VOYXR1cmFsSGVpZ2h0PV9yZWY2Lm5hdHVyYWxIZWlnaHQsX3JlZjYkcm90YXRlPV9yZWY2LnJvdGF0ZSxyb3RhdGU9X3JlZjYkcm90YXRlPT09dm9pZCAwPzA6X3JlZjYkcm90YXRlLF9yZWY2JHNjYWxlWD1fcmVmNi5zY2FsZVgsc2NhbGVYPV9yZWY2JHNjYWxlWD09PXZvaWQgMD8xOl9yZWY2JHNjYWxlWCxfcmVmNiRzY2FsZVk9X3JlZjYuc2NhbGVZLHNjYWxlWT1fcmVmNiRzY2FsZVk9PT12b2lkIDA/MTpfcmVmNiRzY2FsZVk7dmFyIGFzcGVjdFJhdGlvPV9yZWY3LmFzcGVjdFJhdGlvLG5hdHVyYWxXaWR0aD1fcmVmNy5uYXR1cmFsV2lkdGgsbmF0dXJhbEhlaWdodD1fcmVmNy5uYXR1cmFsSGVpZ2h0O3ZhciBfcmVmOCRmaWxsQ29sb3I9X3JlZjguZmlsbENvbG9yLGZpbGxDb2xvcj1fcmVmOCRmaWxsQ29sb3I9PT12b2lkIDA/XCJ0cmFuc3BhcmVudFwiOl9yZWY4JGZpbGxDb2xvcixfcmVmOCRpbWFnZVNtb290aGluZ0U9X3JlZjguaW1hZ2VTbW9vdGhpbmdFbmFibGVkLGltYWdlU21vb3RoaW5nRW5hYmxlZD1fcmVmOCRpbWFnZVNtb290aGluZ0U9PT12b2lkIDA/dHJ1ZTpfcmVmOCRpbWFnZVNtb290aGluZ0UsX3JlZjgkaW1hZ2VTbW9vdGhpbmdRPV9yZWY4LmltYWdlU21vb3RoaW5nUXVhbGl0eSxpbWFnZVNtb290aGluZ1F1YWxpdHk9X3JlZjgkaW1hZ2VTbW9vdGhpbmdRPT09dm9pZCAwP1wibG93XCI6X3JlZjgkaW1hZ2VTbW9vdGhpbmdRLF9yZWY4JG1heFdpZHRoPV9yZWY4Lm1heFdpZHRoLG1heFdpZHRoPV9yZWY4JG1heFdpZHRoPT09dm9pZCAwP0luZmluaXR5Ol9yZWY4JG1heFdpZHRoLF9yZWY4JG1heEhlaWdodD1fcmVmOC5tYXhIZWlnaHQsbWF4SGVpZ2h0PV9yZWY4JG1heEhlaWdodD09PXZvaWQgMD9JbmZpbml0eTpfcmVmOCRtYXhIZWlnaHQsX3JlZjgkbWluV2lkdGg9X3JlZjgubWluV2lkdGgsbWluV2lkdGg9X3JlZjgkbWluV2lkdGg9PT12b2lkIDA/MDpfcmVmOCRtaW5XaWR0aCxfcmVmOCRtaW5IZWlnaHQ9X3JlZjgubWluSGVpZ2h0LG1pbkhlaWdodD1fcmVmOCRtaW5IZWlnaHQ9PT12b2lkIDA/MDpfcmVmOCRtaW5IZWlnaHQ7dmFyIGNhbnZhcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO3ZhciBjb250ZXh0PWNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7dmFyIG1heFNpemVzPWdldEFkanVzdGVkU2l6ZXMoe2FzcGVjdFJhdGlvOmFzcGVjdFJhdGlvLHdpZHRoOm1heFdpZHRoLGhlaWdodDptYXhIZWlnaHR9KTt2YXIgbWluU2l6ZXM9Z2V0QWRqdXN0ZWRTaXplcyh7YXNwZWN0UmF0aW86YXNwZWN0UmF0aW8sd2lkdGg6bWluV2lkdGgsaGVpZ2h0Om1pbkhlaWdodH0sXCJjb3ZlclwiKTt2YXIgd2lkdGg9TWF0aC5taW4obWF4U2l6ZXMud2lkdGgsTWF0aC5tYXgobWluU2l6ZXMud2lkdGgsbmF0dXJhbFdpZHRoKSk7dmFyIGhlaWdodD1NYXRoLm1pbihtYXhTaXplcy5oZWlnaHQsTWF0aC5tYXgobWluU2l6ZXMuaGVpZ2h0LG5hdHVyYWxIZWlnaHQpKTt2YXIgZGVzdE1heFNpemVzPWdldEFkanVzdGVkU2l6ZXMoe2FzcGVjdFJhdGlvOmltYWdlQXNwZWN0UmF0aW8sd2lkdGg6bWF4V2lkdGgsaGVpZ2h0Om1heEhlaWdodH0pO3ZhciBkZXN0TWluU2l6ZXM9Z2V0QWRqdXN0ZWRTaXplcyh7YXNwZWN0UmF0aW86aW1hZ2VBc3BlY3RSYXRpbyx3aWR0aDptaW5XaWR0aCxoZWlnaHQ6bWluSGVpZ2h0fSxcImNvdmVyXCIpO3ZhciBkZXN0V2lkdGg9TWF0aC5taW4oZGVzdE1heFNpemVzLndpZHRoLE1hdGgubWF4KGRlc3RNaW5TaXplcy53aWR0aCxpbWFnZU5hdHVyYWxXaWR0aCkpO3ZhciBkZXN0SGVpZ2h0PU1hdGgubWluKGRlc3RNYXhTaXplcy5oZWlnaHQsTWF0aC5tYXgoZGVzdE1pblNpemVzLmhlaWdodCxpbWFnZU5hdHVyYWxIZWlnaHQpKTt2YXIgcGFyYW1zPVstZGVzdFdpZHRoLzIsLWRlc3RIZWlnaHQvMixkZXN0V2lkdGgsZGVzdEhlaWdodF07Y2FudmFzLndpZHRoPW5vcm1hbGl6ZURlY2ltYWxOdW1iZXIod2lkdGgpO2NhbnZhcy5oZWlnaHQ9bm9ybWFsaXplRGVjaW1hbE51bWJlcihoZWlnaHQpO2NvbnRleHQuZmlsbFN0eWxlPWZpbGxDb2xvcjtjb250ZXh0LmZpbGxSZWN0KDAsMCx3aWR0aCxoZWlnaHQpO2NvbnRleHQuc2F2ZSgpO2NvbnRleHQudHJhbnNsYXRlKHdpZHRoLzIsaGVpZ2h0LzIpO2NvbnRleHQucm90YXRlKHJvdGF0ZSpNYXRoLlBJLzE4MCk7Y29udGV4dC5zY2FsZShzY2FsZVgsc2NhbGVZKTtjb250ZXh0LmltYWdlU21vb3RoaW5nRW5hYmxlZD1pbWFnZVNtb290aGluZ0VuYWJsZWQ7Y29udGV4dC5pbWFnZVNtb290aGluZ1F1YWxpdHk9aW1hZ2VTbW9vdGhpbmdRdWFsaXR5O2NvbnRleHQuZHJhd0ltYWdlLmFwcGx5KGNvbnRleHQsW2ltYWdlXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHBhcmFtcy5tYXAoZnVuY3Rpb24ocGFyYW0pe3JldHVybiBNYXRoLmZsb29yKG5vcm1hbGl6ZURlY2ltYWxOdW1iZXIocGFyYW0pKX0pKSkpO2NvbnRleHQucmVzdG9yZSgpO3JldHVybiBjYW52YXN9dmFyIGZyb21DaGFyQ29kZT1TdHJpbmcuZnJvbUNoYXJDb2RlO2Z1bmN0aW9uIGdldFN0cmluZ0Zyb21DaGFyQ29kZShkYXRhVmlldyxzdGFydCxsZW5ndGgpe3ZhciBzdHI9XCJcIjtsZW5ndGgrPXN0YXJ0O2Zvcih2YXIgaT1zdGFydDtpPGxlbmd0aDtpKz0xKXtzdHIrPWZyb21DaGFyQ29kZShkYXRhVmlldy5nZXRVaW50OChpKSl9cmV0dXJuIHN0cn12YXIgUkVHRVhQX0RBVEFfVVJMX0hFQUQ9L15kYXRhOi4qLC87ZnVuY3Rpb24gZGF0YVVSTFRvQXJyYXlCdWZmZXIoZGF0YVVSTCl7dmFyIGJhc2U2ND1kYXRhVVJMLnJlcGxhY2UoUkVHRVhQX0RBVEFfVVJMX0hFQUQsXCJcIik7dmFyIGJpbmFyeT1hdG9iKGJhc2U2NCk7dmFyIGFycmF5QnVmZmVyPW5ldyBBcnJheUJ1ZmZlcihiaW5hcnkubGVuZ3RoKTt2YXIgdWludDg9bmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIpO2ZvckVhY2godWludDgsZnVuY3Rpb24odmFsdWUsaSl7dWludDhbaV09YmluYXJ5LmNoYXJDb2RlQXQoaSl9KTtyZXR1cm4gYXJyYXlCdWZmZXJ9ZnVuY3Rpb24gYXJyYXlCdWZmZXJUb0RhdGFVUkwoYXJyYXlCdWZmZXIsbWltZVR5cGUpe3ZhciBjaHVua3M9W107dmFyIGNodW5rU2l6ZT04MTkyO3ZhciB1aW50OD1uZXcgVWludDhBcnJheShhcnJheUJ1ZmZlcik7d2hpbGUodWludDgubGVuZ3RoPjApe2NodW5rcy5wdXNoKGZyb21DaGFyQ29kZS5hcHBseShudWxsLHRvQXJyYXkodWludDguc3ViYXJyYXkoMCxjaHVua1NpemUpKSkpO3VpbnQ4PXVpbnQ4LnN1YmFycmF5KGNodW5rU2l6ZSl9cmV0dXJuXCJkYXRhOlwiLmNvbmNhdChtaW1lVHlwZSxcIjtiYXNlNjQsXCIpLmNvbmNhdChidG9hKGNodW5rcy5qb2luKFwiXCIpKSl9ZnVuY3Rpb24gcmVzZXRBbmRHZXRPcmllbnRhdGlvbihhcnJheUJ1ZmZlcil7dmFyIGRhdGFWaWV3PW5ldyBEYXRhVmlldyhhcnJheUJ1ZmZlcik7dmFyIG9yaWVudGF0aW9uO3RyeXt2YXIgbGl0dGxlRW5kaWFuO3ZhciBhcHAxU3RhcnQ7dmFyIGlmZFN0YXJ0O2lmKGRhdGFWaWV3LmdldFVpbnQ4KDApPT09MjU1JiZkYXRhVmlldy5nZXRVaW50OCgxKT09PTIxNil7dmFyIGxlbmd0aD1kYXRhVmlldy5ieXRlTGVuZ3RoO3ZhciBvZmZzZXQ9Mjt3aGlsZShvZmZzZXQrMTxsZW5ndGgpe2lmKGRhdGFWaWV3LmdldFVpbnQ4KG9mZnNldCk9PT0yNTUmJmRhdGFWaWV3LmdldFVpbnQ4KG9mZnNldCsxKT09PTIyNSl7YXBwMVN0YXJ0PW9mZnNldDticmVha31vZmZzZXQrPTF9fWlmKGFwcDFTdGFydCl7dmFyIGV4aWZJRENvZGU9YXBwMVN0YXJ0KzQ7dmFyIHRpZmZPZmZzZXQ9YXBwMVN0YXJ0KzEwO2lmKGdldFN0cmluZ0Zyb21DaGFyQ29kZShkYXRhVmlldyxleGlmSURDb2RlLDQpPT09XCJFeGlmXCIpe3ZhciBlbmRpYW5uZXNzPWRhdGFWaWV3LmdldFVpbnQxNih0aWZmT2Zmc2V0KTtsaXR0bGVFbmRpYW49ZW5kaWFubmVzcz09PTE4NzYxO2lmKGxpdHRsZUVuZGlhbnx8ZW5kaWFubmVzcz09PTE5Nzg5KXtpZihkYXRhVmlldy5nZXRVaW50MTYodGlmZk9mZnNldCsyLGxpdHRsZUVuZGlhbik9PT00Mil7dmFyIGZpcnN0SUZET2Zmc2V0PWRhdGFWaWV3LmdldFVpbnQzMih0aWZmT2Zmc2V0KzQsbGl0dGxlRW5kaWFuKTtpZihmaXJzdElGRE9mZnNldD49OCl7aWZkU3RhcnQ9dGlmZk9mZnNldCtmaXJzdElGRE9mZnNldH19fX19aWYoaWZkU3RhcnQpe3ZhciBfbGVuZ3RoPWRhdGFWaWV3LmdldFVpbnQxNihpZmRTdGFydCxsaXR0bGVFbmRpYW4pO3ZhciBfb2Zmc2V0O3ZhciBpO2ZvcihpPTA7aTxfbGVuZ3RoO2krPTEpe19vZmZzZXQ9aWZkU3RhcnQraSoxMisyO2lmKGRhdGFWaWV3LmdldFVpbnQxNihfb2Zmc2V0LGxpdHRsZUVuZGlhbik9PT0yNzQpe19vZmZzZXQrPTg7b3JpZW50YXRpb249ZGF0YVZpZXcuZ2V0VWludDE2KF9vZmZzZXQsbGl0dGxlRW5kaWFuKTtkYXRhVmlldy5zZXRVaW50MTYoX29mZnNldCwxLGxpdHRsZUVuZGlhbik7YnJlYWt9fX19Y2F0Y2goZXJyb3Ipe29yaWVudGF0aW9uPTF9cmV0dXJuIG9yaWVudGF0aW9ufWZ1bmN0aW9uIHBhcnNlT3JpZW50YXRpb24ob3JpZW50YXRpb24pe3ZhciByb3RhdGU9MDt2YXIgc2NhbGVYPTE7dmFyIHNjYWxlWT0xO3N3aXRjaChvcmllbnRhdGlvbil7Y2FzZSAyOnNjYWxlWD0tMTticmVhaztjYXNlIDM6cm90YXRlPS0xODA7YnJlYWs7Y2FzZSA0OnNjYWxlWT0tMTticmVhaztjYXNlIDU6cm90YXRlPTkwO3NjYWxlWT0tMTticmVhaztjYXNlIDY6cm90YXRlPTkwO2JyZWFrO2Nhc2UgNzpyb3RhdGU9OTA7c2NhbGVYPS0xO2JyZWFrO2Nhc2UgODpyb3RhdGU9LTkwO2JyZWFrO2RlZmF1bHQ6fXJldHVybntyb3RhdGU6cm90YXRlLHNjYWxlWDpzY2FsZVgsc2NhbGVZOnNjYWxlWX19dmFyIHJlbmRlcj17cmVuZGVyOmZ1bmN0aW9uIHJlbmRlcigpe3RoaXMuaW5pdENvbnRhaW5lcigpO3RoaXMuaW5pdENhbnZhcygpO3RoaXMuaW5pdENyb3BCb3goKTt0aGlzLnJlbmRlckNhbnZhcygpO2lmKHRoaXMuY3JvcHBlZCl7dGhpcy5yZW5kZXJDcm9wQm94KCl9fSxpbml0Q29udGFpbmVyOmZ1bmN0aW9uIGluaXRDb250YWluZXIoKXt2YXIgZWxlbWVudD10aGlzLmVsZW1lbnQsb3B0aW9ucz10aGlzLm9wdGlvbnMsY29udGFpbmVyPXRoaXMuY29udGFpbmVyLGNyb3BwZXI9dGhpcy5jcm9wcGVyO2FkZENsYXNzKGNyb3BwZXIsQ0xBU1NfSElEREVOKTtyZW1vdmVDbGFzcyhlbGVtZW50LENMQVNTX0hJRERFTik7dmFyIGNvbnRhaW5lckRhdGE9e3dpZHRoOk1hdGgubWF4KGNvbnRhaW5lci5vZmZzZXRXaWR0aCxOdW1iZXIob3B0aW9ucy5taW5Db250YWluZXJXaWR0aCl8fDIwMCksaGVpZ2h0Ok1hdGgubWF4KGNvbnRhaW5lci5vZmZzZXRIZWlnaHQsTnVtYmVyKG9wdGlvbnMubWluQ29udGFpbmVySGVpZ2h0KXx8MTAwKX07dGhpcy5jb250YWluZXJEYXRhPWNvbnRhaW5lckRhdGE7c2V0U3R5bGUoY3JvcHBlcix7d2lkdGg6Y29udGFpbmVyRGF0YS53aWR0aCxoZWlnaHQ6Y29udGFpbmVyRGF0YS5oZWlnaHR9KTthZGRDbGFzcyhlbGVtZW50LENMQVNTX0hJRERFTik7cmVtb3ZlQ2xhc3MoY3JvcHBlcixDTEFTU19ISURERU4pfSxpbml0Q2FudmFzOmZ1bmN0aW9uIGluaXRDYW52YXMoKXt2YXIgY29udGFpbmVyRGF0YT10aGlzLmNvbnRhaW5lckRhdGEsaW1hZ2VEYXRhPXRoaXMuaW1hZ2VEYXRhO3ZhciB2aWV3TW9kZT10aGlzLm9wdGlvbnMudmlld01vZGU7dmFyIHJvdGF0ZWQ9TWF0aC5hYnMoaW1hZ2VEYXRhLnJvdGF0ZSklMTgwPT09OTA7dmFyIG5hdHVyYWxXaWR0aD1yb3RhdGVkP2ltYWdlRGF0YS5uYXR1cmFsSGVpZ2h0OmltYWdlRGF0YS5uYXR1cmFsV2lkdGg7dmFyIG5hdHVyYWxIZWlnaHQ9cm90YXRlZD9pbWFnZURhdGEubmF0dXJhbFdpZHRoOmltYWdlRGF0YS5uYXR1cmFsSGVpZ2h0O3ZhciBhc3BlY3RSYXRpbz1uYXR1cmFsV2lkdGgvbmF0dXJhbEhlaWdodDt2YXIgY2FudmFzV2lkdGg9Y29udGFpbmVyRGF0YS53aWR0aDt2YXIgY2FudmFzSGVpZ2h0PWNvbnRhaW5lckRhdGEuaGVpZ2h0O2lmKGNvbnRhaW5lckRhdGEuaGVpZ2h0KmFzcGVjdFJhdGlvPmNvbnRhaW5lckRhdGEud2lkdGgpe2lmKHZpZXdNb2RlPT09Myl7Y2FudmFzV2lkdGg9Y29udGFpbmVyRGF0YS5oZWlnaHQqYXNwZWN0UmF0aW99ZWxzZXtjYW52YXNIZWlnaHQ9Y29udGFpbmVyRGF0YS53aWR0aC9hc3BlY3RSYXRpb319ZWxzZSBpZih2aWV3TW9kZT09PTMpe2NhbnZhc0hlaWdodD1jb250YWluZXJEYXRhLndpZHRoL2FzcGVjdFJhdGlvfWVsc2V7Y2FudmFzV2lkdGg9Y29udGFpbmVyRGF0YS5oZWlnaHQqYXNwZWN0UmF0aW99dmFyIGNhbnZhc0RhdGE9e2FzcGVjdFJhdGlvOmFzcGVjdFJhdGlvLG5hdHVyYWxXaWR0aDpuYXR1cmFsV2lkdGgsbmF0dXJhbEhlaWdodDpuYXR1cmFsSGVpZ2h0LHdpZHRoOmNhbnZhc1dpZHRoLGhlaWdodDpjYW52YXNIZWlnaHR9O2NhbnZhc0RhdGEubGVmdD0oY29udGFpbmVyRGF0YS53aWR0aC1jYW52YXNXaWR0aCkvMjtjYW52YXNEYXRhLnRvcD0oY29udGFpbmVyRGF0YS5oZWlnaHQtY2FudmFzSGVpZ2h0KS8yO2NhbnZhc0RhdGEub2xkTGVmdD1jYW52YXNEYXRhLmxlZnQ7Y2FudmFzRGF0YS5vbGRUb3A9Y2FudmFzRGF0YS50b3A7dGhpcy5jYW52YXNEYXRhPWNhbnZhc0RhdGE7dGhpcy5saW1pdGVkPXZpZXdNb2RlPT09MXx8dmlld01vZGU9PT0yO3RoaXMubGltaXRDYW52YXModHJ1ZSx0cnVlKTt0aGlzLmluaXRpYWxJbWFnZURhdGE9YXNzaWduKHt9LGltYWdlRGF0YSk7dGhpcy5pbml0aWFsQ2FudmFzRGF0YT1hc3NpZ24oe30sY2FudmFzRGF0YSl9LGxpbWl0Q2FudmFzOmZ1bmN0aW9uIGxpbWl0Q2FudmFzKHNpemVMaW1pdGVkLHBvc2l0aW9uTGltaXRlZCl7dmFyIG9wdGlvbnM9dGhpcy5vcHRpb25zLGNvbnRhaW5lckRhdGE9dGhpcy5jb250YWluZXJEYXRhLGNhbnZhc0RhdGE9dGhpcy5jYW52YXNEYXRhLGNyb3BCb3hEYXRhPXRoaXMuY3JvcEJveERhdGE7dmFyIHZpZXdNb2RlPW9wdGlvbnMudmlld01vZGU7dmFyIGFzcGVjdFJhdGlvPWNhbnZhc0RhdGEuYXNwZWN0UmF0aW87dmFyIGNyb3BwZWQ9dGhpcy5jcm9wcGVkJiZjcm9wQm94RGF0YTtpZihzaXplTGltaXRlZCl7dmFyIG1pbkNhbnZhc1dpZHRoPU51bWJlcihvcHRpb25zLm1pbkNhbnZhc1dpZHRoKXx8MDt2YXIgbWluQ2FudmFzSGVpZ2h0PU51bWJlcihvcHRpb25zLm1pbkNhbnZhc0hlaWdodCl8fDA7aWYodmlld01vZGU+MSl7bWluQ2FudmFzV2lkdGg9TWF0aC5tYXgobWluQ2FudmFzV2lkdGgsY29udGFpbmVyRGF0YS53aWR0aCk7bWluQ2FudmFzSGVpZ2h0PU1hdGgubWF4KG1pbkNhbnZhc0hlaWdodCxjb250YWluZXJEYXRhLmhlaWdodCk7aWYodmlld01vZGU9PT0zKXtpZihtaW5DYW52YXNIZWlnaHQqYXNwZWN0UmF0aW8+bWluQ2FudmFzV2lkdGgpe21pbkNhbnZhc1dpZHRoPW1pbkNhbnZhc0hlaWdodCphc3BlY3RSYXRpb31lbHNle21pbkNhbnZhc0hlaWdodD1taW5DYW52YXNXaWR0aC9hc3BlY3RSYXRpb319fWVsc2UgaWYodmlld01vZGU+MCl7aWYobWluQ2FudmFzV2lkdGgpe21pbkNhbnZhc1dpZHRoPU1hdGgubWF4KG1pbkNhbnZhc1dpZHRoLGNyb3BwZWQ/Y3JvcEJveERhdGEud2lkdGg6MCl9ZWxzZSBpZihtaW5DYW52YXNIZWlnaHQpe21pbkNhbnZhc0hlaWdodD1NYXRoLm1heChtaW5DYW52YXNIZWlnaHQsY3JvcHBlZD9jcm9wQm94RGF0YS5oZWlnaHQ6MCl9ZWxzZSBpZihjcm9wcGVkKXttaW5DYW52YXNXaWR0aD1jcm9wQm94RGF0YS53aWR0aDttaW5DYW52YXNIZWlnaHQ9Y3JvcEJveERhdGEuaGVpZ2h0O2lmKG1pbkNhbnZhc0hlaWdodCphc3BlY3RSYXRpbz5taW5DYW52YXNXaWR0aCl7bWluQ2FudmFzV2lkdGg9bWluQ2FudmFzSGVpZ2h0KmFzcGVjdFJhdGlvfWVsc2V7bWluQ2FudmFzSGVpZ2h0PW1pbkNhbnZhc1dpZHRoL2FzcGVjdFJhdGlvfX19dmFyIF9nZXRBZGp1c3RlZFNpemVzPWdldEFkanVzdGVkU2l6ZXMoe2FzcGVjdFJhdGlvOmFzcGVjdFJhdGlvLHdpZHRoOm1pbkNhbnZhc1dpZHRoLGhlaWdodDptaW5DYW52YXNIZWlnaHR9KTttaW5DYW52YXNXaWR0aD1fZ2V0QWRqdXN0ZWRTaXplcy53aWR0aDttaW5DYW52YXNIZWlnaHQ9X2dldEFkanVzdGVkU2l6ZXMuaGVpZ2h0O2NhbnZhc0RhdGEubWluV2lkdGg9bWluQ2FudmFzV2lkdGg7Y2FudmFzRGF0YS5taW5IZWlnaHQ9bWluQ2FudmFzSGVpZ2h0O2NhbnZhc0RhdGEubWF4V2lkdGg9SW5maW5pdHk7Y2FudmFzRGF0YS5tYXhIZWlnaHQ9SW5maW5pdHl9aWYocG9zaXRpb25MaW1pdGVkKXtpZih2aWV3TW9kZT4oY3JvcHBlZD8wOjEpKXt2YXIgbmV3Q2FudmFzTGVmdD1jb250YWluZXJEYXRhLndpZHRoLWNhbnZhc0RhdGEud2lkdGg7dmFyIG5ld0NhbnZhc1RvcD1jb250YWluZXJEYXRhLmhlaWdodC1jYW52YXNEYXRhLmhlaWdodDtjYW52YXNEYXRhLm1pbkxlZnQ9TWF0aC5taW4oMCxuZXdDYW52YXNMZWZ0KTtjYW52YXNEYXRhLm1pblRvcD1NYXRoLm1pbigwLG5ld0NhbnZhc1RvcCk7Y2FudmFzRGF0YS5tYXhMZWZ0PU1hdGgubWF4KDAsbmV3Q2FudmFzTGVmdCk7Y2FudmFzRGF0YS5tYXhUb3A9TWF0aC5tYXgoMCxuZXdDYW52YXNUb3ApO2lmKGNyb3BwZWQmJnRoaXMubGltaXRlZCl7Y2FudmFzRGF0YS5taW5MZWZ0PU1hdGgubWluKGNyb3BCb3hEYXRhLmxlZnQsY3JvcEJveERhdGEubGVmdCsoY3JvcEJveERhdGEud2lkdGgtY2FudmFzRGF0YS53aWR0aCkpO2NhbnZhc0RhdGEubWluVG9wPU1hdGgubWluKGNyb3BCb3hEYXRhLnRvcCxjcm9wQm94RGF0YS50b3ArKGNyb3BCb3hEYXRhLmhlaWdodC1jYW52YXNEYXRhLmhlaWdodCkpO2NhbnZhc0RhdGEubWF4TGVmdD1jcm9wQm94RGF0YS5sZWZ0O2NhbnZhc0RhdGEubWF4VG9wPWNyb3BCb3hEYXRhLnRvcDtpZih2aWV3TW9kZT09PTIpe2lmKGNhbnZhc0RhdGEud2lkdGg+PWNvbnRhaW5lckRhdGEud2lkdGgpe2NhbnZhc0RhdGEubWluTGVmdD1NYXRoLm1pbigwLG5ld0NhbnZhc0xlZnQpO2NhbnZhc0RhdGEubWF4TGVmdD1NYXRoLm1heCgwLG5ld0NhbnZhc0xlZnQpfWlmKGNhbnZhc0RhdGEuaGVpZ2h0Pj1jb250YWluZXJEYXRhLmhlaWdodCl7Y2FudmFzRGF0YS5taW5Ub3A9TWF0aC5taW4oMCxuZXdDYW52YXNUb3ApO2NhbnZhc0RhdGEubWF4VG9wPU1hdGgubWF4KDAsbmV3Q2FudmFzVG9wKX19fX1lbHNle2NhbnZhc0RhdGEubWluTGVmdD0tY2FudmFzRGF0YS53aWR0aDtjYW52YXNEYXRhLm1pblRvcD0tY2FudmFzRGF0YS5oZWlnaHQ7Y2FudmFzRGF0YS5tYXhMZWZ0PWNvbnRhaW5lckRhdGEud2lkdGg7Y2FudmFzRGF0YS5tYXhUb3A9Y29udGFpbmVyRGF0YS5oZWlnaHR9fX0scmVuZGVyQ2FudmFzOmZ1bmN0aW9uIHJlbmRlckNhbnZhcyhjaGFuZ2VkLHRyYW5zZm9ybWVkKXt2YXIgY2FudmFzRGF0YT10aGlzLmNhbnZhc0RhdGEsaW1hZ2VEYXRhPXRoaXMuaW1hZ2VEYXRhO2lmKHRyYW5zZm9ybWVkKXt2YXIgX2dldFJvdGF0ZWRTaXplcz1nZXRSb3RhdGVkU2l6ZXMoe3dpZHRoOmltYWdlRGF0YS5uYXR1cmFsV2lkdGgqTWF0aC5hYnMoaW1hZ2VEYXRhLnNjYWxlWHx8MSksaGVpZ2h0OmltYWdlRGF0YS5uYXR1cmFsSGVpZ2h0Kk1hdGguYWJzKGltYWdlRGF0YS5zY2FsZVl8fDEpLGRlZ3JlZTppbWFnZURhdGEucm90YXRlfHwwfSksbmF0dXJhbFdpZHRoPV9nZXRSb3RhdGVkU2l6ZXMud2lkdGgsbmF0dXJhbEhlaWdodD1fZ2V0Um90YXRlZFNpemVzLmhlaWdodDt2YXIgd2lkdGg9Y2FudmFzRGF0YS53aWR0aCoobmF0dXJhbFdpZHRoL2NhbnZhc0RhdGEubmF0dXJhbFdpZHRoKTt2YXIgaGVpZ2h0PWNhbnZhc0RhdGEuaGVpZ2h0KihuYXR1cmFsSGVpZ2h0L2NhbnZhc0RhdGEubmF0dXJhbEhlaWdodCk7Y2FudmFzRGF0YS5sZWZ0LT0od2lkdGgtY2FudmFzRGF0YS53aWR0aCkvMjtjYW52YXNEYXRhLnRvcC09KGhlaWdodC1jYW52YXNEYXRhLmhlaWdodCkvMjtjYW52YXNEYXRhLndpZHRoPXdpZHRoO2NhbnZhc0RhdGEuaGVpZ2h0PWhlaWdodDtjYW52YXNEYXRhLmFzcGVjdFJhdGlvPW5hdHVyYWxXaWR0aC9uYXR1cmFsSGVpZ2h0O2NhbnZhc0RhdGEubmF0dXJhbFdpZHRoPW5hdHVyYWxXaWR0aDtjYW52YXNEYXRhLm5hdHVyYWxIZWlnaHQ9bmF0dXJhbEhlaWdodDt0aGlzLmxpbWl0Q2FudmFzKHRydWUsZmFsc2UpfWlmKGNhbnZhc0RhdGEud2lkdGg+Y2FudmFzRGF0YS5tYXhXaWR0aHx8Y2FudmFzRGF0YS53aWR0aDxjYW52YXNEYXRhLm1pbldpZHRoKXtjYW52YXNEYXRhLmxlZnQ9Y2FudmFzRGF0YS5vbGRMZWZ0fWlmKGNhbnZhc0RhdGEuaGVpZ2h0PmNhbnZhc0RhdGEubWF4SGVpZ2h0fHxjYW52YXNEYXRhLmhlaWdodDxjYW52YXNEYXRhLm1pbkhlaWdodCl7Y2FudmFzRGF0YS50b3A9Y2FudmFzRGF0YS5vbGRUb3B9Y2FudmFzRGF0YS53aWR0aD1NYXRoLm1pbihNYXRoLm1heChjYW52YXNEYXRhLndpZHRoLGNhbnZhc0RhdGEubWluV2lkdGgpLGNhbnZhc0RhdGEubWF4V2lkdGgpO2NhbnZhc0RhdGEuaGVpZ2h0PU1hdGgubWluKE1hdGgubWF4KGNhbnZhc0RhdGEuaGVpZ2h0LGNhbnZhc0RhdGEubWluSGVpZ2h0KSxjYW52YXNEYXRhLm1heEhlaWdodCk7dGhpcy5saW1pdENhbnZhcyhmYWxzZSx0cnVlKTtjYW52YXNEYXRhLmxlZnQ9TWF0aC5taW4oTWF0aC5tYXgoY2FudmFzRGF0YS5sZWZ0LGNhbnZhc0RhdGEubWluTGVmdCksY2FudmFzRGF0YS5tYXhMZWZ0KTtjYW52YXNEYXRhLnRvcD1NYXRoLm1pbihNYXRoLm1heChjYW52YXNEYXRhLnRvcCxjYW52YXNEYXRhLm1pblRvcCksY2FudmFzRGF0YS5tYXhUb3ApO2NhbnZhc0RhdGEub2xkTGVmdD1jYW52YXNEYXRhLmxlZnQ7Y2FudmFzRGF0YS5vbGRUb3A9Y2FudmFzRGF0YS50b3A7c2V0U3R5bGUodGhpcy5jYW52YXMsYXNzaWduKHt3aWR0aDpjYW52YXNEYXRhLndpZHRoLGhlaWdodDpjYW52YXNEYXRhLmhlaWdodH0sZ2V0VHJhbnNmb3Jtcyh7dHJhbnNsYXRlWDpjYW52YXNEYXRhLmxlZnQsdHJhbnNsYXRlWTpjYW52YXNEYXRhLnRvcH0pKSk7dGhpcy5yZW5kZXJJbWFnZShjaGFuZ2VkKTtpZih0aGlzLmNyb3BwZWQmJnRoaXMubGltaXRlZCl7dGhpcy5saW1pdENyb3BCb3godHJ1ZSx0cnVlKX19LHJlbmRlckltYWdlOmZ1bmN0aW9uIHJlbmRlckltYWdlKGNoYW5nZWQpe3ZhciBjYW52YXNEYXRhPXRoaXMuY2FudmFzRGF0YSxpbWFnZURhdGE9dGhpcy5pbWFnZURhdGE7dmFyIHdpZHRoPWltYWdlRGF0YS5uYXR1cmFsV2lkdGgqKGNhbnZhc0RhdGEud2lkdGgvY2FudmFzRGF0YS5uYXR1cmFsV2lkdGgpO3ZhciBoZWlnaHQ9aW1hZ2VEYXRhLm5hdHVyYWxIZWlnaHQqKGNhbnZhc0RhdGEuaGVpZ2h0L2NhbnZhc0RhdGEubmF0dXJhbEhlaWdodCk7YXNzaWduKGltYWdlRGF0YSx7d2lkdGg6d2lkdGgsaGVpZ2h0OmhlaWdodCxsZWZ0OihjYW52YXNEYXRhLndpZHRoLXdpZHRoKS8yLHRvcDooY2FudmFzRGF0YS5oZWlnaHQtaGVpZ2h0KS8yfSk7c2V0U3R5bGUodGhpcy5pbWFnZSxhc3NpZ24oe3dpZHRoOmltYWdlRGF0YS53aWR0aCxoZWlnaHQ6aW1hZ2VEYXRhLmhlaWdodH0sZ2V0VHJhbnNmb3Jtcyhhc3NpZ24oe3RyYW5zbGF0ZVg6aW1hZ2VEYXRhLmxlZnQsdHJhbnNsYXRlWTppbWFnZURhdGEudG9wfSxpbWFnZURhdGEpKSkpO2lmKGNoYW5nZWQpe3RoaXMub3V0cHV0KCl9fSxpbml0Q3JvcEJveDpmdW5jdGlvbiBpbml0Q3JvcEJveCgpe3ZhciBvcHRpb25zPXRoaXMub3B0aW9ucyxjYW52YXNEYXRhPXRoaXMuY2FudmFzRGF0YTt2YXIgYXNwZWN0UmF0aW89b3B0aW9ucy5hc3BlY3RSYXRpb3x8b3B0aW9ucy5pbml0aWFsQXNwZWN0UmF0aW87dmFyIGF1dG9Dcm9wQXJlYT1OdW1iZXIob3B0aW9ucy5hdXRvQ3JvcEFyZWEpfHwuODt2YXIgY3JvcEJveERhdGE9e3dpZHRoOmNhbnZhc0RhdGEud2lkdGgsaGVpZ2h0OmNhbnZhc0RhdGEuaGVpZ2h0fTtpZihhc3BlY3RSYXRpbyl7aWYoY2FudmFzRGF0YS5oZWlnaHQqYXNwZWN0UmF0aW8+Y2FudmFzRGF0YS53aWR0aCl7Y3JvcEJveERhdGEuaGVpZ2h0PWNyb3BCb3hEYXRhLndpZHRoL2FzcGVjdFJhdGlvfWVsc2V7Y3JvcEJveERhdGEud2lkdGg9Y3JvcEJveERhdGEuaGVpZ2h0KmFzcGVjdFJhdGlvfX10aGlzLmNyb3BCb3hEYXRhPWNyb3BCb3hEYXRhO3RoaXMubGltaXRDcm9wQm94KHRydWUsdHJ1ZSk7Y3JvcEJveERhdGEud2lkdGg9TWF0aC5taW4oTWF0aC5tYXgoY3JvcEJveERhdGEud2lkdGgsY3JvcEJveERhdGEubWluV2lkdGgpLGNyb3BCb3hEYXRhLm1heFdpZHRoKTtjcm9wQm94RGF0YS5oZWlnaHQ9TWF0aC5taW4oTWF0aC5tYXgoY3JvcEJveERhdGEuaGVpZ2h0LGNyb3BCb3hEYXRhLm1pbkhlaWdodCksY3JvcEJveERhdGEubWF4SGVpZ2h0KTtjcm9wQm94RGF0YS53aWR0aD1NYXRoLm1heChjcm9wQm94RGF0YS5taW5XaWR0aCxjcm9wQm94RGF0YS53aWR0aCphdXRvQ3JvcEFyZWEpO2Nyb3BCb3hEYXRhLmhlaWdodD1NYXRoLm1heChjcm9wQm94RGF0YS5taW5IZWlnaHQsY3JvcEJveERhdGEuaGVpZ2h0KmF1dG9Dcm9wQXJlYSk7Y3JvcEJveERhdGEubGVmdD1jYW52YXNEYXRhLmxlZnQrKGNhbnZhc0RhdGEud2lkdGgtY3JvcEJveERhdGEud2lkdGgpLzI7Y3JvcEJveERhdGEudG9wPWNhbnZhc0RhdGEudG9wKyhjYW52YXNEYXRhLmhlaWdodC1jcm9wQm94RGF0YS5oZWlnaHQpLzI7Y3JvcEJveERhdGEub2xkTGVmdD1jcm9wQm94RGF0YS5sZWZ0O2Nyb3BCb3hEYXRhLm9sZFRvcD1jcm9wQm94RGF0YS50b3A7dGhpcy5pbml0aWFsQ3JvcEJveERhdGE9YXNzaWduKHt9LGNyb3BCb3hEYXRhKX0sbGltaXRDcm9wQm94OmZ1bmN0aW9uIGxpbWl0Q3JvcEJveChzaXplTGltaXRlZCxwb3NpdGlvbkxpbWl0ZWQpe3ZhciBvcHRpb25zPXRoaXMub3B0aW9ucyxjb250YWluZXJEYXRhPXRoaXMuY29udGFpbmVyRGF0YSxjYW52YXNEYXRhPXRoaXMuY2FudmFzRGF0YSxjcm9wQm94RGF0YT10aGlzLmNyb3BCb3hEYXRhLGxpbWl0ZWQ9dGhpcy5saW1pdGVkO3ZhciBhc3BlY3RSYXRpbz1vcHRpb25zLmFzcGVjdFJhdGlvO2lmKHNpemVMaW1pdGVkKXt2YXIgbWluQ3JvcEJveFdpZHRoPU51bWJlcihvcHRpb25zLm1pbkNyb3BCb3hXaWR0aCl8fDA7dmFyIG1pbkNyb3BCb3hIZWlnaHQ9TnVtYmVyKG9wdGlvbnMubWluQ3JvcEJveEhlaWdodCl8fDA7dmFyIG1heENyb3BCb3hXaWR0aD1saW1pdGVkP01hdGgubWluKGNvbnRhaW5lckRhdGEud2lkdGgsY2FudmFzRGF0YS53aWR0aCxjYW52YXNEYXRhLndpZHRoK2NhbnZhc0RhdGEubGVmdCxjb250YWluZXJEYXRhLndpZHRoLWNhbnZhc0RhdGEubGVmdCk6Y29udGFpbmVyRGF0YS53aWR0aDt2YXIgbWF4Q3JvcEJveEhlaWdodD1saW1pdGVkP01hdGgubWluKGNvbnRhaW5lckRhdGEuaGVpZ2h0LGNhbnZhc0RhdGEuaGVpZ2h0LGNhbnZhc0RhdGEuaGVpZ2h0K2NhbnZhc0RhdGEudG9wLGNvbnRhaW5lckRhdGEuaGVpZ2h0LWNhbnZhc0RhdGEudG9wKTpjb250YWluZXJEYXRhLmhlaWdodDttaW5Dcm9wQm94V2lkdGg9TWF0aC5taW4obWluQ3JvcEJveFdpZHRoLGNvbnRhaW5lckRhdGEud2lkdGgpO21pbkNyb3BCb3hIZWlnaHQ9TWF0aC5taW4obWluQ3JvcEJveEhlaWdodCxjb250YWluZXJEYXRhLmhlaWdodCk7aWYoYXNwZWN0UmF0aW8pe2lmKG1pbkNyb3BCb3hXaWR0aCYmbWluQ3JvcEJveEhlaWdodCl7aWYobWluQ3JvcEJveEhlaWdodCphc3BlY3RSYXRpbz5taW5Dcm9wQm94V2lkdGgpe21pbkNyb3BCb3hIZWlnaHQ9bWluQ3JvcEJveFdpZHRoL2FzcGVjdFJhdGlvfWVsc2V7bWluQ3JvcEJveFdpZHRoPW1pbkNyb3BCb3hIZWlnaHQqYXNwZWN0UmF0aW99fWVsc2UgaWYobWluQ3JvcEJveFdpZHRoKXttaW5Dcm9wQm94SGVpZ2h0PW1pbkNyb3BCb3hXaWR0aC9hc3BlY3RSYXRpb31lbHNlIGlmKG1pbkNyb3BCb3hIZWlnaHQpe21pbkNyb3BCb3hXaWR0aD1taW5Dcm9wQm94SGVpZ2h0KmFzcGVjdFJhdGlvfWlmKG1heENyb3BCb3hIZWlnaHQqYXNwZWN0UmF0aW8+bWF4Q3JvcEJveFdpZHRoKXttYXhDcm9wQm94SGVpZ2h0PW1heENyb3BCb3hXaWR0aC9hc3BlY3RSYXRpb31lbHNle21heENyb3BCb3hXaWR0aD1tYXhDcm9wQm94SGVpZ2h0KmFzcGVjdFJhdGlvfX1jcm9wQm94RGF0YS5taW5XaWR0aD1NYXRoLm1pbihtaW5Dcm9wQm94V2lkdGgsbWF4Q3JvcEJveFdpZHRoKTtjcm9wQm94RGF0YS5taW5IZWlnaHQ9TWF0aC5taW4obWluQ3JvcEJveEhlaWdodCxtYXhDcm9wQm94SGVpZ2h0KTtjcm9wQm94RGF0YS5tYXhXaWR0aD1tYXhDcm9wQm94V2lkdGg7Y3JvcEJveERhdGEubWF4SGVpZ2h0PW1heENyb3BCb3hIZWlnaHR9aWYocG9zaXRpb25MaW1pdGVkKXtpZihsaW1pdGVkKXtjcm9wQm94RGF0YS5taW5MZWZ0PU1hdGgubWF4KDAsY2FudmFzRGF0YS5sZWZ0KTtjcm9wQm94RGF0YS5taW5Ub3A9TWF0aC5tYXgoMCxjYW52YXNEYXRhLnRvcCk7Y3JvcEJveERhdGEubWF4TGVmdD1NYXRoLm1pbihjb250YWluZXJEYXRhLndpZHRoLGNhbnZhc0RhdGEubGVmdCtjYW52YXNEYXRhLndpZHRoKS1jcm9wQm94RGF0YS53aWR0aDtjcm9wQm94RGF0YS5tYXhUb3A9TWF0aC5taW4oY29udGFpbmVyRGF0YS5oZWlnaHQsY2FudmFzRGF0YS50b3ArY2FudmFzRGF0YS5oZWlnaHQpLWNyb3BCb3hEYXRhLmhlaWdodH1lbHNle2Nyb3BCb3hEYXRhLm1pbkxlZnQ9MDtjcm9wQm94RGF0YS5taW5Ub3A9MDtjcm9wQm94RGF0YS5tYXhMZWZ0PWNvbnRhaW5lckRhdGEud2lkdGgtY3JvcEJveERhdGEud2lkdGg7Y3JvcEJveERhdGEubWF4VG9wPWNvbnRhaW5lckRhdGEuaGVpZ2h0LWNyb3BCb3hEYXRhLmhlaWdodH19fSxyZW5kZXJDcm9wQm94OmZ1bmN0aW9uIHJlbmRlckNyb3BCb3goKXt2YXIgb3B0aW9ucz10aGlzLm9wdGlvbnMsY29udGFpbmVyRGF0YT10aGlzLmNvbnRhaW5lckRhdGEsY3JvcEJveERhdGE9dGhpcy5jcm9wQm94RGF0YTtpZihjcm9wQm94RGF0YS53aWR0aD5jcm9wQm94RGF0YS5tYXhXaWR0aHx8Y3JvcEJveERhdGEud2lkdGg8Y3JvcEJveERhdGEubWluV2lkdGgpe2Nyb3BCb3hEYXRhLmxlZnQ9Y3JvcEJveERhdGEub2xkTGVmdH1pZihjcm9wQm94RGF0YS5oZWlnaHQ+Y3JvcEJveERhdGEubWF4SGVpZ2h0fHxjcm9wQm94RGF0YS5oZWlnaHQ8Y3JvcEJveERhdGEubWluSGVpZ2h0KXtjcm9wQm94RGF0YS50b3A9Y3JvcEJveERhdGEub2xkVG9wfWNyb3BCb3hEYXRhLndpZHRoPU1hdGgubWluKE1hdGgubWF4KGNyb3BCb3hEYXRhLndpZHRoLGNyb3BCb3hEYXRhLm1pbldpZHRoKSxjcm9wQm94RGF0YS5tYXhXaWR0aCk7Y3JvcEJveERhdGEuaGVpZ2h0PU1hdGgubWluKE1hdGgubWF4KGNyb3BCb3hEYXRhLmhlaWdodCxjcm9wQm94RGF0YS5taW5IZWlnaHQpLGNyb3BCb3hEYXRhLm1heEhlaWdodCk7dGhpcy5saW1pdENyb3BCb3goZmFsc2UsdHJ1ZSk7Y3JvcEJveERhdGEubGVmdD1NYXRoLm1pbihNYXRoLm1heChjcm9wQm94RGF0YS5sZWZ0LGNyb3BCb3hEYXRhLm1pbkxlZnQpLGNyb3BCb3hEYXRhLm1heExlZnQpO2Nyb3BCb3hEYXRhLnRvcD1NYXRoLm1pbihNYXRoLm1heChjcm9wQm94RGF0YS50b3AsY3JvcEJveERhdGEubWluVG9wKSxjcm9wQm94RGF0YS5tYXhUb3ApO2Nyb3BCb3hEYXRhLm9sZExlZnQ9Y3JvcEJveERhdGEubGVmdDtjcm9wQm94RGF0YS5vbGRUb3A9Y3JvcEJveERhdGEudG9wO2lmKG9wdGlvbnMubW92YWJsZSYmb3B0aW9ucy5jcm9wQm94TW92YWJsZSl7c2V0RGF0YSh0aGlzLmZhY2UsREFUQV9BQ1RJT04sY3JvcEJveERhdGEud2lkdGg+PWNvbnRhaW5lckRhdGEud2lkdGgmJmNyb3BCb3hEYXRhLmhlaWdodD49Y29udGFpbmVyRGF0YS5oZWlnaHQ/QUNUSU9OX01PVkU6QUNUSU9OX0FMTCl9c2V0U3R5bGUodGhpcy5jcm9wQm94LGFzc2lnbih7d2lkdGg6Y3JvcEJveERhdGEud2lkdGgsaGVpZ2h0OmNyb3BCb3hEYXRhLmhlaWdodH0sZ2V0VHJhbnNmb3Jtcyh7dHJhbnNsYXRlWDpjcm9wQm94RGF0YS5sZWZ0LHRyYW5zbGF0ZVk6Y3JvcEJveERhdGEudG9wfSkpKTtpZih0aGlzLmNyb3BwZWQmJnRoaXMubGltaXRlZCl7dGhpcy5saW1pdENhbnZhcyh0cnVlLHRydWUpfWlmKCF0aGlzLmRpc2FibGVkKXt0aGlzLm91dHB1dCgpfX0sb3V0cHV0OmZ1bmN0aW9uIG91dHB1dCgpe3RoaXMucHJldmlldygpO2Rpc3BhdGNoRXZlbnQodGhpcy5lbGVtZW50LEVWRU5UX0NST1AsdGhpcy5nZXREYXRhKCkpfX07dmFyIHByZXZpZXc9e2luaXRQcmV2aWV3OmZ1bmN0aW9uIGluaXRQcmV2aWV3KCl7dmFyIGVsZW1lbnQ9dGhpcy5lbGVtZW50LGNyb3NzT3JpZ2luPXRoaXMuY3Jvc3NPcmlnaW47dmFyIHByZXZpZXc9dGhpcy5vcHRpb25zLnByZXZpZXc7dmFyIHVybD1jcm9zc09yaWdpbj90aGlzLmNyb3NzT3JpZ2luVXJsOnRoaXMudXJsO3ZhciBhbHQ9ZWxlbWVudC5hbHR8fFwiVGhlIGltYWdlIHRvIHByZXZpZXdcIjt2YXIgaW1hZ2U9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtpZihjcm9zc09yaWdpbil7aW1hZ2UuY3Jvc3NPcmlnaW49Y3Jvc3NPcmlnaW59aW1hZ2Uuc3JjPXVybDtpbWFnZS5hbHQ9YWx0O3RoaXMudmlld0JveC5hcHBlbmRDaGlsZChpbWFnZSk7dGhpcy52aWV3Qm94SW1hZ2U9aW1hZ2U7aWYoIXByZXZpZXcpe3JldHVybn12YXIgcHJldmlld3M9cHJldmlldztpZih0eXBlb2YgcHJldmlldz09PVwic3RyaW5nXCIpe3ByZXZpZXdzPWVsZW1lbnQub3duZXJEb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHByZXZpZXcpfWVsc2UgaWYocHJldmlldy5xdWVyeVNlbGVjdG9yKXtwcmV2aWV3cz1bcHJldmlld119dGhpcy5wcmV2aWV3cz1wcmV2aWV3cztmb3JFYWNoKHByZXZpZXdzLGZ1bmN0aW9uKGVsKXt2YXIgaW1nPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7c2V0RGF0YShlbCxEQVRBX1BSRVZJRVcse3dpZHRoOmVsLm9mZnNldFdpZHRoLGhlaWdodDplbC5vZmZzZXRIZWlnaHQsaHRtbDplbC5pbm5lckhUTUx9KTtpZihjcm9zc09yaWdpbil7aW1nLmNyb3NzT3JpZ2luPWNyb3NzT3JpZ2lufWltZy5zcmM9dXJsO2ltZy5hbHQ9YWx0O2ltZy5zdHlsZS5jc3NUZXh0PVwiZGlzcGxheTpibG9jaztcIitcIndpZHRoOjEwMCU7XCIrXCJoZWlnaHQ6YXV0bztcIitcIm1pbi13aWR0aDowIWltcG9ydGFudDtcIitcIm1pbi1oZWlnaHQ6MCFpbXBvcnRhbnQ7XCIrXCJtYXgtd2lkdGg6bm9uZSFpbXBvcnRhbnQ7XCIrXCJtYXgtaGVpZ2h0Om5vbmUhaW1wb3J0YW50O1wiKydpbWFnZS1vcmllbnRhdGlvbjowZGVnIWltcG9ydGFudDtcIic7ZWwuaW5uZXJIVE1MPVwiXCI7ZWwuYXBwZW5kQ2hpbGQoaW1nKX0pfSxyZXNldFByZXZpZXc6ZnVuY3Rpb24gcmVzZXRQcmV2aWV3KCl7Zm9yRWFjaCh0aGlzLnByZXZpZXdzLGZ1bmN0aW9uKGVsZW1lbnQpe3ZhciBkYXRhPWdldERhdGEoZWxlbWVudCxEQVRBX1BSRVZJRVcpO3NldFN0eWxlKGVsZW1lbnQse3dpZHRoOmRhdGEud2lkdGgsaGVpZ2h0OmRhdGEuaGVpZ2h0fSk7ZWxlbWVudC5pbm5lckhUTUw9ZGF0YS5odG1sO3JlbW92ZURhdGEoZWxlbWVudCxEQVRBX1BSRVZJRVcpfSl9LHByZXZpZXc6ZnVuY3Rpb24gcHJldmlldygpe3ZhciBpbWFnZURhdGE9dGhpcy5pbWFnZURhdGEsY2FudmFzRGF0YT10aGlzLmNhbnZhc0RhdGEsY3JvcEJveERhdGE9dGhpcy5jcm9wQm94RGF0YTt2YXIgY3JvcEJveFdpZHRoPWNyb3BCb3hEYXRhLndpZHRoLGNyb3BCb3hIZWlnaHQ9Y3JvcEJveERhdGEuaGVpZ2h0O3ZhciB3aWR0aD1pbWFnZURhdGEud2lkdGgsaGVpZ2h0PWltYWdlRGF0YS5oZWlnaHQ7dmFyIGxlZnQ9Y3JvcEJveERhdGEubGVmdC1jYW52YXNEYXRhLmxlZnQtaW1hZ2VEYXRhLmxlZnQ7dmFyIHRvcD1jcm9wQm94RGF0YS50b3AtY2FudmFzRGF0YS50b3AtaW1hZ2VEYXRhLnRvcDtpZighdGhpcy5jcm9wcGVkfHx0aGlzLmRpc2FibGVkKXtyZXR1cm59c2V0U3R5bGUodGhpcy52aWV3Qm94SW1hZ2UsYXNzaWduKHt3aWR0aDp3aWR0aCxoZWlnaHQ6aGVpZ2h0fSxnZXRUcmFuc2Zvcm1zKGFzc2lnbih7dHJhbnNsYXRlWDotbGVmdCx0cmFuc2xhdGVZOi10b3B9LGltYWdlRGF0YSkpKSk7Zm9yRWFjaCh0aGlzLnByZXZpZXdzLGZ1bmN0aW9uKGVsZW1lbnQpe3ZhciBkYXRhPWdldERhdGEoZWxlbWVudCxEQVRBX1BSRVZJRVcpO3ZhciBvcmlnaW5hbFdpZHRoPWRhdGEud2lkdGg7dmFyIG9yaWdpbmFsSGVpZ2h0PWRhdGEuaGVpZ2h0O3ZhciBuZXdXaWR0aD1vcmlnaW5hbFdpZHRoO3ZhciBuZXdIZWlnaHQ9b3JpZ2luYWxIZWlnaHQ7dmFyIHJhdGlvPTE7aWYoY3JvcEJveFdpZHRoKXtyYXRpbz1vcmlnaW5hbFdpZHRoL2Nyb3BCb3hXaWR0aDtuZXdIZWlnaHQ9Y3JvcEJveEhlaWdodCpyYXRpb31pZihjcm9wQm94SGVpZ2h0JiZuZXdIZWlnaHQ+b3JpZ2luYWxIZWlnaHQpe3JhdGlvPW9yaWdpbmFsSGVpZ2h0L2Nyb3BCb3hIZWlnaHQ7bmV3V2lkdGg9Y3JvcEJveFdpZHRoKnJhdGlvO25ld0hlaWdodD1vcmlnaW5hbEhlaWdodH1zZXRTdHlsZShlbGVtZW50LHt3aWR0aDpuZXdXaWR0aCxoZWlnaHQ6bmV3SGVpZ2h0fSk7c2V0U3R5bGUoZWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImltZ1wiKVswXSxhc3NpZ24oe3dpZHRoOndpZHRoKnJhdGlvLGhlaWdodDpoZWlnaHQqcmF0aW99LGdldFRyYW5zZm9ybXMoYXNzaWduKHt0cmFuc2xhdGVYOi1sZWZ0KnJhdGlvLHRyYW5zbGF0ZVk6LXRvcCpyYXRpb30saW1hZ2VEYXRhKSkpKX0pfX07dmFyIGV2ZW50cz17YmluZDpmdW5jdGlvbiBiaW5kKCl7dmFyIGVsZW1lbnQ9dGhpcy5lbGVtZW50LG9wdGlvbnM9dGhpcy5vcHRpb25zLGNyb3BwZXI9dGhpcy5jcm9wcGVyO2lmKGlzRnVuY3Rpb24ob3B0aW9ucy5jcm9wc3RhcnQpKXthZGRMaXN0ZW5lcihlbGVtZW50LEVWRU5UX0NST1BfU1RBUlQsb3B0aW9ucy5jcm9wc3RhcnQpfWlmKGlzRnVuY3Rpb24ob3B0aW9ucy5jcm9wbW92ZSkpe2FkZExpc3RlbmVyKGVsZW1lbnQsRVZFTlRfQ1JPUF9NT1ZFLG9wdGlvbnMuY3JvcG1vdmUpfWlmKGlzRnVuY3Rpb24ob3B0aW9ucy5jcm9wZW5kKSl7YWRkTGlzdGVuZXIoZWxlbWVudCxFVkVOVF9DUk9QX0VORCxvcHRpb25zLmNyb3BlbmQpfWlmKGlzRnVuY3Rpb24ob3B0aW9ucy5jcm9wKSl7YWRkTGlzdGVuZXIoZWxlbWVudCxFVkVOVF9DUk9QLG9wdGlvbnMuY3JvcCl9aWYoaXNGdW5jdGlvbihvcHRpb25zLnpvb20pKXthZGRMaXN0ZW5lcihlbGVtZW50LEVWRU5UX1pPT00sb3B0aW9ucy56b29tKX1hZGRMaXN0ZW5lcihjcm9wcGVyLEVWRU5UX1BPSU5URVJfRE9XTix0aGlzLm9uQ3JvcFN0YXJ0PXRoaXMuY3JvcFN0YXJ0LmJpbmQodGhpcykpO2lmKG9wdGlvbnMuem9vbWFibGUmJm9wdGlvbnMuem9vbU9uV2hlZWwpe2FkZExpc3RlbmVyKGNyb3BwZXIsRVZFTlRfV0hFRUwsdGhpcy5vbldoZWVsPXRoaXMud2hlZWwuYmluZCh0aGlzKSx7cGFzc2l2ZTpmYWxzZSxjYXB0dXJlOnRydWV9KX1pZihvcHRpb25zLnRvZ2dsZURyYWdNb2RlT25EYmxjbGljayl7YWRkTGlzdGVuZXIoY3JvcHBlcixFVkVOVF9EQkxDTElDSyx0aGlzLm9uRGJsY2xpY2s9dGhpcy5kYmxjbGljay5iaW5kKHRoaXMpKX1hZGRMaXN0ZW5lcihlbGVtZW50Lm93bmVyRG9jdW1lbnQsRVZFTlRfUE9JTlRFUl9NT1ZFLHRoaXMub25Dcm9wTW92ZT10aGlzLmNyb3BNb3ZlLmJpbmQodGhpcykpO2FkZExpc3RlbmVyKGVsZW1lbnQub3duZXJEb2N1bWVudCxFVkVOVF9QT0lOVEVSX1VQLHRoaXMub25Dcm9wRW5kPXRoaXMuY3JvcEVuZC5iaW5kKHRoaXMpKTtpZihvcHRpb25zLnJlc3BvbnNpdmUpe2FkZExpc3RlbmVyKHdpbmRvdyxFVkVOVF9SRVNJWkUsdGhpcy5vblJlc2l6ZT10aGlzLnJlc2l6ZS5iaW5kKHRoaXMpKX19LHVuYmluZDpmdW5jdGlvbiB1bmJpbmQoKXt2YXIgZWxlbWVudD10aGlzLmVsZW1lbnQsb3B0aW9ucz10aGlzLm9wdGlvbnMsY3JvcHBlcj10aGlzLmNyb3BwZXI7aWYoaXNGdW5jdGlvbihvcHRpb25zLmNyb3BzdGFydCkpe3JlbW92ZUxpc3RlbmVyKGVsZW1lbnQsRVZFTlRfQ1JPUF9TVEFSVCxvcHRpb25zLmNyb3BzdGFydCl9aWYoaXNGdW5jdGlvbihvcHRpb25zLmNyb3Btb3ZlKSl7cmVtb3ZlTGlzdGVuZXIoZWxlbWVudCxFVkVOVF9DUk9QX01PVkUsb3B0aW9ucy5jcm9wbW92ZSl9aWYoaXNGdW5jdGlvbihvcHRpb25zLmNyb3BlbmQpKXtyZW1vdmVMaXN0ZW5lcihlbGVtZW50LEVWRU5UX0NST1BfRU5ELG9wdGlvbnMuY3JvcGVuZCl9aWYoaXNGdW5jdGlvbihvcHRpb25zLmNyb3ApKXtyZW1vdmVMaXN0ZW5lcihlbGVtZW50LEVWRU5UX0NST1Asb3B0aW9ucy5jcm9wKX1pZihpc0Z1bmN0aW9uKG9wdGlvbnMuem9vbSkpe3JlbW92ZUxpc3RlbmVyKGVsZW1lbnQsRVZFTlRfWk9PTSxvcHRpb25zLnpvb20pfXJlbW92ZUxpc3RlbmVyKGNyb3BwZXIsRVZFTlRfUE9JTlRFUl9ET1dOLHRoaXMub25Dcm9wU3RhcnQpO2lmKG9wdGlvbnMuem9vbWFibGUmJm9wdGlvbnMuem9vbU9uV2hlZWwpe3JlbW92ZUxpc3RlbmVyKGNyb3BwZXIsRVZFTlRfV0hFRUwsdGhpcy5vbldoZWVsLHtwYXNzaXZlOmZhbHNlLGNhcHR1cmU6dHJ1ZX0pfWlmKG9wdGlvbnMudG9nZ2xlRHJhZ01vZGVPbkRibGNsaWNrKXtyZW1vdmVMaXN0ZW5lcihjcm9wcGVyLEVWRU5UX0RCTENMSUNLLHRoaXMub25EYmxjbGljayl9cmVtb3ZlTGlzdGVuZXIoZWxlbWVudC5vd25lckRvY3VtZW50LEVWRU5UX1BPSU5URVJfTU9WRSx0aGlzLm9uQ3JvcE1vdmUpO3JlbW92ZUxpc3RlbmVyKGVsZW1lbnQub3duZXJEb2N1bWVudCxFVkVOVF9QT0lOVEVSX1VQLHRoaXMub25Dcm9wRW5kKTtpZihvcHRpb25zLnJlc3BvbnNpdmUpe3JlbW92ZUxpc3RlbmVyKHdpbmRvdyxFVkVOVF9SRVNJWkUsdGhpcy5vblJlc2l6ZSl9fX07dmFyIGhhbmRsZXJzPXtyZXNpemU6ZnVuY3Rpb24gcmVzaXplKCl7dmFyIG9wdGlvbnM9dGhpcy5vcHRpb25zLGNvbnRhaW5lcj10aGlzLmNvbnRhaW5lcixjb250YWluZXJEYXRhPXRoaXMuY29udGFpbmVyRGF0YTt2YXIgbWluQ29udGFpbmVyV2lkdGg9TnVtYmVyKG9wdGlvbnMubWluQ29udGFpbmVyV2lkdGgpfHxNSU5fQ09OVEFJTkVSX1dJRFRIO3ZhciBtaW5Db250YWluZXJIZWlnaHQ9TnVtYmVyKG9wdGlvbnMubWluQ29udGFpbmVySGVpZ2h0KXx8TUlOX0NPTlRBSU5FUl9IRUlHSFQ7aWYodGhpcy5kaXNhYmxlZHx8Y29udGFpbmVyRGF0YS53aWR0aDw9bWluQ29udGFpbmVyV2lkdGh8fGNvbnRhaW5lckRhdGEuaGVpZ2h0PD1taW5Db250YWluZXJIZWlnaHQpe3JldHVybn12YXIgcmF0aW89Y29udGFpbmVyLm9mZnNldFdpZHRoL2NvbnRhaW5lckRhdGEud2lkdGg7aWYocmF0aW8hPT0xfHxjb250YWluZXIub2Zmc2V0SGVpZ2h0IT09Y29udGFpbmVyRGF0YS5oZWlnaHQpe3ZhciBjYW52YXNEYXRhO3ZhciBjcm9wQm94RGF0YTtpZihvcHRpb25zLnJlc3RvcmUpe2NhbnZhc0RhdGE9dGhpcy5nZXRDYW52YXNEYXRhKCk7Y3JvcEJveERhdGE9dGhpcy5nZXRDcm9wQm94RGF0YSgpfXRoaXMucmVuZGVyKCk7aWYob3B0aW9ucy5yZXN0b3JlKXt0aGlzLnNldENhbnZhc0RhdGEoZm9yRWFjaChjYW52YXNEYXRhLGZ1bmN0aW9uKG4saSl7Y2FudmFzRGF0YVtpXT1uKnJhdGlvfSkpO3RoaXMuc2V0Q3JvcEJveERhdGEoZm9yRWFjaChjcm9wQm94RGF0YSxmdW5jdGlvbihuLGkpe2Nyb3BCb3hEYXRhW2ldPW4qcmF0aW99KSl9fX0sZGJsY2xpY2s6ZnVuY3Rpb24gZGJsY2xpY2soKXtpZih0aGlzLmRpc2FibGVkfHx0aGlzLm9wdGlvbnMuZHJhZ01vZGU9PT1EUkFHX01PREVfTk9ORSl7cmV0dXJufXRoaXMuc2V0RHJhZ01vZGUoaGFzQ2xhc3ModGhpcy5kcmFnQm94LENMQVNTX0NST1ApP0RSQUdfTU9ERV9NT1ZFOkRSQUdfTU9ERV9DUk9QKX0sd2hlZWw6ZnVuY3Rpb24gd2hlZWwoZXZlbnQpe3ZhciBfdGhpcz10aGlzO3ZhciByYXRpbz1OdW1iZXIodGhpcy5vcHRpb25zLndoZWVsWm9vbVJhdGlvKXx8LjE7dmFyIGRlbHRhPTE7aWYodGhpcy5kaXNhYmxlZCl7cmV0dXJufWV2ZW50LnByZXZlbnREZWZhdWx0KCk7aWYodGhpcy53aGVlbGluZyl7cmV0dXJufXRoaXMud2hlZWxpbmc9dHJ1ZTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7X3RoaXMud2hlZWxpbmc9ZmFsc2V9LDUwKTtpZihldmVudC5kZWx0YVkpe2RlbHRhPWV2ZW50LmRlbHRhWT4wPzE6LTF9ZWxzZSBpZihldmVudC53aGVlbERlbHRhKXtkZWx0YT0tZXZlbnQud2hlZWxEZWx0YS8xMjB9ZWxzZSBpZihldmVudC5kZXRhaWwpe2RlbHRhPWV2ZW50LmRldGFpbD4wPzE6LTF9dGhpcy56b29tKC1kZWx0YSpyYXRpbyxldmVudCl9LGNyb3BTdGFydDpmdW5jdGlvbiBjcm9wU3RhcnQoZXZlbnQpe3ZhciBidXR0b25zPWV2ZW50LmJ1dHRvbnMsYnV0dG9uPWV2ZW50LmJ1dHRvbjtpZih0aGlzLmRpc2FibGVkfHwoZXZlbnQudHlwZT09PVwibW91c2Vkb3duXCJ8fGV2ZW50LnR5cGU9PT1cInBvaW50ZXJkb3duXCImJmV2ZW50LnBvaW50ZXJUeXBlPT09XCJtb3VzZVwiKSYmKGlzTnVtYmVyKGJ1dHRvbnMpJiZidXR0b25zIT09MXx8aXNOdW1iZXIoYnV0dG9uKSYmYnV0dG9uIT09MHx8ZXZlbnQuY3RybEtleSkpe3JldHVybn12YXIgb3B0aW9ucz10aGlzLm9wdGlvbnMscG9pbnRlcnM9dGhpcy5wb2ludGVyczt2YXIgYWN0aW9uO2lmKGV2ZW50LmNoYW5nZWRUb3VjaGVzKXtmb3JFYWNoKGV2ZW50LmNoYW5nZWRUb3VjaGVzLGZ1bmN0aW9uKHRvdWNoKXtwb2ludGVyc1t0b3VjaC5pZGVudGlmaWVyXT1nZXRQb2ludGVyKHRvdWNoKX0pfWVsc2V7cG9pbnRlcnNbZXZlbnQucG9pbnRlcklkfHwwXT1nZXRQb2ludGVyKGV2ZW50KX1pZihPYmplY3Qua2V5cyhwb2ludGVycykubGVuZ3RoPjEmJm9wdGlvbnMuem9vbWFibGUmJm9wdGlvbnMuem9vbU9uVG91Y2gpe2FjdGlvbj1BQ1RJT05fWk9PTX1lbHNle2FjdGlvbj1nZXREYXRhKGV2ZW50LnRhcmdldCxEQVRBX0FDVElPTil9aWYoIVJFR0VYUF9BQ1RJT05TLnRlc3QoYWN0aW9uKSl7cmV0dXJufWlmKGRpc3BhdGNoRXZlbnQodGhpcy5lbGVtZW50LEVWRU5UX0NST1BfU1RBUlQse29yaWdpbmFsRXZlbnQ6ZXZlbnQsYWN0aW9uOmFjdGlvbn0pPT09ZmFsc2Upe3JldHVybn1ldmVudC5wcmV2ZW50RGVmYXVsdCgpO3RoaXMuYWN0aW9uPWFjdGlvbjt0aGlzLmNyb3BwaW5nPWZhbHNlO2lmKGFjdGlvbj09PUFDVElPTl9DUk9QKXt0aGlzLmNyb3BwaW5nPXRydWU7YWRkQ2xhc3ModGhpcy5kcmFnQm94LENMQVNTX01PREFMKX19LGNyb3BNb3ZlOmZ1bmN0aW9uIGNyb3BNb3ZlKGV2ZW50KXt2YXIgYWN0aW9uPXRoaXMuYWN0aW9uO2lmKHRoaXMuZGlzYWJsZWR8fCFhY3Rpb24pe3JldHVybn12YXIgcG9pbnRlcnM9dGhpcy5wb2ludGVycztldmVudC5wcmV2ZW50RGVmYXVsdCgpO2lmKGRpc3BhdGNoRXZlbnQodGhpcy5lbGVtZW50LEVWRU5UX0NST1BfTU9WRSx7b3JpZ2luYWxFdmVudDpldmVudCxhY3Rpb246YWN0aW9ufSk9PT1mYWxzZSl7cmV0dXJufWlmKGV2ZW50LmNoYW5nZWRUb3VjaGVzKXtmb3JFYWNoKGV2ZW50LmNoYW5nZWRUb3VjaGVzLGZ1bmN0aW9uKHRvdWNoKXthc3NpZ24ocG9pbnRlcnNbdG91Y2guaWRlbnRpZmllcl18fHt9LGdldFBvaW50ZXIodG91Y2gsdHJ1ZSkpfSl9ZWxzZXthc3NpZ24ocG9pbnRlcnNbZXZlbnQucG9pbnRlcklkfHwwXXx8e30sZ2V0UG9pbnRlcihldmVudCx0cnVlKSl9dGhpcy5jaGFuZ2UoZXZlbnQpfSxjcm9wRW5kOmZ1bmN0aW9uIGNyb3BFbmQoZXZlbnQpe2lmKHRoaXMuZGlzYWJsZWQpe3JldHVybn12YXIgYWN0aW9uPXRoaXMuYWN0aW9uLHBvaW50ZXJzPXRoaXMucG9pbnRlcnM7aWYoZXZlbnQuY2hhbmdlZFRvdWNoZXMpe2ZvckVhY2goZXZlbnQuY2hhbmdlZFRvdWNoZXMsZnVuY3Rpb24odG91Y2gpe2RlbGV0ZSBwb2ludGVyc1t0b3VjaC5pZGVudGlmaWVyXX0pfWVsc2V7ZGVsZXRlIHBvaW50ZXJzW2V2ZW50LnBvaW50ZXJJZHx8MF19aWYoIWFjdGlvbil7cmV0dXJufWV2ZW50LnByZXZlbnREZWZhdWx0KCk7aWYoIU9iamVjdC5rZXlzKHBvaW50ZXJzKS5sZW5ndGgpe3RoaXMuYWN0aW9uPVwiXCJ9aWYodGhpcy5jcm9wcGluZyl7dGhpcy5jcm9wcGluZz1mYWxzZTt0b2dnbGVDbGFzcyh0aGlzLmRyYWdCb3gsQ0xBU1NfTU9EQUwsdGhpcy5jcm9wcGVkJiZ0aGlzLm9wdGlvbnMubW9kYWwpfWRpc3BhdGNoRXZlbnQodGhpcy5lbGVtZW50LEVWRU5UX0NST1BfRU5ELHtvcmlnaW5hbEV2ZW50OmV2ZW50LGFjdGlvbjphY3Rpb259KX19O3ZhciBjaGFuZ2U9e2NoYW5nZTpmdW5jdGlvbiBjaGFuZ2UoZXZlbnQpe3ZhciBvcHRpb25zPXRoaXMub3B0aW9ucyxjYW52YXNEYXRhPXRoaXMuY2FudmFzRGF0YSxjb250YWluZXJEYXRhPXRoaXMuY29udGFpbmVyRGF0YSxjcm9wQm94RGF0YT10aGlzLmNyb3BCb3hEYXRhLHBvaW50ZXJzPXRoaXMucG9pbnRlcnM7dmFyIGFjdGlvbj10aGlzLmFjdGlvbjt2YXIgYXNwZWN0UmF0aW89b3B0aW9ucy5hc3BlY3RSYXRpbzt2YXIgbGVmdD1jcm9wQm94RGF0YS5sZWZ0LHRvcD1jcm9wQm94RGF0YS50b3Asd2lkdGg9Y3JvcEJveERhdGEud2lkdGgsaGVpZ2h0PWNyb3BCb3hEYXRhLmhlaWdodDt2YXIgcmlnaHQ9bGVmdCt3aWR0aDt2YXIgYm90dG9tPXRvcCtoZWlnaHQ7dmFyIG1pbkxlZnQ9MDt2YXIgbWluVG9wPTA7dmFyIG1heFdpZHRoPWNvbnRhaW5lckRhdGEud2lkdGg7dmFyIG1heEhlaWdodD1jb250YWluZXJEYXRhLmhlaWdodDt2YXIgcmVuZGVyYWJsZT10cnVlO3ZhciBvZmZzZXQ7aWYoIWFzcGVjdFJhdGlvJiZldmVudC5zaGlmdEtleSl7YXNwZWN0UmF0aW89d2lkdGgmJmhlaWdodD93aWR0aC9oZWlnaHQ6MX1pZih0aGlzLmxpbWl0ZWQpe21pbkxlZnQ9Y3JvcEJveERhdGEubWluTGVmdDttaW5Ub3A9Y3JvcEJveERhdGEubWluVG9wO21heFdpZHRoPW1pbkxlZnQrTWF0aC5taW4oY29udGFpbmVyRGF0YS53aWR0aCxjYW52YXNEYXRhLndpZHRoLGNhbnZhc0RhdGEubGVmdCtjYW52YXNEYXRhLndpZHRoKTttYXhIZWlnaHQ9bWluVG9wK01hdGgubWluKGNvbnRhaW5lckRhdGEuaGVpZ2h0LGNhbnZhc0RhdGEuaGVpZ2h0LGNhbnZhc0RhdGEudG9wK2NhbnZhc0RhdGEuaGVpZ2h0KX12YXIgcG9pbnRlcj1wb2ludGVyc1tPYmplY3Qua2V5cyhwb2ludGVycylbMF1dO3ZhciByYW5nZT17eDpwb2ludGVyLmVuZFgtcG9pbnRlci5zdGFydFgseTpwb2ludGVyLmVuZFktcG9pbnRlci5zdGFydFl9O3ZhciBjaGVjaz1mdW5jdGlvbiBjaGVjayhzaWRlKXtzd2l0Y2goc2lkZSl7Y2FzZSBBQ1RJT05fRUFTVDppZihyaWdodCtyYW5nZS54Pm1heFdpZHRoKXtyYW5nZS54PW1heFdpZHRoLXJpZ2h0fWJyZWFrO2Nhc2UgQUNUSU9OX1dFU1Q6aWYobGVmdCtyYW5nZS54PG1pbkxlZnQpe3JhbmdlLng9bWluTGVmdC1sZWZ0fWJyZWFrO2Nhc2UgQUNUSU9OX05PUlRIOmlmKHRvcCtyYW5nZS55PG1pblRvcCl7cmFuZ2UueT1taW5Ub3AtdG9wfWJyZWFrO2Nhc2UgQUNUSU9OX1NPVVRIOmlmKGJvdHRvbStyYW5nZS55Pm1heEhlaWdodCl7cmFuZ2UueT1tYXhIZWlnaHQtYm90dG9tfWJyZWFrO2RlZmF1bHQ6fX07c3dpdGNoKGFjdGlvbil7Y2FzZSBBQ1RJT05fQUxMOmxlZnQrPXJhbmdlLng7dG9wKz1yYW5nZS55O2JyZWFrO2Nhc2UgQUNUSU9OX0VBU1Q6aWYocmFuZ2UueD49MCYmKHJpZ2h0Pj1tYXhXaWR0aHx8YXNwZWN0UmF0aW8mJih0b3A8PW1pblRvcHx8Ym90dG9tPj1tYXhIZWlnaHQpKSl7cmVuZGVyYWJsZT1mYWxzZTticmVha31jaGVjayhBQ1RJT05fRUFTVCk7d2lkdGgrPXJhbmdlLng7aWYod2lkdGg8MCl7YWN0aW9uPUFDVElPTl9XRVNUO3dpZHRoPS13aWR0aDtsZWZ0LT13aWR0aH1pZihhc3BlY3RSYXRpbyl7aGVpZ2h0PXdpZHRoL2FzcGVjdFJhdGlvO3RvcCs9KGNyb3BCb3hEYXRhLmhlaWdodC1oZWlnaHQpLzJ9YnJlYWs7Y2FzZSBBQ1RJT05fTk9SVEg6aWYocmFuZ2UueTw9MCYmKHRvcDw9bWluVG9wfHxhc3BlY3RSYXRpbyYmKGxlZnQ8PW1pbkxlZnR8fHJpZ2h0Pj1tYXhXaWR0aCkpKXtyZW5kZXJhYmxlPWZhbHNlO2JyZWFrfWNoZWNrKEFDVElPTl9OT1JUSCk7aGVpZ2h0LT1yYW5nZS55O3RvcCs9cmFuZ2UueTtpZihoZWlnaHQ8MCl7YWN0aW9uPUFDVElPTl9TT1VUSDtoZWlnaHQ9LWhlaWdodDt0b3AtPWhlaWdodH1pZihhc3BlY3RSYXRpbyl7d2lkdGg9aGVpZ2h0KmFzcGVjdFJhdGlvO2xlZnQrPShjcm9wQm94RGF0YS53aWR0aC13aWR0aCkvMn1icmVhaztjYXNlIEFDVElPTl9XRVNUOmlmKHJhbmdlLng8PTAmJihsZWZ0PD1taW5MZWZ0fHxhc3BlY3RSYXRpbyYmKHRvcDw9bWluVG9wfHxib3R0b20+PW1heEhlaWdodCkpKXtyZW5kZXJhYmxlPWZhbHNlO2JyZWFrfWNoZWNrKEFDVElPTl9XRVNUKTt3aWR0aC09cmFuZ2UueDtsZWZ0Kz1yYW5nZS54O2lmKHdpZHRoPDApe2FjdGlvbj1BQ1RJT05fRUFTVDt3aWR0aD0td2lkdGg7bGVmdC09d2lkdGh9aWYoYXNwZWN0UmF0aW8pe2hlaWdodD13aWR0aC9hc3BlY3RSYXRpbzt0b3ArPShjcm9wQm94RGF0YS5oZWlnaHQtaGVpZ2h0KS8yfWJyZWFrO2Nhc2UgQUNUSU9OX1NPVVRIOmlmKHJhbmdlLnk+PTAmJihib3R0b20+PW1heEhlaWdodHx8YXNwZWN0UmF0aW8mJihsZWZ0PD1taW5MZWZ0fHxyaWdodD49bWF4V2lkdGgpKSl7cmVuZGVyYWJsZT1mYWxzZTticmVha31jaGVjayhBQ1RJT05fU09VVEgpO2hlaWdodCs9cmFuZ2UueTtpZihoZWlnaHQ8MCl7YWN0aW9uPUFDVElPTl9OT1JUSDtoZWlnaHQ9LWhlaWdodDt0b3AtPWhlaWdodH1pZihhc3BlY3RSYXRpbyl7d2lkdGg9aGVpZ2h0KmFzcGVjdFJhdGlvO2xlZnQrPShjcm9wQm94RGF0YS53aWR0aC13aWR0aCkvMn1icmVhaztjYXNlIEFDVElPTl9OT1JUSF9FQVNUOmlmKGFzcGVjdFJhdGlvKXtpZihyYW5nZS55PD0wJiYodG9wPD1taW5Ub3B8fHJpZ2h0Pj1tYXhXaWR0aCkpe3JlbmRlcmFibGU9ZmFsc2U7YnJlYWt9Y2hlY2soQUNUSU9OX05PUlRIKTtoZWlnaHQtPXJhbmdlLnk7dG9wKz1yYW5nZS55O3dpZHRoPWhlaWdodCphc3BlY3RSYXRpb31lbHNle2NoZWNrKEFDVElPTl9OT1JUSCk7Y2hlY2soQUNUSU9OX0VBU1QpO2lmKHJhbmdlLng+PTApe2lmKHJpZ2h0PG1heFdpZHRoKXt3aWR0aCs9cmFuZ2UueH1lbHNlIGlmKHJhbmdlLnk8PTAmJnRvcDw9bWluVG9wKXtyZW5kZXJhYmxlPWZhbHNlfX1lbHNle3dpZHRoKz1yYW5nZS54fWlmKHJhbmdlLnk8PTApe2lmKHRvcD5taW5Ub3Ape2hlaWdodC09cmFuZ2UueTt0b3ArPXJhbmdlLnl9fWVsc2V7aGVpZ2h0LT1yYW5nZS55O3RvcCs9cmFuZ2UueX19aWYod2lkdGg8MCYmaGVpZ2h0PDApe2FjdGlvbj1BQ1RJT05fU09VVEhfV0VTVDtoZWlnaHQ9LWhlaWdodDt3aWR0aD0td2lkdGg7dG9wLT1oZWlnaHQ7bGVmdC09d2lkdGh9ZWxzZSBpZih3aWR0aDwwKXthY3Rpb249QUNUSU9OX05PUlRIX1dFU1Q7d2lkdGg9LXdpZHRoO2xlZnQtPXdpZHRofWVsc2UgaWYoaGVpZ2h0PDApe2FjdGlvbj1BQ1RJT05fU09VVEhfRUFTVDtoZWlnaHQ9LWhlaWdodDt0b3AtPWhlaWdodH1icmVhaztjYXNlIEFDVElPTl9OT1JUSF9XRVNUOmlmKGFzcGVjdFJhdGlvKXtpZihyYW5nZS55PD0wJiYodG9wPD1taW5Ub3B8fGxlZnQ8PW1pbkxlZnQpKXtyZW5kZXJhYmxlPWZhbHNlO2JyZWFrfWNoZWNrKEFDVElPTl9OT1JUSCk7aGVpZ2h0LT1yYW5nZS55O3RvcCs9cmFuZ2UueTt3aWR0aD1oZWlnaHQqYXNwZWN0UmF0aW87bGVmdCs9Y3JvcEJveERhdGEud2lkdGgtd2lkdGh9ZWxzZXtjaGVjayhBQ1RJT05fTk9SVEgpO2NoZWNrKEFDVElPTl9XRVNUKTtpZihyYW5nZS54PD0wKXtpZihsZWZ0Pm1pbkxlZnQpe3dpZHRoLT1yYW5nZS54O2xlZnQrPXJhbmdlLnh9ZWxzZSBpZihyYW5nZS55PD0wJiZ0b3A8PW1pblRvcCl7cmVuZGVyYWJsZT1mYWxzZX19ZWxzZXt3aWR0aC09cmFuZ2UueDtsZWZ0Kz1yYW5nZS54fWlmKHJhbmdlLnk8PTApe2lmKHRvcD5taW5Ub3Ape2hlaWdodC09cmFuZ2UueTt0b3ArPXJhbmdlLnl9fWVsc2V7aGVpZ2h0LT1yYW5nZS55O3RvcCs9cmFuZ2UueX19aWYod2lkdGg8MCYmaGVpZ2h0PDApe2FjdGlvbj1BQ1RJT05fU09VVEhfRUFTVDtoZWlnaHQ9LWhlaWdodDt3aWR0aD0td2lkdGg7dG9wLT1oZWlnaHQ7bGVmdC09d2lkdGh9ZWxzZSBpZih3aWR0aDwwKXthY3Rpb249QUNUSU9OX05PUlRIX0VBU1Q7d2lkdGg9LXdpZHRoO2xlZnQtPXdpZHRofWVsc2UgaWYoaGVpZ2h0PDApe2FjdGlvbj1BQ1RJT05fU09VVEhfV0VTVDtoZWlnaHQ9LWhlaWdodDt0b3AtPWhlaWdodH1icmVhaztjYXNlIEFDVElPTl9TT1VUSF9XRVNUOmlmKGFzcGVjdFJhdGlvKXtpZihyYW5nZS54PD0wJiYobGVmdDw9bWluTGVmdHx8Ym90dG9tPj1tYXhIZWlnaHQpKXtyZW5kZXJhYmxlPWZhbHNlO2JyZWFrfWNoZWNrKEFDVElPTl9XRVNUKTt3aWR0aC09cmFuZ2UueDtsZWZ0Kz1yYW5nZS54O2hlaWdodD13aWR0aC9hc3BlY3RSYXRpb31lbHNle2NoZWNrKEFDVElPTl9TT1VUSCk7Y2hlY2soQUNUSU9OX1dFU1QpO2lmKHJhbmdlLng8PTApe2lmKGxlZnQ+bWluTGVmdCl7d2lkdGgtPXJhbmdlLng7bGVmdCs9cmFuZ2UueH1lbHNlIGlmKHJhbmdlLnk+PTAmJmJvdHRvbT49bWF4SGVpZ2h0KXtyZW5kZXJhYmxlPWZhbHNlfX1lbHNle3dpZHRoLT1yYW5nZS54O2xlZnQrPXJhbmdlLnh9aWYocmFuZ2UueT49MCl7aWYoYm90dG9tPG1heEhlaWdodCl7aGVpZ2h0Kz1yYW5nZS55fX1lbHNle2hlaWdodCs9cmFuZ2UueX19aWYod2lkdGg8MCYmaGVpZ2h0PDApe2FjdGlvbj1BQ1RJT05fTk9SVEhfRUFTVDtoZWlnaHQ9LWhlaWdodDt3aWR0aD0td2lkdGg7dG9wLT1oZWlnaHQ7bGVmdC09d2lkdGh9ZWxzZSBpZih3aWR0aDwwKXthY3Rpb249QUNUSU9OX1NPVVRIX0VBU1Q7d2lkdGg9LXdpZHRoO2xlZnQtPXdpZHRofWVsc2UgaWYoaGVpZ2h0PDApe2FjdGlvbj1BQ1RJT05fTk9SVEhfV0VTVDtoZWlnaHQ9LWhlaWdodDt0b3AtPWhlaWdodH1icmVhaztjYXNlIEFDVElPTl9TT1VUSF9FQVNUOmlmKGFzcGVjdFJhdGlvKXtpZihyYW5nZS54Pj0wJiYocmlnaHQ+PW1heFdpZHRofHxib3R0b20+PW1heEhlaWdodCkpe3JlbmRlcmFibGU9ZmFsc2U7YnJlYWt9Y2hlY2soQUNUSU9OX0VBU1QpO3dpZHRoKz1yYW5nZS54O2hlaWdodD13aWR0aC9hc3BlY3RSYXRpb31lbHNle2NoZWNrKEFDVElPTl9TT1VUSCk7Y2hlY2soQUNUSU9OX0VBU1QpO2lmKHJhbmdlLng+PTApe2lmKHJpZ2h0PG1heFdpZHRoKXt3aWR0aCs9cmFuZ2UueH1lbHNlIGlmKHJhbmdlLnk+PTAmJmJvdHRvbT49bWF4SGVpZ2h0KXtyZW5kZXJhYmxlPWZhbHNlfX1lbHNle3dpZHRoKz1yYW5nZS54fWlmKHJhbmdlLnk+PTApe2lmKGJvdHRvbTxtYXhIZWlnaHQpe2hlaWdodCs9cmFuZ2UueX19ZWxzZXtoZWlnaHQrPXJhbmdlLnl9fWlmKHdpZHRoPDAmJmhlaWdodDwwKXthY3Rpb249QUNUSU9OX05PUlRIX1dFU1Q7aGVpZ2h0PS1oZWlnaHQ7d2lkdGg9LXdpZHRoO3RvcC09aGVpZ2h0O2xlZnQtPXdpZHRofWVsc2UgaWYod2lkdGg8MCl7YWN0aW9uPUFDVElPTl9TT1VUSF9XRVNUO3dpZHRoPS13aWR0aDtsZWZ0LT13aWR0aH1lbHNlIGlmKGhlaWdodDwwKXthY3Rpb249QUNUSU9OX05PUlRIX0VBU1Q7aGVpZ2h0PS1oZWlnaHQ7dG9wLT1oZWlnaHR9YnJlYWs7Y2FzZSBBQ1RJT05fTU9WRTp0aGlzLm1vdmUocmFuZ2UueCxyYW5nZS55KTtyZW5kZXJhYmxlPWZhbHNlO2JyZWFrO2Nhc2UgQUNUSU9OX1pPT006dGhpcy56b29tKGdldE1heFpvb21SYXRpbyhwb2ludGVycyksZXZlbnQpO3JlbmRlcmFibGU9ZmFsc2U7YnJlYWs7Y2FzZSBBQ1RJT05fQ1JPUDppZighcmFuZ2UueHx8IXJhbmdlLnkpe3JlbmRlcmFibGU9ZmFsc2U7YnJlYWt9b2Zmc2V0PWdldE9mZnNldCh0aGlzLmNyb3BwZXIpO2xlZnQ9cG9pbnRlci5zdGFydFgtb2Zmc2V0LmxlZnQ7dG9wPXBvaW50ZXIuc3RhcnRZLW9mZnNldC50b3A7d2lkdGg9Y3JvcEJveERhdGEubWluV2lkdGg7aGVpZ2h0PWNyb3BCb3hEYXRhLm1pbkhlaWdodDtpZihyYW5nZS54PjApe2FjdGlvbj1yYW5nZS55PjA/QUNUSU9OX1NPVVRIX0VBU1Q6QUNUSU9OX05PUlRIX0VBU1R9ZWxzZSBpZihyYW5nZS54PDApe2xlZnQtPXdpZHRoO2FjdGlvbj1yYW5nZS55PjA/QUNUSU9OX1NPVVRIX1dFU1Q6QUNUSU9OX05PUlRIX1dFU1R9aWYocmFuZ2UueTwwKXt0b3AtPWhlaWdodH1pZighdGhpcy5jcm9wcGVkKXtyZW1vdmVDbGFzcyh0aGlzLmNyb3BCb3gsQ0xBU1NfSElEREVOKTt0aGlzLmNyb3BwZWQ9dHJ1ZTtpZih0aGlzLmxpbWl0ZWQpe3RoaXMubGltaXRDcm9wQm94KHRydWUsdHJ1ZSl9fWJyZWFrO2RlZmF1bHQ6fWlmKHJlbmRlcmFibGUpe2Nyb3BCb3hEYXRhLndpZHRoPXdpZHRoO2Nyb3BCb3hEYXRhLmhlaWdodD1oZWlnaHQ7Y3JvcEJveERhdGEubGVmdD1sZWZ0O2Nyb3BCb3hEYXRhLnRvcD10b3A7dGhpcy5hY3Rpb249YWN0aW9uO3RoaXMucmVuZGVyQ3JvcEJveCgpfWZvckVhY2gocG9pbnRlcnMsZnVuY3Rpb24ocCl7cC5zdGFydFg9cC5lbmRYO3Auc3RhcnRZPXAuZW5kWX0pfX07dmFyIG1ldGhvZHM9e2Nyb3A6ZnVuY3Rpb24gY3JvcCgpe2lmKHRoaXMucmVhZHkmJiF0aGlzLmNyb3BwZWQmJiF0aGlzLmRpc2FibGVkKXt0aGlzLmNyb3BwZWQ9dHJ1ZTt0aGlzLmxpbWl0Q3JvcEJveCh0cnVlLHRydWUpO2lmKHRoaXMub3B0aW9ucy5tb2RhbCl7YWRkQ2xhc3ModGhpcy5kcmFnQm94LENMQVNTX01PREFMKX1yZW1vdmVDbGFzcyh0aGlzLmNyb3BCb3gsQ0xBU1NfSElEREVOKTt0aGlzLnNldENyb3BCb3hEYXRhKHRoaXMuaW5pdGlhbENyb3BCb3hEYXRhKX1yZXR1cm4gdGhpc30scmVzZXQ6ZnVuY3Rpb24gcmVzZXQoKXtpZih0aGlzLnJlYWR5JiYhdGhpcy5kaXNhYmxlZCl7dGhpcy5pbWFnZURhdGE9YXNzaWduKHt9LHRoaXMuaW5pdGlhbEltYWdlRGF0YSk7dGhpcy5jYW52YXNEYXRhPWFzc2lnbih7fSx0aGlzLmluaXRpYWxDYW52YXNEYXRhKTt0aGlzLmNyb3BCb3hEYXRhPWFzc2lnbih7fSx0aGlzLmluaXRpYWxDcm9wQm94RGF0YSk7dGhpcy5yZW5kZXJDYW52YXMoKTtpZih0aGlzLmNyb3BwZWQpe3RoaXMucmVuZGVyQ3JvcEJveCgpfX1yZXR1cm4gdGhpc30sY2xlYXI6ZnVuY3Rpb24gY2xlYXIoKXtpZih0aGlzLmNyb3BwZWQmJiF0aGlzLmRpc2FibGVkKXthc3NpZ24odGhpcy5jcm9wQm94RGF0YSx7bGVmdDowLHRvcDowLHdpZHRoOjAsaGVpZ2h0OjB9KTt0aGlzLmNyb3BwZWQ9ZmFsc2U7dGhpcy5yZW5kZXJDcm9wQm94KCk7dGhpcy5saW1pdENhbnZhcyh0cnVlLHRydWUpO3RoaXMucmVuZGVyQ2FudmFzKCk7cmVtb3ZlQ2xhc3ModGhpcy5kcmFnQm94LENMQVNTX01PREFMKTthZGRDbGFzcyh0aGlzLmNyb3BCb3gsQ0xBU1NfSElEREVOKX1yZXR1cm4gdGhpc30scmVwbGFjZTpmdW5jdGlvbiByZXBsYWNlKHVybCl7dmFyIGhhc1NhbWVTaXplPWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dW5kZWZpbmVkP2FyZ3VtZW50c1sxXTpmYWxzZTtpZighdGhpcy5kaXNhYmxlZCYmdXJsKXtpZih0aGlzLmlzSW1nKXt0aGlzLmVsZW1lbnQuc3JjPXVybH1pZihoYXNTYW1lU2l6ZSl7dGhpcy51cmw9dXJsO3RoaXMuaW1hZ2Uuc3JjPXVybDtpZih0aGlzLnJlYWR5KXt0aGlzLnZpZXdCb3hJbWFnZS5zcmM9dXJsO2ZvckVhY2godGhpcy5wcmV2aWV3cyxmdW5jdGlvbihlbGVtZW50KXtlbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW1nXCIpWzBdLnNyYz11cmx9KX19ZWxzZXtpZih0aGlzLmlzSW1nKXt0aGlzLnJlcGxhY2VkPXRydWV9dGhpcy5vcHRpb25zLmRhdGE9bnVsbDt0aGlzLnVuY3JlYXRlKCk7dGhpcy5sb2FkKHVybCl9fXJldHVybiB0aGlzfSxlbmFibGU6ZnVuY3Rpb24gZW5hYmxlKCl7aWYodGhpcy5yZWFkeSYmdGhpcy5kaXNhYmxlZCl7dGhpcy5kaXNhYmxlZD1mYWxzZTtyZW1vdmVDbGFzcyh0aGlzLmNyb3BwZXIsQ0xBU1NfRElTQUJMRUQpfXJldHVybiB0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uIGRpc2FibGUoKXtpZih0aGlzLnJlYWR5JiYhdGhpcy5kaXNhYmxlZCl7dGhpcy5kaXNhYmxlZD10cnVlO2FkZENsYXNzKHRoaXMuY3JvcHBlcixDTEFTU19ESVNBQkxFRCl9cmV0dXJuIHRoaXN9LGRlc3Ryb3k6ZnVuY3Rpb24gZGVzdHJveSgpe3ZhciBlbGVtZW50PXRoaXMuZWxlbWVudDtpZighZWxlbWVudFtOQU1FU1BBQ0VdKXtyZXR1cm4gdGhpc31lbGVtZW50W05BTUVTUEFDRV09dW5kZWZpbmVkO2lmKHRoaXMuaXNJbWcmJnRoaXMucmVwbGFjZWQpe2VsZW1lbnQuc3JjPXRoaXMub3JpZ2luYWxVcmx9dGhpcy51bmNyZWF0ZSgpO3JldHVybiB0aGlzfSxtb3ZlOmZ1bmN0aW9uIG1vdmUob2Zmc2V0WCl7dmFyIG9mZnNldFk9YXJndW1lbnRzLmxlbmd0aD4xJiZhcmd1bWVudHNbMV0hPT11bmRlZmluZWQ/YXJndW1lbnRzWzFdOm9mZnNldFg7dmFyIF90aGlzJGNhbnZhc0RhdGE9dGhpcy5jYW52YXNEYXRhLGxlZnQ9X3RoaXMkY2FudmFzRGF0YS5sZWZ0LHRvcD1fdGhpcyRjYW52YXNEYXRhLnRvcDtyZXR1cm4gdGhpcy5tb3ZlVG8oaXNVbmRlZmluZWQob2Zmc2V0WCk/b2Zmc2V0WDpsZWZ0K051bWJlcihvZmZzZXRYKSxpc1VuZGVmaW5lZChvZmZzZXRZKT9vZmZzZXRZOnRvcCtOdW1iZXIob2Zmc2V0WSkpfSxtb3ZlVG86ZnVuY3Rpb24gbW92ZVRvKHgpe3ZhciB5PWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dW5kZWZpbmVkP2FyZ3VtZW50c1sxXTp4O3ZhciBjYW52YXNEYXRhPXRoaXMuY2FudmFzRGF0YTt2YXIgY2hhbmdlZD1mYWxzZTt4PU51bWJlcih4KTt5PU51bWJlcih5KTtpZih0aGlzLnJlYWR5JiYhdGhpcy5kaXNhYmxlZCYmdGhpcy5vcHRpb25zLm1vdmFibGUpe2lmKGlzTnVtYmVyKHgpKXtjYW52YXNEYXRhLmxlZnQ9eDtjaGFuZ2VkPXRydWV9aWYoaXNOdW1iZXIoeSkpe2NhbnZhc0RhdGEudG9wPXk7Y2hhbmdlZD10cnVlfWlmKGNoYW5nZWQpe3RoaXMucmVuZGVyQ2FudmFzKHRydWUpfX1yZXR1cm4gdGhpc30sem9vbTpmdW5jdGlvbiB6b29tKHJhdGlvLF9vcmlnaW5hbEV2ZW50KXt2YXIgY2FudmFzRGF0YT10aGlzLmNhbnZhc0RhdGE7cmF0aW89TnVtYmVyKHJhdGlvKTtpZihyYXRpbzwwKXtyYXRpbz0xLygxLXJhdGlvKX1lbHNle3JhdGlvPTErcmF0aW99cmV0dXJuIHRoaXMuem9vbVRvKGNhbnZhc0RhdGEud2lkdGgqcmF0aW8vY2FudmFzRGF0YS5uYXR1cmFsV2lkdGgsbnVsbCxfb3JpZ2luYWxFdmVudCl9LHpvb21UbzpmdW5jdGlvbiB6b29tVG8ocmF0aW8scGl2b3QsX29yaWdpbmFsRXZlbnQpe3ZhciBvcHRpb25zPXRoaXMub3B0aW9ucyxjYW52YXNEYXRhPXRoaXMuY2FudmFzRGF0YTt2YXIgd2lkdGg9Y2FudmFzRGF0YS53aWR0aCxoZWlnaHQ9Y2FudmFzRGF0YS5oZWlnaHQsbmF0dXJhbFdpZHRoPWNhbnZhc0RhdGEubmF0dXJhbFdpZHRoLG5hdHVyYWxIZWlnaHQ9Y2FudmFzRGF0YS5uYXR1cmFsSGVpZ2h0O3JhdGlvPU51bWJlcihyYXRpbyk7aWYocmF0aW8+PTAmJnRoaXMucmVhZHkmJiF0aGlzLmRpc2FibGVkJiZvcHRpb25zLnpvb21hYmxlKXt2YXIgbmV3V2lkdGg9bmF0dXJhbFdpZHRoKnJhdGlvO3ZhciBuZXdIZWlnaHQ9bmF0dXJhbEhlaWdodCpyYXRpbztpZihkaXNwYXRjaEV2ZW50KHRoaXMuZWxlbWVudCxFVkVOVF9aT09NLHtyYXRpbzpyYXRpbyxvbGRSYXRpbzp3aWR0aC9uYXR1cmFsV2lkdGgsb3JpZ2luYWxFdmVudDpfb3JpZ2luYWxFdmVudH0pPT09ZmFsc2Upe3JldHVybiB0aGlzfWlmKF9vcmlnaW5hbEV2ZW50KXt2YXIgcG9pbnRlcnM9dGhpcy5wb2ludGVyczt2YXIgb2Zmc2V0PWdldE9mZnNldCh0aGlzLmNyb3BwZXIpO3ZhciBjZW50ZXI9cG9pbnRlcnMmJk9iamVjdC5rZXlzKHBvaW50ZXJzKS5sZW5ndGg/Z2V0UG9pbnRlcnNDZW50ZXIocG9pbnRlcnMpOntwYWdlWDpfb3JpZ2luYWxFdmVudC5wYWdlWCxwYWdlWTpfb3JpZ2luYWxFdmVudC5wYWdlWX07Y2FudmFzRGF0YS5sZWZ0LT0obmV3V2lkdGgtd2lkdGgpKigoY2VudGVyLnBhZ2VYLW9mZnNldC5sZWZ0LWNhbnZhc0RhdGEubGVmdCkvd2lkdGgpO2NhbnZhc0RhdGEudG9wLT0obmV3SGVpZ2h0LWhlaWdodCkqKChjZW50ZXIucGFnZVktb2Zmc2V0LnRvcC1jYW52YXNEYXRhLnRvcCkvaGVpZ2h0KX1lbHNlIGlmKGlzUGxhaW5PYmplY3QocGl2b3QpJiZpc051bWJlcihwaXZvdC54KSYmaXNOdW1iZXIocGl2b3QueSkpe2NhbnZhc0RhdGEubGVmdC09KG5ld1dpZHRoLXdpZHRoKSooKHBpdm90LngtY2FudmFzRGF0YS5sZWZ0KS93aWR0aCk7Y2FudmFzRGF0YS50b3AtPShuZXdIZWlnaHQtaGVpZ2h0KSooKHBpdm90LnktY2FudmFzRGF0YS50b3ApL2hlaWdodCl9ZWxzZXtjYW52YXNEYXRhLmxlZnQtPShuZXdXaWR0aC13aWR0aCkvMjtjYW52YXNEYXRhLnRvcC09KG5ld0hlaWdodC1oZWlnaHQpLzJ9Y2FudmFzRGF0YS53aWR0aD1uZXdXaWR0aDtjYW52YXNEYXRhLmhlaWdodD1uZXdIZWlnaHQ7dGhpcy5yZW5kZXJDYW52YXModHJ1ZSl9cmV0dXJuIHRoaXN9LHJvdGF0ZTpmdW5jdGlvbiByb3RhdGUoZGVncmVlKXtyZXR1cm4gdGhpcy5yb3RhdGVUbygodGhpcy5pbWFnZURhdGEucm90YXRlfHwwKStOdW1iZXIoZGVncmVlKSl9LHJvdGF0ZVRvOmZ1bmN0aW9uIHJvdGF0ZVRvKGRlZ3JlZSl7ZGVncmVlPU51bWJlcihkZWdyZWUpO2lmKGlzTnVtYmVyKGRlZ3JlZSkmJnRoaXMucmVhZHkmJiF0aGlzLmRpc2FibGVkJiZ0aGlzLm9wdGlvbnMucm90YXRhYmxlKXt0aGlzLmltYWdlRGF0YS5yb3RhdGU9ZGVncmVlJTM2MDt0aGlzLnJlbmRlckNhbnZhcyh0cnVlLHRydWUpfXJldHVybiB0aGlzfSxzY2FsZVg6ZnVuY3Rpb24gc2NhbGVYKF9zY2FsZVgpe3ZhciBzY2FsZVk9dGhpcy5pbWFnZURhdGEuc2NhbGVZO3JldHVybiB0aGlzLnNjYWxlKF9zY2FsZVgsaXNOdW1iZXIoc2NhbGVZKT9zY2FsZVk6MSl9LHNjYWxlWTpmdW5jdGlvbiBzY2FsZVkoX3NjYWxlWSl7dmFyIHNjYWxlWD10aGlzLmltYWdlRGF0YS5zY2FsZVg7cmV0dXJuIHRoaXMuc2NhbGUoaXNOdW1iZXIoc2NhbGVYKT9zY2FsZVg6MSxfc2NhbGVZKX0sc2NhbGU6ZnVuY3Rpb24gc2NhbGUoc2NhbGVYKXt2YXIgc2NhbGVZPWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dW5kZWZpbmVkP2FyZ3VtZW50c1sxXTpzY2FsZVg7dmFyIGltYWdlRGF0YT10aGlzLmltYWdlRGF0YTt2YXIgdHJhbnNmb3JtZWQ9ZmFsc2U7c2NhbGVYPU51bWJlcihzY2FsZVgpO3NjYWxlWT1OdW1iZXIoc2NhbGVZKTtpZih0aGlzLnJlYWR5JiYhdGhpcy5kaXNhYmxlZCYmdGhpcy5vcHRpb25zLnNjYWxhYmxlKXtpZihpc051bWJlcihzY2FsZVgpKXtpbWFnZURhdGEuc2NhbGVYPXNjYWxlWDt0cmFuc2Zvcm1lZD10cnVlfWlmKGlzTnVtYmVyKHNjYWxlWSkpe2ltYWdlRGF0YS5zY2FsZVk9c2NhbGVZO3RyYW5zZm9ybWVkPXRydWV9aWYodHJhbnNmb3JtZWQpe3RoaXMucmVuZGVyQ2FudmFzKHRydWUsdHJ1ZSl9fXJldHVybiB0aGlzfSxnZXREYXRhOmZ1bmN0aW9uIGdldERhdGEoKXt2YXIgcm91bmRlZD1hcmd1bWVudHMubGVuZ3RoPjAmJmFyZ3VtZW50c1swXSE9PXVuZGVmaW5lZD9hcmd1bWVudHNbMF06ZmFsc2U7dmFyIG9wdGlvbnM9dGhpcy5vcHRpb25zLGltYWdlRGF0YT10aGlzLmltYWdlRGF0YSxjYW52YXNEYXRhPXRoaXMuY2FudmFzRGF0YSxjcm9wQm94RGF0YT10aGlzLmNyb3BCb3hEYXRhO3ZhciBkYXRhO2lmKHRoaXMucmVhZHkmJnRoaXMuY3JvcHBlZCl7ZGF0YT17eDpjcm9wQm94RGF0YS5sZWZ0LWNhbnZhc0RhdGEubGVmdCx5OmNyb3BCb3hEYXRhLnRvcC1jYW52YXNEYXRhLnRvcCx3aWR0aDpjcm9wQm94RGF0YS53aWR0aCxoZWlnaHQ6Y3JvcEJveERhdGEuaGVpZ2h0fTt2YXIgcmF0aW89aW1hZ2VEYXRhLndpZHRoL2ltYWdlRGF0YS5uYXR1cmFsV2lkdGg7Zm9yRWFjaChkYXRhLGZ1bmN0aW9uKG4saSl7ZGF0YVtpXT1uL3JhdGlvfSk7aWYocm91bmRlZCl7dmFyIGJvdHRvbT1NYXRoLnJvdW5kKGRhdGEueStkYXRhLmhlaWdodCk7dmFyIHJpZ2h0PU1hdGgucm91bmQoZGF0YS54K2RhdGEud2lkdGgpO2RhdGEueD1NYXRoLnJvdW5kKGRhdGEueCk7ZGF0YS55PU1hdGgucm91bmQoZGF0YS55KTtkYXRhLndpZHRoPXJpZ2h0LWRhdGEueDtkYXRhLmhlaWdodD1ib3R0b20tZGF0YS55fX1lbHNle2RhdGE9e3g6MCx5OjAsd2lkdGg6MCxoZWlnaHQ6MH19aWYob3B0aW9ucy5yb3RhdGFibGUpe2RhdGEucm90YXRlPWltYWdlRGF0YS5yb3RhdGV8fDB9aWYob3B0aW9ucy5zY2FsYWJsZSl7ZGF0YS5zY2FsZVg9aW1hZ2VEYXRhLnNjYWxlWHx8MTtkYXRhLnNjYWxlWT1pbWFnZURhdGEuc2NhbGVZfHwxfXJldHVybiBkYXRhfSxzZXREYXRhOmZ1bmN0aW9uIHNldERhdGEoZGF0YSl7dmFyIG9wdGlvbnM9dGhpcy5vcHRpb25zLGltYWdlRGF0YT10aGlzLmltYWdlRGF0YSxjYW52YXNEYXRhPXRoaXMuY2FudmFzRGF0YTt2YXIgY3JvcEJveERhdGE9e307aWYodGhpcy5yZWFkeSYmIXRoaXMuZGlzYWJsZWQmJmlzUGxhaW5PYmplY3QoZGF0YSkpe3ZhciB0cmFuc2Zvcm1lZD1mYWxzZTtpZihvcHRpb25zLnJvdGF0YWJsZSl7aWYoaXNOdW1iZXIoZGF0YS5yb3RhdGUpJiZkYXRhLnJvdGF0ZSE9PWltYWdlRGF0YS5yb3RhdGUpe2ltYWdlRGF0YS5yb3RhdGU9ZGF0YS5yb3RhdGU7dHJhbnNmb3JtZWQ9dHJ1ZX19aWYob3B0aW9ucy5zY2FsYWJsZSl7aWYoaXNOdW1iZXIoZGF0YS5zY2FsZVgpJiZkYXRhLnNjYWxlWCE9PWltYWdlRGF0YS5zY2FsZVgpe2ltYWdlRGF0YS5zY2FsZVg9ZGF0YS5zY2FsZVg7dHJhbnNmb3JtZWQ9dHJ1ZX1pZihpc051bWJlcihkYXRhLnNjYWxlWSkmJmRhdGEuc2NhbGVZIT09aW1hZ2VEYXRhLnNjYWxlWSl7aW1hZ2VEYXRhLnNjYWxlWT1kYXRhLnNjYWxlWTt0cmFuc2Zvcm1lZD10cnVlfX1pZih0cmFuc2Zvcm1lZCl7dGhpcy5yZW5kZXJDYW52YXModHJ1ZSx0cnVlKX12YXIgcmF0aW89aW1hZ2VEYXRhLndpZHRoL2ltYWdlRGF0YS5uYXR1cmFsV2lkdGg7aWYoaXNOdW1iZXIoZGF0YS54KSl7Y3JvcEJveERhdGEubGVmdD1kYXRhLngqcmF0aW8rY2FudmFzRGF0YS5sZWZ0fWlmKGlzTnVtYmVyKGRhdGEueSkpe2Nyb3BCb3hEYXRhLnRvcD1kYXRhLnkqcmF0aW8rY2FudmFzRGF0YS50b3B9aWYoaXNOdW1iZXIoZGF0YS53aWR0aCkpe2Nyb3BCb3hEYXRhLndpZHRoPWRhdGEud2lkdGgqcmF0aW99aWYoaXNOdW1iZXIoZGF0YS5oZWlnaHQpKXtjcm9wQm94RGF0YS5oZWlnaHQ9ZGF0YS5oZWlnaHQqcmF0aW99dGhpcy5zZXRDcm9wQm94RGF0YShjcm9wQm94RGF0YSl9cmV0dXJuIHRoaXN9LGdldENvbnRhaW5lckRhdGE6ZnVuY3Rpb24gZ2V0Q29udGFpbmVyRGF0YSgpe3JldHVybiB0aGlzLnJlYWR5P2Fzc2lnbih7fSx0aGlzLmNvbnRhaW5lckRhdGEpOnt9fSxnZXRJbWFnZURhdGE6ZnVuY3Rpb24gZ2V0SW1hZ2VEYXRhKCl7cmV0dXJuIHRoaXMuc2l6ZWQ/YXNzaWduKHt9LHRoaXMuaW1hZ2VEYXRhKTp7fX0sZ2V0Q2FudmFzRGF0YTpmdW5jdGlvbiBnZXRDYW52YXNEYXRhKCl7dmFyIGNhbnZhc0RhdGE9dGhpcy5jYW52YXNEYXRhO3ZhciBkYXRhPXt9O2lmKHRoaXMucmVhZHkpe2ZvckVhY2goW1wibGVmdFwiLFwidG9wXCIsXCJ3aWR0aFwiLFwiaGVpZ2h0XCIsXCJuYXR1cmFsV2lkdGhcIixcIm5hdHVyYWxIZWlnaHRcIl0sZnVuY3Rpb24obil7ZGF0YVtuXT1jYW52YXNEYXRhW25dfSl9cmV0dXJuIGRhdGF9LHNldENhbnZhc0RhdGE6ZnVuY3Rpb24gc2V0Q2FudmFzRGF0YShkYXRhKXt2YXIgY2FudmFzRGF0YT10aGlzLmNhbnZhc0RhdGE7dmFyIGFzcGVjdFJhdGlvPWNhbnZhc0RhdGEuYXNwZWN0UmF0aW87aWYodGhpcy5yZWFkeSYmIXRoaXMuZGlzYWJsZWQmJmlzUGxhaW5PYmplY3QoZGF0YSkpe2lmKGlzTnVtYmVyKGRhdGEubGVmdCkpe2NhbnZhc0RhdGEubGVmdD1kYXRhLmxlZnR9aWYoaXNOdW1iZXIoZGF0YS50b3ApKXtjYW52YXNEYXRhLnRvcD1kYXRhLnRvcH1pZihpc051bWJlcihkYXRhLndpZHRoKSl7Y2FudmFzRGF0YS53aWR0aD1kYXRhLndpZHRoO2NhbnZhc0RhdGEuaGVpZ2h0PWRhdGEud2lkdGgvYXNwZWN0UmF0aW99ZWxzZSBpZihpc051bWJlcihkYXRhLmhlaWdodCkpe2NhbnZhc0RhdGEuaGVpZ2h0PWRhdGEuaGVpZ2h0O2NhbnZhc0RhdGEud2lkdGg9ZGF0YS5oZWlnaHQqYXNwZWN0UmF0aW99dGhpcy5yZW5kZXJDYW52YXModHJ1ZSl9cmV0dXJuIHRoaXN9LGdldENyb3BCb3hEYXRhOmZ1bmN0aW9uIGdldENyb3BCb3hEYXRhKCl7dmFyIGNyb3BCb3hEYXRhPXRoaXMuY3JvcEJveERhdGE7dmFyIGRhdGE7aWYodGhpcy5yZWFkeSYmdGhpcy5jcm9wcGVkKXtkYXRhPXtsZWZ0OmNyb3BCb3hEYXRhLmxlZnQsdG9wOmNyb3BCb3hEYXRhLnRvcCx3aWR0aDpjcm9wQm94RGF0YS53aWR0aCxoZWlnaHQ6Y3JvcEJveERhdGEuaGVpZ2h0fX1yZXR1cm4gZGF0YXx8e319LHNldENyb3BCb3hEYXRhOmZ1bmN0aW9uIHNldENyb3BCb3hEYXRhKGRhdGEpe3ZhciBjcm9wQm94RGF0YT10aGlzLmNyb3BCb3hEYXRhO3ZhciBhc3BlY3RSYXRpbz10aGlzLm9wdGlvbnMuYXNwZWN0UmF0aW87dmFyIHdpZHRoQ2hhbmdlZDt2YXIgaGVpZ2h0Q2hhbmdlZDtpZih0aGlzLnJlYWR5JiZ0aGlzLmNyb3BwZWQmJiF0aGlzLmRpc2FibGVkJiZpc1BsYWluT2JqZWN0KGRhdGEpKXtpZihpc051bWJlcihkYXRhLmxlZnQpKXtjcm9wQm94RGF0YS5sZWZ0PWRhdGEubGVmdH1pZihpc051bWJlcihkYXRhLnRvcCkpe2Nyb3BCb3hEYXRhLnRvcD1kYXRhLnRvcH1pZihpc051bWJlcihkYXRhLndpZHRoKSYmZGF0YS53aWR0aCE9PWNyb3BCb3hEYXRhLndpZHRoKXt3aWR0aENoYW5nZWQ9dHJ1ZTtjcm9wQm94RGF0YS53aWR0aD1kYXRhLndpZHRofWlmKGlzTnVtYmVyKGRhdGEuaGVpZ2h0KSYmZGF0YS5oZWlnaHQhPT1jcm9wQm94RGF0YS5oZWlnaHQpe2hlaWdodENoYW5nZWQ9dHJ1ZTtjcm9wQm94RGF0YS5oZWlnaHQ9ZGF0YS5oZWlnaHR9aWYoYXNwZWN0UmF0aW8pe2lmKHdpZHRoQ2hhbmdlZCl7Y3JvcEJveERhdGEuaGVpZ2h0PWNyb3BCb3hEYXRhLndpZHRoL2FzcGVjdFJhdGlvfWVsc2UgaWYoaGVpZ2h0Q2hhbmdlZCl7Y3JvcEJveERhdGEud2lkdGg9Y3JvcEJveERhdGEuaGVpZ2h0KmFzcGVjdFJhdGlvfX10aGlzLnJlbmRlckNyb3BCb3goKX1yZXR1cm4gdGhpc30sZ2V0Q3JvcHBlZENhbnZhczpmdW5jdGlvbiBnZXRDcm9wcGVkQ2FudmFzKCl7dmFyIG9wdGlvbnM9YXJndW1lbnRzLmxlbmd0aD4wJiZhcmd1bWVudHNbMF0hPT11bmRlZmluZWQ/YXJndW1lbnRzWzBdOnt9O2lmKCF0aGlzLnJlYWR5fHwhd2luZG93LkhUTUxDYW52YXNFbGVtZW50KXtyZXR1cm4gbnVsbH12YXIgY2FudmFzRGF0YT10aGlzLmNhbnZhc0RhdGE7dmFyIHNvdXJjZT1nZXRTb3VyY2VDYW52YXModGhpcy5pbWFnZSx0aGlzLmltYWdlRGF0YSxjYW52YXNEYXRhLG9wdGlvbnMpO2lmKCF0aGlzLmNyb3BwZWQpe3JldHVybiBzb3VyY2V9dmFyIF90aGlzJGdldERhdGE9dGhpcy5nZXREYXRhKCksaW5pdGlhbFg9X3RoaXMkZ2V0RGF0YS54LGluaXRpYWxZPV90aGlzJGdldERhdGEueSxpbml0aWFsV2lkdGg9X3RoaXMkZ2V0RGF0YS53aWR0aCxpbml0aWFsSGVpZ2h0PV90aGlzJGdldERhdGEuaGVpZ2h0O3ZhciByYXRpbz1zb3VyY2Uud2lkdGgvTWF0aC5mbG9vcihjYW52YXNEYXRhLm5hdHVyYWxXaWR0aCk7aWYocmF0aW8hPT0xKXtpbml0aWFsWCo9cmF0aW87aW5pdGlhbFkqPXJhdGlvO2luaXRpYWxXaWR0aCo9cmF0aW87aW5pdGlhbEhlaWdodCo9cmF0aW99dmFyIGFzcGVjdFJhdGlvPWluaXRpYWxXaWR0aC9pbml0aWFsSGVpZ2h0O3ZhciBtYXhTaXplcz1nZXRBZGp1c3RlZFNpemVzKHthc3BlY3RSYXRpbzphc3BlY3RSYXRpbyx3aWR0aDpvcHRpb25zLm1heFdpZHRofHxJbmZpbml0eSxoZWlnaHQ6b3B0aW9ucy5tYXhIZWlnaHR8fEluZmluaXR5fSk7dmFyIG1pblNpemVzPWdldEFkanVzdGVkU2l6ZXMoe2FzcGVjdFJhdGlvOmFzcGVjdFJhdGlvLHdpZHRoOm9wdGlvbnMubWluV2lkdGh8fDAsaGVpZ2h0Om9wdGlvbnMubWluSGVpZ2h0fHwwfSxcImNvdmVyXCIpO3ZhciBfZ2V0QWRqdXN0ZWRTaXplcz1nZXRBZGp1c3RlZFNpemVzKHthc3BlY3RSYXRpbzphc3BlY3RSYXRpbyx3aWR0aDpvcHRpb25zLndpZHRofHwocmF0aW8hPT0xP3NvdXJjZS53aWR0aDppbml0aWFsV2lkdGgpLGhlaWdodDpvcHRpb25zLmhlaWdodHx8KHJhdGlvIT09MT9zb3VyY2UuaGVpZ2h0OmluaXRpYWxIZWlnaHQpfSksd2lkdGg9X2dldEFkanVzdGVkU2l6ZXMud2lkdGgsaGVpZ2h0PV9nZXRBZGp1c3RlZFNpemVzLmhlaWdodDt3aWR0aD1NYXRoLm1pbihtYXhTaXplcy53aWR0aCxNYXRoLm1heChtaW5TaXplcy53aWR0aCx3aWR0aCkpO2hlaWdodD1NYXRoLm1pbihtYXhTaXplcy5oZWlnaHQsTWF0aC5tYXgobWluU2l6ZXMuaGVpZ2h0LGhlaWdodCkpO3ZhciBjYW52YXM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTt2YXIgY29udGV4dD1jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO2NhbnZhcy53aWR0aD1ub3JtYWxpemVEZWNpbWFsTnVtYmVyKHdpZHRoKTtjYW52YXMuaGVpZ2h0PW5vcm1hbGl6ZURlY2ltYWxOdW1iZXIoaGVpZ2h0KTtjb250ZXh0LmZpbGxTdHlsZT1vcHRpb25zLmZpbGxDb2xvcnx8XCJ0cmFuc3BhcmVudFwiO2NvbnRleHQuZmlsbFJlY3QoMCwwLHdpZHRoLGhlaWdodCk7dmFyIF9vcHRpb25zJGltYWdlU21vb3RoaT1vcHRpb25zLmltYWdlU21vb3RoaW5nRW5hYmxlZCxpbWFnZVNtb290aGluZ0VuYWJsZWQ9X29wdGlvbnMkaW1hZ2VTbW9vdGhpPT09dm9pZCAwP3RydWU6X29wdGlvbnMkaW1hZ2VTbW9vdGhpLGltYWdlU21vb3RoaW5nUXVhbGl0eT1vcHRpb25zLmltYWdlU21vb3RoaW5nUXVhbGl0eTtjb250ZXh0LmltYWdlU21vb3RoaW5nRW5hYmxlZD1pbWFnZVNtb290aGluZ0VuYWJsZWQ7aWYoaW1hZ2VTbW9vdGhpbmdRdWFsaXR5KXtjb250ZXh0LmltYWdlU21vb3RoaW5nUXVhbGl0eT1pbWFnZVNtb290aGluZ1F1YWxpdHl9dmFyIHNvdXJjZVdpZHRoPXNvdXJjZS53aWR0aDt2YXIgc291cmNlSGVpZ2h0PXNvdXJjZS5oZWlnaHQ7dmFyIHNyY1g9aW5pdGlhbFg7dmFyIHNyY1k9aW5pdGlhbFk7dmFyIHNyY1dpZHRoO3ZhciBzcmNIZWlnaHQ7dmFyIGRzdFg7dmFyIGRzdFk7dmFyIGRzdFdpZHRoO3ZhciBkc3RIZWlnaHQ7aWYoc3JjWDw9LWluaXRpYWxXaWR0aHx8c3JjWD5zb3VyY2VXaWR0aCl7c3JjWD0wO3NyY1dpZHRoPTA7ZHN0WD0wO2RzdFdpZHRoPTB9ZWxzZSBpZihzcmNYPD0wKXtkc3RYPS1zcmNYO3NyY1g9MDtzcmNXaWR0aD1NYXRoLm1pbihzb3VyY2VXaWR0aCxpbml0aWFsV2lkdGgrc3JjWCk7ZHN0V2lkdGg9c3JjV2lkdGh9ZWxzZSBpZihzcmNYPD1zb3VyY2VXaWR0aCl7ZHN0WD0wO3NyY1dpZHRoPU1hdGgubWluKGluaXRpYWxXaWR0aCxzb3VyY2VXaWR0aC1zcmNYKTtkc3RXaWR0aD1zcmNXaWR0aH1pZihzcmNXaWR0aDw9MHx8c3JjWTw9LWluaXRpYWxIZWlnaHR8fHNyY1k+c291cmNlSGVpZ2h0KXtzcmNZPTA7c3JjSGVpZ2h0PTA7ZHN0WT0wO2RzdEhlaWdodD0wfWVsc2UgaWYoc3JjWTw9MCl7ZHN0WT0tc3JjWTtzcmNZPTA7c3JjSGVpZ2h0PU1hdGgubWluKHNvdXJjZUhlaWdodCxpbml0aWFsSGVpZ2h0K3NyY1kpO2RzdEhlaWdodD1zcmNIZWlnaHR9ZWxzZSBpZihzcmNZPD1zb3VyY2VIZWlnaHQpe2RzdFk9MDtzcmNIZWlnaHQ9TWF0aC5taW4oaW5pdGlhbEhlaWdodCxzb3VyY2VIZWlnaHQtc3JjWSk7ZHN0SGVpZ2h0PXNyY0hlaWdodH12YXIgcGFyYW1zPVtzcmNYLHNyY1ksc3JjV2lkdGgsc3JjSGVpZ2h0XTtpZihkc3RXaWR0aD4wJiZkc3RIZWlnaHQ+MCl7dmFyIHNjYWxlPXdpZHRoL2luaXRpYWxXaWR0aDtwYXJhbXMucHVzaChkc3RYKnNjYWxlLGRzdFkqc2NhbGUsZHN0V2lkdGgqc2NhbGUsZHN0SGVpZ2h0KnNjYWxlKX1jb250ZXh0LmRyYXdJbWFnZS5hcHBseShjb250ZXh0LFtzb3VyY2VdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocGFyYW1zLm1hcChmdW5jdGlvbihwYXJhbSl7cmV0dXJuIE1hdGguZmxvb3Iobm9ybWFsaXplRGVjaW1hbE51bWJlcihwYXJhbSkpfSkpKSk7cmV0dXJuIGNhbnZhc30sc2V0QXNwZWN0UmF0aW86ZnVuY3Rpb24gc2V0QXNwZWN0UmF0aW8oYXNwZWN0UmF0aW8pe3ZhciBvcHRpb25zPXRoaXMub3B0aW9ucztpZighdGhpcy5kaXNhYmxlZCYmIWlzVW5kZWZpbmVkKGFzcGVjdFJhdGlvKSl7b3B0aW9ucy5hc3BlY3RSYXRpbz1NYXRoLm1heCgwLGFzcGVjdFJhdGlvKXx8TmFOO2lmKHRoaXMucmVhZHkpe3RoaXMuaW5pdENyb3BCb3goKTtpZih0aGlzLmNyb3BwZWQpe3RoaXMucmVuZGVyQ3JvcEJveCgpfX19cmV0dXJuIHRoaXN9LHNldERyYWdNb2RlOmZ1bmN0aW9uIHNldERyYWdNb2RlKG1vZGUpe3ZhciBvcHRpb25zPXRoaXMub3B0aW9ucyxkcmFnQm94PXRoaXMuZHJhZ0JveCxmYWNlPXRoaXMuZmFjZTtpZih0aGlzLnJlYWR5JiYhdGhpcy5kaXNhYmxlZCl7dmFyIGNyb3BwYWJsZT1tb2RlPT09RFJBR19NT0RFX0NST1A7dmFyIG1vdmFibGU9b3B0aW9ucy5tb3ZhYmxlJiZtb2RlPT09RFJBR19NT0RFX01PVkU7bW9kZT1jcm9wcGFibGV8fG1vdmFibGU/bW9kZTpEUkFHX01PREVfTk9ORTtvcHRpb25zLmRyYWdNb2RlPW1vZGU7c2V0RGF0YShkcmFnQm94LERBVEFfQUNUSU9OLG1vZGUpO3RvZ2dsZUNsYXNzKGRyYWdCb3gsQ0xBU1NfQ1JPUCxjcm9wcGFibGUpO3RvZ2dsZUNsYXNzKGRyYWdCb3gsQ0xBU1NfTU9WRSxtb3ZhYmxlKTtpZighb3B0aW9ucy5jcm9wQm94TW92YWJsZSl7c2V0RGF0YShmYWNlLERBVEFfQUNUSU9OLG1vZGUpO3RvZ2dsZUNsYXNzKGZhY2UsQ0xBU1NfQ1JPUCxjcm9wcGFibGUpO3RvZ2dsZUNsYXNzKGZhY2UsQ0xBU1NfTU9WRSxtb3ZhYmxlKX19cmV0dXJuIHRoaXN9fTt2YXIgQW5vdGhlckNyb3BwZXI9V0lORE9XLkNyb3BwZXI7dmFyIENyb3BwZXI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBDcm9wcGVyKGVsZW1lbnQpe3ZhciBvcHRpb25zPWFyZ3VtZW50cy5sZW5ndGg+MSYmYXJndW1lbnRzWzFdIT09dW5kZWZpbmVkP2FyZ3VtZW50c1sxXTp7fTtfY2xhc3NDYWxsQ2hlY2sodGhpcyxDcm9wcGVyKTtpZighZWxlbWVudHx8IVJFR0VYUF9UQUdfTkFNRS50ZXN0KGVsZW1lbnQudGFnTmFtZSkpe3Rocm93IG5ldyBFcnJvcihcIlRoZSBmaXJzdCBhcmd1bWVudCBpcyByZXF1aXJlZCBhbmQgbXVzdCBiZSBhbiA8aW1nPiBvciA8Y2FudmFzPiBlbGVtZW50LlwiKX10aGlzLmVsZW1lbnQ9ZWxlbWVudDt0aGlzLm9wdGlvbnM9YXNzaWduKHt9LERFRkFVTFRTLGlzUGxhaW5PYmplY3Qob3B0aW9ucykmJm9wdGlvbnMpO3RoaXMuY3JvcHBlZD1mYWxzZTt0aGlzLmRpc2FibGVkPWZhbHNlO3RoaXMucG9pbnRlcnM9e307dGhpcy5yZWFkeT1mYWxzZTt0aGlzLnJlbG9hZGluZz1mYWxzZTt0aGlzLnJlcGxhY2VkPWZhbHNlO3RoaXMuc2l6ZWQ9ZmFsc2U7dGhpcy5zaXppbmc9ZmFsc2U7dGhpcy5pbml0KCl9X2NyZWF0ZUNsYXNzKENyb3BwZXIsW3trZXk6XCJpbml0XCIsdmFsdWU6ZnVuY3Rpb24gaW5pdCgpe3ZhciBlbGVtZW50PXRoaXMuZWxlbWVudDt2YXIgdGFnTmFtZT1lbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKTt2YXIgdXJsO2lmKGVsZW1lbnRbTkFNRVNQQUNFXSl7cmV0dXJufWVsZW1lbnRbTkFNRVNQQUNFXT10aGlzO2lmKHRhZ05hbWU9PT1cImltZ1wiKXt0aGlzLmlzSW1nPXRydWU7dXJsPWVsZW1lbnQuZ2V0QXR0cmlidXRlKFwic3JjXCIpfHxcIlwiO3RoaXMub3JpZ2luYWxVcmw9dXJsO2lmKCF1cmwpe3JldHVybn11cmw9ZWxlbWVudC5zcmN9ZWxzZSBpZih0YWdOYW1lPT09XCJjYW52YXNcIiYmd2luZG93LkhUTUxDYW52YXNFbGVtZW50KXt1cmw9ZWxlbWVudC50b0RhdGFVUkwoKX10aGlzLmxvYWQodXJsKX19LHtrZXk6XCJsb2FkXCIsdmFsdWU6ZnVuY3Rpb24gbG9hZCh1cmwpe3ZhciBfdGhpcz10aGlzO2lmKCF1cmwpe3JldHVybn10aGlzLnVybD11cmw7dGhpcy5pbWFnZURhdGE9e307dmFyIGVsZW1lbnQ9dGhpcy5lbGVtZW50LG9wdGlvbnM9dGhpcy5vcHRpb25zO2lmKCFvcHRpb25zLnJvdGF0YWJsZSYmIW9wdGlvbnMuc2NhbGFibGUpe29wdGlvbnMuY2hlY2tPcmllbnRhdGlvbj1mYWxzZX1pZighb3B0aW9ucy5jaGVja09yaWVudGF0aW9ufHwhd2luZG93LkFycmF5QnVmZmVyKXt0aGlzLmNsb25lKCk7cmV0dXJufWlmKFJFR0VYUF9EQVRBX1VSTC50ZXN0KHVybCkpe2lmKFJFR0VYUF9EQVRBX1VSTF9KUEVHLnRlc3QodXJsKSl7dGhpcy5yZWFkKGRhdGFVUkxUb0FycmF5QnVmZmVyKHVybCkpfWVsc2V7dGhpcy5jbG9uZSgpfXJldHVybn12YXIgeGhyPW5ldyBYTUxIdHRwUmVxdWVzdDt2YXIgY2xvbmU9dGhpcy5jbG9uZS5iaW5kKHRoaXMpO3RoaXMucmVsb2FkaW5nPXRydWU7dGhpcy54aHI9eGhyO3hoci5vbmFib3J0PWNsb25lO3hoci5vbmVycm9yPWNsb25lO3hoci5vbnRpbWVvdXQ9Y2xvbmU7eGhyLm9ucHJvZ3Jlc3M9ZnVuY3Rpb24oKXtpZih4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJjb250ZW50LXR5cGVcIikhPT1NSU1FX1RZUEVfSlBFRyl7eGhyLmFib3J0KCl9fTt4aHIub25sb2FkPWZ1bmN0aW9uKCl7X3RoaXMucmVhZCh4aHIucmVzcG9uc2UpfTt4aHIub25sb2FkZW5kPWZ1bmN0aW9uKCl7X3RoaXMucmVsb2FkaW5nPWZhbHNlO190aGlzLnhocj1udWxsfTtpZihvcHRpb25zLmNoZWNrQ3Jvc3NPcmlnaW4mJmlzQ3Jvc3NPcmlnaW5VUkwodXJsKSl7dXJsPWFkZFRpbWVzdGFtcCh1cmwpfXhoci5vcGVuKFwiR0VUXCIsdXJsKTt4aHIucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIjt4aHIud2l0aENyZWRlbnRpYWxzPWVsZW1lbnQuY3Jvc3NPcmlnaW49PT1cInVzZS1jcmVkZW50aWFsc1wiO3hoci5zZW5kKCl9fSx7a2V5OlwicmVhZFwiLHZhbHVlOmZ1bmN0aW9uIHJlYWQoYXJyYXlCdWZmZXIpe3ZhciBvcHRpb25zPXRoaXMub3B0aW9ucyxpbWFnZURhdGE9dGhpcy5pbWFnZURhdGE7dmFyIG9yaWVudGF0aW9uPXJlc2V0QW5kR2V0T3JpZW50YXRpb24oYXJyYXlCdWZmZXIpO3ZhciByb3RhdGU9MDt2YXIgc2NhbGVYPTE7dmFyIHNjYWxlWT0xO2lmKG9yaWVudGF0aW9uPjEpe3RoaXMudXJsPWFycmF5QnVmZmVyVG9EYXRhVVJMKGFycmF5QnVmZmVyLE1JTUVfVFlQRV9KUEVHKTt2YXIgX3BhcnNlT3JpZW50YXRpb249cGFyc2VPcmllbnRhdGlvbihvcmllbnRhdGlvbik7cm90YXRlPV9wYXJzZU9yaWVudGF0aW9uLnJvdGF0ZTtzY2FsZVg9X3BhcnNlT3JpZW50YXRpb24uc2NhbGVYO3NjYWxlWT1fcGFyc2VPcmllbnRhdGlvbi5zY2FsZVl9aWYob3B0aW9ucy5yb3RhdGFibGUpe2ltYWdlRGF0YS5yb3RhdGU9cm90YXRlfWlmKG9wdGlvbnMuc2NhbGFibGUpe2ltYWdlRGF0YS5zY2FsZVg9c2NhbGVYO2ltYWdlRGF0YS5zY2FsZVk9c2NhbGVZfXRoaXMuY2xvbmUoKX19LHtrZXk6XCJjbG9uZVwiLHZhbHVlOmZ1bmN0aW9uIGNsb25lKCl7dmFyIGVsZW1lbnQ9dGhpcy5lbGVtZW50LHVybD10aGlzLnVybDt2YXIgY3Jvc3NPcmlnaW49ZWxlbWVudC5jcm9zc09yaWdpbjt2YXIgY3Jvc3NPcmlnaW5Vcmw9dXJsO2lmKHRoaXMub3B0aW9ucy5jaGVja0Nyb3NzT3JpZ2luJiZpc0Nyb3NzT3JpZ2luVVJMKHVybCkpe2lmKCFjcm9zc09yaWdpbil7Y3Jvc3NPcmlnaW49XCJhbm9ueW1vdXNcIn1jcm9zc09yaWdpblVybD1hZGRUaW1lc3RhbXAodXJsKX10aGlzLmNyb3NzT3JpZ2luPWNyb3NzT3JpZ2luO3RoaXMuY3Jvc3NPcmlnaW5Vcmw9Y3Jvc3NPcmlnaW5Vcmw7dmFyIGltYWdlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7aWYoY3Jvc3NPcmlnaW4pe2ltYWdlLmNyb3NzT3JpZ2luPWNyb3NzT3JpZ2lufWltYWdlLnNyYz1jcm9zc09yaWdpblVybHx8dXJsO2ltYWdlLmFsdD1lbGVtZW50LmFsdHx8XCJUaGUgaW1hZ2UgdG8gY3JvcFwiO3RoaXMuaW1hZ2U9aW1hZ2U7aW1hZ2Uub25sb2FkPXRoaXMuc3RhcnQuYmluZCh0aGlzKTtpbWFnZS5vbmVycm9yPXRoaXMuc3RvcC5iaW5kKHRoaXMpO2FkZENsYXNzKGltYWdlLENMQVNTX0hJREUpO2VsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaW1hZ2UsZWxlbWVudC5uZXh0U2libGluZyl9fSx7a2V5Olwic3RhcnRcIix2YWx1ZTpmdW5jdGlvbiBzdGFydCgpe3ZhciBfdGhpczI9dGhpczt2YXIgaW1hZ2U9dGhpcy5pbWFnZTtpbWFnZS5vbmxvYWQ9bnVsbDtpbWFnZS5vbmVycm9yPW51bGw7dGhpcy5zaXppbmc9dHJ1ZTt2YXIgaXNJT1NXZWJLaXQ9V0lORE9XLm5hdmlnYXRvciYmLyg/OmlQYWR8aVBob25lfGlQb2QpLio/QXBwbGVXZWJLaXQvaS50ZXN0KFdJTkRPVy5uYXZpZ2F0b3IudXNlckFnZW50KTt2YXIgZG9uZT1mdW5jdGlvbiBkb25lKG5hdHVyYWxXaWR0aCxuYXR1cmFsSGVpZ2h0KXthc3NpZ24oX3RoaXMyLmltYWdlRGF0YSx7bmF0dXJhbFdpZHRoOm5hdHVyYWxXaWR0aCxuYXR1cmFsSGVpZ2h0Om5hdHVyYWxIZWlnaHQsYXNwZWN0UmF0aW86bmF0dXJhbFdpZHRoL25hdHVyYWxIZWlnaHR9KTtfdGhpczIuc2l6aW5nPWZhbHNlO190aGlzMi5zaXplZD10cnVlO190aGlzMi5idWlsZCgpfTtpZihpbWFnZS5uYXR1cmFsV2lkdGgmJiFpc0lPU1dlYktpdCl7ZG9uZShpbWFnZS5uYXR1cmFsV2lkdGgsaW1hZ2UubmF0dXJhbEhlaWdodCk7cmV0dXJufXZhciBzaXppbmdJbWFnZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO3ZhciBib2R5PWRvY3VtZW50LmJvZHl8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDt0aGlzLnNpemluZ0ltYWdlPXNpemluZ0ltYWdlO3NpemluZ0ltYWdlLm9ubG9hZD1mdW5jdGlvbigpe2RvbmUoc2l6aW5nSW1hZ2Uud2lkdGgsc2l6aW5nSW1hZ2UuaGVpZ2h0KTtpZighaXNJT1NXZWJLaXQpe2JvZHkucmVtb3ZlQ2hpbGQoc2l6aW5nSW1hZ2UpfX07c2l6aW5nSW1hZ2Uuc3JjPWltYWdlLnNyYztpZighaXNJT1NXZWJLaXQpe3NpemluZ0ltYWdlLnN0eWxlLmNzc1RleHQ9XCJsZWZ0OjA7XCIrXCJtYXgtaGVpZ2h0Om5vbmUhaW1wb3J0YW50O1wiK1wibWF4LXdpZHRoOm5vbmUhaW1wb3J0YW50O1wiK1wibWluLWhlaWdodDowIWltcG9ydGFudDtcIitcIm1pbi13aWR0aDowIWltcG9ydGFudDtcIitcIm9wYWNpdHk6MDtcIitcInBvc2l0aW9uOmFic29sdXRlO1wiK1widG9wOjA7XCIrXCJ6LWluZGV4Oi0xO1wiO2JvZHkuYXBwZW5kQ2hpbGQoc2l6aW5nSW1hZ2UpfX19LHtrZXk6XCJzdG9wXCIsdmFsdWU6ZnVuY3Rpb24gc3RvcCgpe3ZhciBpbWFnZT10aGlzLmltYWdlO2ltYWdlLm9ubG9hZD1udWxsO2ltYWdlLm9uZXJyb3I9bnVsbDtpbWFnZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGltYWdlKTt0aGlzLmltYWdlPW51bGx9fSx7a2V5OlwiYnVpbGRcIix2YWx1ZTpmdW5jdGlvbiBidWlsZCgpe2lmKCF0aGlzLnNpemVkfHx0aGlzLnJlYWR5KXtyZXR1cm59dmFyIGVsZW1lbnQ9dGhpcy5lbGVtZW50LG9wdGlvbnM9dGhpcy5vcHRpb25zLGltYWdlPXRoaXMuaW1hZ2U7dmFyIGNvbnRhaW5lcj1lbGVtZW50LnBhcmVudE5vZGU7dmFyIHRlbXBsYXRlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dGVtcGxhdGUuaW5uZXJIVE1MPVRFTVBMQVRFO3ZhciBjcm9wcGVyPXRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoXCIuXCIuY29uY2F0KE5BTUVTUEFDRSxcIi1jb250YWluZXJcIikpO3ZhciBjYW52YXM9Y3JvcHBlci5xdWVyeVNlbGVjdG9yKFwiLlwiLmNvbmNhdChOQU1FU1BBQ0UsXCItY2FudmFzXCIpKTt2YXIgZHJhZ0JveD1jcm9wcGVyLnF1ZXJ5U2VsZWN0b3IoXCIuXCIuY29uY2F0KE5BTUVTUEFDRSxcIi1kcmFnLWJveFwiKSk7dmFyIGNyb3BCb3g9Y3JvcHBlci5xdWVyeVNlbGVjdG9yKFwiLlwiLmNvbmNhdChOQU1FU1BBQ0UsXCItY3JvcC1ib3hcIikpO3ZhciBmYWNlPWNyb3BCb3gucXVlcnlTZWxlY3RvcihcIi5cIi5jb25jYXQoTkFNRVNQQUNFLFwiLWZhY2VcIikpO3RoaXMuY29udGFpbmVyPWNvbnRhaW5lcjt0aGlzLmNyb3BwZXI9Y3JvcHBlcjt0aGlzLmNhbnZhcz1jYW52YXM7dGhpcy5kcmFnQm94PWRyYWdCb3g7dGhpcy5jcm9wQm94PWNyb3BCb3g7dGhpcy52aWV3Qm94PWNyb3BwZXIucXVlcnlTZWxlY3RvcihcIi5cIi5jb25jYXQoTkFNRVNQQUNFLFwiLXZpZXctYm94XCIpKTt0aGlzLmZhY2U9ZmFjZTtjYW52YXMuYXBwZW5kQ2hpbGQoaW1hZ2UpO2FkZENsYXNzKGVsZW1lbnQsQ0xBU1NfSElEREVOKTtjb250YWluZXIuaW5zZXJ0QmVmb3JlKGNyb3BwZXIsZWxlbWVudC5uZXh0U2libGluZyk7aWYoIXRoaXMuaXNJbWcpe3JlbW92ZUNsYXNzKGltYWdlLENMQVNTX0hJREUpfXRoaXMuaW5pdFByZXZpZXcoKTt0aGlzLmJpbmQoKTtvcHRpb25zLmluaXRpYWxBc3BlY3RSYXRpbz1NYXRoLm1heCgwLG9wdGlvbnMuaW5pdGlhbEFzcGVjdFJhdGlvKXx8TmFOO29wdGlvbnMuYXNwZWN0UmF0aW89TWF0aC5tYXgoMCxvcHRpb25zLmFzcGVjdFJhdGlvKXx8TmFOO29wdGlvbnMudmlld01vZGU9TWF0aC5tYXgoMCxNYXRoLm1pbigzLE1hdGgucm91bmQob3B0aW9ucy52aWV3TW9kZSkpKXx8MDthZGRDbGFzcyhjcm9wQm94LENMQVNTX0hJRERFTik7aWYoIW9wdGlvbnMuZ3VpZGVzKXthZGRDbGFzcyhjcm9wQm94LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJcIi5jb25jYXQoTkFNRVNQQUNFLFwiLWRhc2hlZFwiKSksQ0xBU1NfSElEREVOKX1pZighb3B0aW9ucy5jZW50ZXIpe2FkZENsYXNzKGNyb3BCb3guZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIlwiLmNvbmNhdChOQU1FU1BBQ0UsXCItY2VudGVyXCIpKSxDTEFTU19ISURERU4pfWlmKG9wdGlvbnMuYmFja2dyb3VuZCl7YWRkQ2xhc3MoY3JvcHBlcixcIlwiLmNvbmNhdChOQU1FU1BBQ0UsXCItYmdcIikpfWlmKCFvcHRpb25zLmhpZ2hsaWdodCl7YWRkQ2xhc3MoZmFjZSxDTEFTU19JTlZJU0lCTEUpfWlmKG9wdGlvbnMuY3JvcEJveE1vdmFibGUpe2FkZENsYXNzKGZhY2UsQ0xBU1NfTU9WRSk7c2V0RGF0YShmYWNlLERBVEFfQUNUSU9OLEFDVElPTl9BTEwpfWlmKCFvcHRpb25zLmNyb3BCb3hSZXNpemFibGUpe2FkZENsYXNzKGNyb3BCb3guZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIlwiLmNvbmNhdChOQU1FU1BBQ0UsXCItbGluZVwiKSksQ0xBU1NfSElEREVOKTthZGRDbGFzcyhjcm9wQm94LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJcIi5jb25jYXQoTkFNRVNQQUNFLFwiLXBvaW50XCIpKSxDTEFTU19ISURERU4pfXRoaXMucmVuZGVyKCk7dGhpcy5yZWFkeT10cnVlO3RoaXMuc2V0RHJhZ01vZGUob3B0aW9ucy5kcmFnTW9kZSk7aWYob3B0aW9ucy5hdXRvQ3JvcCl7dGhpcy5jcm9wKCl9dGhpcy5zZXREYXRhKG9wdGlvbnMuZGF0YSk7aWYoaXNGdW5jdGlvbihvcHRpb25zLnJlYWR5KSl7YWRkTGlzdGVuZXIoZWxlbWVudCxFVkVOVF9SRUFEWSxvcHRpb25zLnJlYWR5LHtvbmNlOnRydWV9KX1kaXNwYXRjaEV2ZW50KGVsZW1lbnQsRVZFTlRfUkVBRFkpfX0se2tleTpcInVuYnVpbGRcIix2YWx1ZTpmdW5jdGlvbiB1bmJ1aWxkKCl7aWYoIXRoaXMucmVhZHkpe3JldHVybn10aGlzLnJlYWR5PWZhbHNlO3RoaXMudW5iaW5kKCk7dGhpcy5yZXNldFByZXZpZXcoKTt0aGlzLmNyb3BwZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmNyb3BwZXIpO3JlbW92ZUNsYXNzKHRoaXMuZWxlbWVudCxDTEFTU19ISURERU4pfX0se2tleTpcInVuY3JlYXRlXCIsdmFsdWU6ZnVuY3Rpb24gdW5jcmVhdGUoKXtpZih0aGlzLnJlYWR5KXt0aGlzLnVuYnVpbGQoKTt0aGlzLnJlYWR5PWZhbHNlO3RoaXMuY3JvcHBlZD1mYWxzZX1lbHNlIGlmKHRoaXMuc2l6aW5nKXt0aGlzLnNpemluZ0ltYWdlLm9ubG9hZD1udWxsO3RoaXMuc2l6aW5nPWZhbHNlO3RoaXMuc2l6ZWQ9ZmFsc2V9ZWxzZSBpZih0aGlzLnJlbG9hZGluZyl7dGhpcy54aHIub25hYm9ydD1udWxsO3RoaXMueGhyLmFib3J0KCl9ZWxzZSBpZih0aGlzLmltYWdlKXt0aGlzLnN0b3AoKX19fV0sW3trZXk6XCJub0NvbmZsaWN0XCIsdmFsdWU6ZnVuY3Rpb24gbm9Db25mbGljdCgpe3dpbmRvdy5Dcm9wcGVyPUFub3RoZXJDcm9wcGVyO3JldHVybiBDcm9wcGVyfX0se2tleTpcInNldERlZmF1bHRzXCIsdmFsdWU6ZnVuY3Rpb24gc2V0RGVmYXVsdHMob3B0aW9ucyl7YXNzaWduKERFRkFVTFRTLGlzUGxhaW5PYmplY3Qob3B0aW9ucykmJm9wdGlvbnMpfX1dKTtyZXR1cm4gQ3JvcHBlcn0oKTthc3NpZ24oQ3JvcHBlci5wcm90b3R5cGUscmVuZGVyLHByZXZpZXcsZXZlbnRzLGhhbmRsZXJzLGNoYW5nZSxtZXRob2RzKTtyZXR1cm4gQ3JvcHBlcn0pOyhmdW5jdGlvbihnbG9iYWwsZmFjdG9yeSl7ZmFjdG9yeShnbG9iYWwualF1ZXJ5LGdsb2JhbC5Dcm9wcGVyKX0pKHdpbmRvdyxmdW5jdGlvbigkLENyb3BwZXIpe1widXNlIHN0cmljdFwiOyQ9JCYmJC5oYXNPd25Qcm9wZXJ0eShcImRlZmF1bHRcIik/JFtcImRlZmF1bHRcIl06JDtDcm9wcGVyPUNyb3BwZXImJkNyb3BwZXIuaGFzT3duUHJvcGVydHkoXCJkZWZhdWx0XCIpP0Nyb3BwZXJbXCJkZWZhdWx0XCJdOkNyb3BwZXI7aWYoJCYmJC5mbiYmQ3JvcHBlcil7dmFyIEFub3RoZXJDcm9wcGVyPSQuZm4uY3JvcHBlcjt2YXIgTkFNRVNQQUNFPVwiY3JvcHBlclwiOyQuZm4uY3JvcHBlcj1mdW5jdGlvbiBqUXVlcnlDcm9wcGVyKG9wdGlvbil7Zm9yKHZhciBfbGVuPWFyZ3VtZW50cy5sZW5ndGgsYXJncz1uZXcgQXJyYXkoX2xlbj4xP19sZW4tMTowKSxfa2V5PTE7X2tleTxfbGVuO19rZXkrKyl7YXJnc1tfa2V5LTFdPWFyZ3VtZW50c1tfa2V5XX12YXIgcmVzdWx0O3RoaXMuZWFjaChmdW5jdGlvbihpLGVsZW1lbnQpe3ZhciAkZWxlbWVudD0kKGVsZW1lbnQpO3ZhciBpc0Rlc3Ryb3k9b3B0aW9uPT09XCJkZXN0cm95XCI7dmFyIGNyb3BwZXI9JGVsZW1lbnQuZGF0YShOQU1FU1BBQ0UpO2lmKCFjcm9wcGVyKXtpZihpc0Rlc3Ryb3kpe3JldHVybn12YXIgb3B0aW9ucz0kLmV4dGVuZCh7fSwkZWxlbWVudC5kYXRhKCksJC5pc1BsYWluT2JqZWN0KG9wdGlvbikmJm9wdGlvbik7Y3JvcHBlcj1uZXcgQ3JvcHBlcihlbGVtZW50LG9wdGlvbnMpOyRlbGVtZW50LmRhdGEoTkFNRVNQQUNFLGNyb3BwZXIpfWlmKHR5cGVvZiBvcHRpb249PT1cInN0cmluZ1wiKXt2YXIgZm49Y3JvcHBlcltvcHRpb25dO2lmKCQuaXNGdW5jdGlvbihmbikpe3Jlc3VsdD1mbi5hcHBseShjcm9wcGVyLGFyZ3MpO2lmKHJlc3VsdD09PWNyb3BwZXIpe3Jlc3VsdD11bmRlZmluZWR9aWYoaXNEZXN0cm95KXskZWxlbWVudC5yZW1vdmVEYXRhKE5BTUVTUEFDRSl9fX19KTtyZXR1cm4gcmVzdWx0IT09dW5kZWZpbmVkP3Jlc3VsdDp0aGlzfTskLmZuLmNyb3BwZXIuQ29uc3RydWN0b3I9Q3JvcHBlcjskLmZuLmNyb3BwZXIuc2V0RGVmYXVsdHM9Q3JvcHBlci5zZXREZWZhdWx0czskLmZuLmNyb3BwZXIubm9Db25mbGljdD1mdW5jdGlvbiBub0NvbmZsaWN0KCl7JC5mbi5jcm9wcGVyPUFub3RoZXJDcm9wcGVyO3JldHVybiB0aGlzfX19KTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/vendor/cropper/cropper-v1.js\n");

/***/ }),

/***/ 0:
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__("./src/vendor/cropper/cropper-v1.js");


/***/ })

/******/ });